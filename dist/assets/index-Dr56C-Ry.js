function hy(t,e){for(var r=0;r<e.length;r++){const n=e[r];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(n,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function r(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=r(i);fetch(i.href,s)}})();var Pn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function du(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Is(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var i=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,i.get?i:{enumerable:!0,get:function(){return t[n]}})}),r}var Gf={exports:{}},Io={},Kf={exports:{}},se={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ds=Symbol.for("react.element"),fy=Symbol.for("react.portal"),my=Symbol.for("react.fragment"),py=Symbol.for("react.strict_mode"),gy=Symbol.for("react.profiler"),vy=Symbol.for("react.provider"),yy=Symbol.for("react.context"),wy=Symbol.for("react.forward_ref"),xy=Symbol.for("react.suspense"),_y=Symbol.for("react.memo"),by=Symbol.for("react.lazy"),Rd=Symbol.iterator;function ky(t){return t===null||typeof t!="object"?null:(t=Rd&&t[Rd]||t["@@iterator"],typeof t=="function"?t:null)}var Jf={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Yf=Object.assign,Zf={};function Ei(t,e,r){this.props=t,this.context=e,this.refs=Zf,this.updater=r||Jf}Ei.prototype.isReactComponent={};Ei.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ei.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Qf(){}Qf.prototype=Ei.prototype;function hu(t,e,r){this.props=t,this.context=e,this.refs=Zf,this.updater=r||Jf}var fu=hu.prototype=new Qf;fu.constructor=hu;Yf(fu,Ei.prototype);fu.isPureReactComponent=!0;var Pd=Array.isArray,Xf=Object.prototype.hasOwnProperty,mu={current:null},em={key:!0,ref:!0,__self:!0,__source:!0};function tm(t,e,r){var n,i={},s=null,a=null;if(e!=null)for(n in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(s=""+e.key),e)Xf.call(e,n)&&!em.hasOwnProperty(n)&&(i[n]=e[n]);var o=arguments.length-2;if(o===1)i.children=r;else if(1<o){for(var c=Array(o),u=0;u<o;u++)c[u]=arguments[u+2];i.children=c}if(t&&t.defaultProps)for(n in o=t.defaultProps,o)i[n]===void 0&&(i[n]=o[n]);return{$$typeof:Ds,type:t,key:s,ref:a,props:i,_owner:mu.current}}function Sy(t,e){return{$$typeof:Ds,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function pu(t){return typeof t=="object"&&t!==null&&t.$$typeof===Ds}function jy(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var Id=/\/+/g;function hl(t,e){return typeof t=="object"&&t!==null&&t.key!=null?jy(""+t.key):e.toString(36)}function _a(t,e,r,n,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(s){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case Ds:case fy:a=!0}}if(a)return a=t,i=i(a),t=n===""?"."+hl(a,0):n,Pd(i)?(r="",t!=null&&(r=t.replace(Id,"$&/")+"/"),_a(i,e,r,"",function(u){return u})):i!=null&&(pu(i)&&(i=Sy(i,r+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(Id,"$&/")+"/")+t)),e.push(i)),1;if(a=0,n=n===""?".":n+":",Pd(t))for(var o=0;o<t.length;o++){s=t[o];var c=n+hl(s,o);a+=_a(s,e,r,c,i)}else if(c=ky(t),typeof c=="function")for(t=c.call(t),o=0;!(s=t.next()).done;)s=s.value,c=n+hl(s,o++),a+=_a(s,e,r,c,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function qs(t,e,r){if(t==null)return t;var n=[],i=0;return _a(t,n,"","",function(s){return e.call(r,s,i++)}),n}function Ny(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var nt={current:null},ba={transition:null},Ey={ReactCurrentDispatcher:nt,ReactCurrentBatchConfig:ba,ReactCurrentOwner:mu};function rm(){throw Error("act(...) is not supported in production builds of React.")}se.Children={map:qs,forEach:function(t,e,r){qs(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return qs(t,function(){e++}),e},toArray:function(t){return qs(t,function(e){return e})||[]},only:function(t){if(!pu(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};se.Component=Ei;se.Fragment=my;se.Profiler=gy;se.PureComponent=hu;se.StrictMode=py;se.Suspense=xy;se.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ey;se.act=rm;se.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=Yf({},t.props),i=t.key,s=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,a=mu.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var o=t.type.defaultProps;for(c in e)Xf.call(e,c)&&!em.hasOwnProperty(c)&&(n[c]=e[c]===void 0&&o!==void 0?o[c]:e[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){o=Array(c);for(var u=0;u<c;u++)o[u]=arguments[u+2];n.children=o}return{$$typeof:Ds,type:t.type,key:i,ref:s,props:n,_owner:a}};se.createContext=function(t){return t={$$typeof:yy,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:vy,_context:t},t.Consumer=t};se.createElement=tm;se.createFactory=function(t){var e=tm.bind(null,t);return e.type=t,e};se.createRef=function(){return{current:null}};se.forwardRef=function(t){return{$$typeof:wy,render:t}};se.isValidElement=pu;se.lazy=function(t){return{$$typeof:by,_payload:{_status:-1,_result:t},_init:Ny}};se.memo=function(t,e){return{$$typeof:_y,type:t,compare:e===void 0?null:e}};se.startTransition=function(t){var e=ba.transition;ba.transition={};try{t()}finally{ba.transition=e}};se.unstable_act=rm;se.useCallback=function(t,e){return nt.current.useCallback(t,e)};se.useContext=function(t){return nt.current.useContext(t)};se.useDebugValue=function(){};se.useDeferredValue=function(t){return nt.current.useDeferredValue(t)};se.useEffect=function(t,e){return nt.current.useEffect(t,e)};se.useId=function(){return nt.current.useId()};se.useImperativeHandle=function(t,e,r){return nt.current.useImperativeHandle(t,e,r)};se.useInsertionEffect=function(t,e){return nt.current.useInsertionEffect(t,e)};se.useLayoutEffect=function(t,e){return nt.current.useLayoutEffect(t,e)};se.useMemo=function(t,e){return nt.current.useMemo(t,e)};se.useReducer=function(t,e,r){return nt.current.useReducer(t,e,r)};se.useRef=function(t){return nt.current.useRef(t)};se.useState=function(t){return nt.current.useState(t)};se.useSyncExternalStore=function(t,e,r){return nt.current.useSyncExternalStore(t,e,r)};se.useTransition=function(){return nt.current.useTransition()};se.version="18.3.1";Kf.exports=se;var Y=Kf.exports;const Xe=du(Y);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cy=Y,Ty=Symbol.for("react.element"),Ay=Symbol.for("react.fragment"),Oy=Object.prototype.hasOwnProperty,Ry=Cy.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Py={key:!0,ref:!0,__self:!0,__source:!0};function nm(t,e,r){var n,i={},s=null,a=null;r!==void 0&&(s=""+r),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(a=e.ref);for(n in e)Oy.call(e,n)&&!Py.hasOwnProperty(n)&&(i[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)i[n]===void 0&&(i[n]=e[n]);return{$$typeof:Ty,type:t,key:s,ref:a,props:i,_owner:Ry.current}}Io.Fragment=Ay;Io.jsx=nm;Io.jsxs=nm;Gf.exports=Io;var l=Gf.exports,Kl={},im={exports:{}},_t={},sm={exports:{}},am={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(O,H){var Z=O.length;O.push(H);e:for(;0<Z;){var we=Z-1>>>1,Te=O[we];if(0<i(Te,H))O[we]=H,O[Z]=Te,Z=we;else break e}}function r(O){return O.length===0?null:O[0]}function n(O){if(O.length===0)return null;var H=O[0],Z=O.pop();if(Z!==H){O[0]=Z;e:for(var we=0,Te=O.length,rn=Te>>>1;we<rn;){var ar=2*(we+1)-1,Rn=O[ar],or=ar+1,Sr=O[or];if(0>i(Rn,Z))or<Te&&0>i(Sr,Rn)?(O[we]=Sr,O[or]=Z,we=or):(O[we]=Rn,O[ar]=Z,we=ar);else if(or<Te&&0>i(Sr,Z))O[we]=Sr,O[or]=Z,we=or;else break e}}return H}function i(O,H){var Z=O.sortIndex-H.sortIndex;return Z!==0?Z:O.id-H.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,o=a.now();t.unstable_now=function(){return a.now()-o}}var c=[],u=[],d=1,f=null,m=3,g=!1,y=!1,w=!1,b=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,h=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function p(O){for(var H=r(u);H!==null;){if(H.callback===null)n(u);else if(H.startTime<=O)n(u),H.sortIndex=H.expirationTime,e(c,H);else break;H=r(u)}}function _(O){if(w=!1,p(O),!y)if(r(c)!==null)y=!0,ce(S);else{var H=r(u);H!==null&&je(_,H.startTime-O)}}function S(O,H){y=!1,w&&(w=!1,v(P),P=-1),g=!0;var Z=m;try{for(p(H),f=r(c);f!==null&&(!(f.expirationTime>H)||O&&!ne());){var we=f.callback;if(typeof we=="function"){f.callback=null,m=f.priorityLevel;var Te=we(f.expirationTime<=H);H=t.unstable_now(),typeof Te=="function"?f.callback=Te:f===r(c)&&n(c),p(H)}else n(c);f=r(c)}if(f!==null)var rn=!0;else{var ar=r(u);ar!==null&&je(_,ar.startTime-H),rn=!1}return rn}finally{f=null,m=Z,g=!1}}var N=!1,E=null,P=-1,G=5,K=-1;function ne(){return!(t.unstable_now()-K<G)}function q(){if(E!==null){var O=t.unstable_now();K=O;var H=!0;try{H=E(!0,O)}finally{H?re():(N=!1,E=null)}}else N=!1}var re;if(typeof h=="function")re=function(){h(q)};else if(typeof MessageChannel<"u"){var V=new MessageChannel,te=V.port2;V.port1.onmessage=q,re=function(){te.postMessage(null)}}else re=function(){b(q,0)};function ce(O){E=O,N||(N=!0,re())}function je(O,H){P=b(function(){O(t.unstable_now())},H)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(O){O.callback=null},t.unstable_continueExecution=function(){y||g||(y=!0,ce(S))},t.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):G=0<O?Math.floor(1e3/O):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(O){switch(m){case 1:case 2:case 3:var H=3;break;default:H=m}var Z=m;m=H;try{return O()}finally{m=Z}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(O,H){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var Z=m;m=O;try{return H()}finally{m=Z}},t.unstable_scheduleCallback=function(O,H,Z){var we=t.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?we+Z:we):Z=we,O){case 1:var Te=-1;break;case 2:Te=250;break;case 5:Te=1073741823;break;case 4:Te=1e4;break;default:Te=5e3}return Te=Z+Te,O={id:d++,callback:H,priorityLevel:O,startTime:Z,expirationTime:Te,sortIndex:-1},Z>we?(O.sortIndex=Z,e(u,O),r(c)===null&&O===r(u)&&(w?(v(P),P=-1):w=!0,je(_,Z-we))):(O.sortIndex=Te,e(c,O),y||g||(y=!0,ce(S))),O},t.unstable_shouldYield=ne,t.unstable_wrapCallback=function(O){var H=m;return function(){var Z=m;m=H;try{return O.apply(this,arguments)}finally{m=Z}}}})(am);sm.exports=am;var Iy=sm.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dy=Y,wt=Iy;function C(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var om=new Set,ds={};function An(t,e){di(t,e),di(t+"Capture",e)}function di(t,e){for(ds[t]=e,t=0;t<e.length;t++)om.add(e[t])}var gr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Jl=Object.prototype.hasOwnProperty,Ly=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Dd={},Ld={};function $y(t){return Jl.call(Ld,t)?!0:Jl.call(Dd,t)?!1:Ly.test(t)?Ld[t]=!0:(Dd[t]=!0,!1)}function My(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Uy(t,e,r,n){if(e===null||typeof e>"u"||My(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function it(t,e,r,n,i,s,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=a}var qe={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){qe[t]=new it(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];qe[e]=new it(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){qe[t]=new it(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){qe[t]=new it(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){qe[t]=new it(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){qe[t]=new it(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){qe[t]=new it(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){qe[t]=new it(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){qe[t]=new it(t,5,!1,t.toLowerCase(),null,!1,!1)});var gu=/[\-:]([a-z])/g;function vu(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(gu,vu);qe[e]=new it(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(gu,vu);qe[e]=new it(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(gu,vu);qe[e]=new it(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){qe[t]=new it(t,1,!1,t.toLowerCase(),null,!1,!1)});qe.xlinkHref=new it("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){qe[t]=new it(t,1,!1,t.toLowerCase(),null,!0,!0)});function yu(t,e,r,n){var i=qe.hasOwnProperty(e)?qe[e]:null;(i!==null?i.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Uy(e,r,i,n)&&(r=null),n||i===null?$y(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):i.mustUseProperty?t[i.propertyName]=r===null?i.type===3?!1:"":r:(e=i.attributeName,n=i.attributeNamespace,r===null?t.removeAttribute(e):(i=i.type,r=i===3||i===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var _r=Dy.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Gs=Symbol.for("react.element"),Wn=Symbol.for("react.portal"),qn=Symbol.for("react.fragment"),wu=Symbol.for("react.strict_mode"),Yl=Symbol.for("react.profiler"),lm=Symbol.for("react.provider"),cm=Symbol.for("react.context"),xu=Symbol.for("react.forward_ref"),Zl=Symbol.for("react.suspense"),Ql=Symbol.for("react.suspense_list"),_u=Symbol.for("react.memo"),Cr=Symbol.for("react.lazy"),um=Symbol.for("react.offscreen"),$d=Symbol.iterator;function Ii(t){return t===null||typeof t!="object"?null:(t=$d&&t[$d]||t["@@iterator"],typeof t=="function"?t:null)}var Se=Object.assign,fl;function Gi(t){if(fl===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);fl=e&&e[1]||""}return`
`+fl+t}var ml=!1;function pl(t,e){if(!t||ml)return"";ml=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var n=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){n=u}t.call(e.prototype)}else{try{throw Error()}catch(u){n=u}t()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=n.stack.split(`
`),a=i.length-1,o=s.length-1;1<=a&&0<=o&&i[a]!==s[o];)o--;for(;1<=a&&0<=o;a--,o--)if(i[a]!==s[o]){if(a!==1||o!==1)do if(a--,o--,0>o||i[a]!==s[o]){var c=`
`+i[a].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=a&&0<=o);break}}}finally{ml=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?Gi(t):""}function Fy(t){switch(t.tag){case 5:return Gi(t.type);case 16:return Gi("Lazy");case 13:return Gi("Suspense");case 19:return Gi("SuspenseList");case 0:case 2:case 15:return t=pl(t.type,!1),t;case 11:return t=pl(t.type.render,!1),t;case 1:return t=pl(t.type,!0),t;default:return""}}function Xl(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case qn:return"Fragment";case Wn:return"Portal";case Yl:return"Profiler";case wu:return"StrictMode";case Zl:return"Suspense";case Ql:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case cm:return(t.displayName||"Context")+".Consumer";case lm:return(t._context.displayName||"Context")+".Provider";case xu:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case _u:return e=t.displayName||null,e!==null?e:Xl(t.type)||"Memo";case Cr:e=t._payload,t=t._init;try{return Xl(t(e))}catch{}}return null}function By(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Xl(e);case 8:return e===wu?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Kr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function dm(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Vy(t){var e=dm(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var i=r.get,s=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(a){n=""+a,s.call(this,a)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(a){n=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Ks(t){t._valueTracker||(t._valueTracker=Vy(t))}function hm(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=dm(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function Ua(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function ec(t,e){var r=e.checked;return Se({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function Md(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=Kr(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function fm(t,e){e=e.checked,e!=null&&yu(t,"checked",e,!1)}function tc(t,e){fm(t,e);var r=Kr(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?rc(t,e.type,r):e.hasOwnProperty("defaultValue")&&rc(t,e.type,Kr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Ud(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function rc(t,e,r){(e!=="number"||Ua(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var Ki=Array.isArray;function ni(t,e,r,n){if(t=t.options,e){e={};for(var i=0;i<r.length;i++)e["$"+r[i]]=!0;for(r=0;r<t.length;r++)i=e.hasOwnProperty("$"+t[r].value),t[r].selected!==i&&(t[r].selected=i),i&&n&&(t[r].defaultSelected=!0)}else{for(r=""+Kr(r),e=null,i=0;i<t.length;i++){if(t[i].value===r){t[i].selected=!0,n&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function nc(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(C(91));return Se({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Fd(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(C(92));if(Ki(r)){if(1<r.length)throw Error(C(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:Kr(r)}}function mm(t,e){var r=Kr(e.value),n=Kr(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function Bd(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function pm(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ic(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?pm(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Js,gm=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,n,i){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Js=Js||document.createElement("div"),Js.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Js.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function hs(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var es={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},zy=["Webkit","ms","Moz","O"];Object.keys(es).forEach(function(t){zy.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),es[e]=es[t]})});function vm(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||es.hasOwnProperty(t)&&es[t]?(""+e).trim():e+"px"}function ym(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,i=vm(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,i):t[r]=i}}var Hy=Se({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function sc(t,e){if(e){if(Hy[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(C(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(C(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(C(61))}if(e.style!=null&&typeof e.style!="object")throw Error(C(62))}}function ac(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var oc=null;function bu(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var lc=null,ii=null,si=null;function Vd(t){if(t=Ms(t)){if(typeof lc!="function")throw Error(C(280));var e=t.stateNode;e&&(e=Uo(e),lc(t.stateNode,t.type,e))}}function wm(t){ii?si?si.push(t):si=[t]:ii=t}function xm(){if(ii){var t=ii,e=si;if(si=ii=null,Vd(t),e)for(t=0;t<e.length;t++)Vd(e[t])}}function _m(t,e){return t(e)}function bm(){}var gl=!1;function km(t,e,r){if(gl)return t(e,r);gl=!0;try{return _m(t,e,r)}finally{gl=!1,(ii!==null||si!==null)&&(bm(),xm())}}function fs(t,e){var r=t.stateNode;if(r===null)return null;var n=Uo(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(C(231,e,typeof r));return r}var cc=!1;if(gr)try{var Di={};Object.defineProperty(Di,"passive",{get:function(){cc=!0}}),window.addEventListener("test",Di,Di),window.removeEventListener("test",Di,Di)}catch{cc=!1}function Wy(t,e,r,n,i,s,a,o,c){var u=Array.prototype.slice.call(arguments,3);try{e.apply(r,u)}catch(d){this.onError(d)}}var ts=!1,Fa=null,Ba=!1,uc=null,qy={onError:function(t){ts=!0,Fa=t}};function Gy(t,e,r,n,i,s,a,o,c){ts=!1,Fa=null,Wy.apply(qy,arguments)}function Ky(t,e,r,n,i,s,a,o,c){if(Gy.apply(this,arguments),ts){if(ts){var u=Fa;ts=!1,Fa=null}else throw Error(C(198));Ba||(Ba=!0,uc=u)}}function On(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function Sm(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function zd(t){if(On(t)!==t)throw Error(C(188))}function Jy(t){var e=t.alternate;if(!e){if(e=On(t),e===null)throw Error(C(188));return e!==t?null:t}for(var r=t,n=e;;){var i=r.return;if(i===null)break;var s=i.alternate;if(s===null){if(n=i.return,n!==null){r=n;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===r)return zd(i),t;if(s===n)return zd(i),e;s=s.sibling}throw Error(C(188))}if(r.return!==n.return)r=i,n=s;else{for(var a=!1,o=i.child;o;){if(o===r){a=!0,r=i,n=s;break}if(o===n){a=!0,n=i,r=s;break}o=o.sibling}if(!a){for(o=s.child;o;){if(o===r){a=!0,r=s,n=i;break}if(o===n){a=!0,n=s,r=i;break}o=o.sibling}if(!a)throw Error(C(189))}}if(r.alternate!==n)throw Error(C(190))}if(r.tag!==3)throw Error(C(188));return r.stateNode.current===r?t:e}function jm(t){return t=Jy(t),t!==null?Nm(t):null}function Nm(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Nm(t);if(e!==null)return e;t=t.sibling}return null}var Em=wt.unstable_scheduleCallback,Hd=wt.unstable_cancelCallback,Yy=wt.unstable_shouldYield,Zy=wt.unstable_requestPaint,Ce=wt.unstable_now,Qy=wt.unstable_getCurrentPriorityLevel,ku=wt.unstable_ImmediatePriority,Cm=wt.unstable_UserBlockingPriority,Va=wt.unstable_NormalPriority,Xy=wt.unstable_LowPriority,Tm=wt.unstable_IdlePriority,Do=null,er=null;function e0(t){if(er&&typeof er.onCommitFiberRoot=="function")try{er.onCommitFiberRoot(Do,t,void 0,(t.current.flags&128)===128)}catch{}}var zt=Math.clz32?Math.clz32:n0,t0=Math.log,r0=Math.LN2;function n0(t){return t>>>=0,t===0?32:31-(t0(t)/r0|0)|0}var Ys=64,Zs=4194304;function Ji(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function za(t,e){var r=t.pendingLanes;if(r===0)return 0;var n=0,i=t.suspendedLanes,s=t.pingedLanes,a=r&268435455;if(a!==0){var o=a&~i;o!==0?n=Ji(o):(s&=a,s!==0&&(n=Ji(s)))}else a=r&~i,a!==0?n=Ji(a):s!==0&&(n=Ji(s));if(n===0)return 0;if(e!==0&&e!==n&&!(e&i)&&(i=n&-n,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(n&4&&(n|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-zt(e),i=1<<r,n|=t[r],e&=~i;return n}function i0(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function s0(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var a=31-zt(s),o=1<<a,c=i[a];c===-1?(!(o&r)||o&n)&&(i[a]=i0(o,e)):c<=e&&(t.expiredLanes|=o),s&=~o}}function dc(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Am(){var t=Ys;return Ys<<=1,!(Ys&4194240)&&(Ys=64),t}function vl(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function Ls(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-zt(e),t[e]=r}function a0(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var i=31-zt(r),s=1<<i;e[i]=0,n[i]=-1,t[i]=-1,r&=~s}}function Su(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-zt(r),i=1<<n;i&e|t[n]&e&&(t[n]|=e),r&=~i}}var he=0;function Om(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Rm,ju,Pm,Im,Dm,hc=!1,Qs=[],Ur=null,Fr=null,Br=null,ms=new Map,ps=new Map,Or=[],o0="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Wd(t,e){switch(t){case"focusin":case"focusout":Ur=null;break;case"dragenter":case"dragleave":Fr=null;break;case"mouseover":case"mouseout":Br=null;break;case"pointerover":case"pointerout":ms.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ps.delete(e.pointerId)}}function Li(t,e,r,n,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Ms(e),e!==null&&ju(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function l0(t,e,r,n,i){switch(e){case"focusin":return Ur=Li(Ur,t,e,r,n,i),!0;case"dragenter":return Fr=Li(Fr,t,e,r,n,i),!0;case"mouseover":return Br=Li(Br,t,e,r,n,i),!0;case"pointerover":var s=i.pointerId;return ms.set(s,Li(ms.get(s)||null,t,e,r,n,i)),!0;case"gotpointercapture":return s=i.pointerId,ps.set(s,Li(ps.get(s)||null,t,e,r,n,i)),!0}return!1}function Lm(t){var e=pn(t.target);if(e!==null){var r=On(e);if(r!==null){if(e=r.tag,e===13){if(e=Sm(r),e!==null){t.blockedOn=e,Dm(t.priority,function(){Pm(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ka(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=fc(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);oc=n,r.target.dispatchEvent(n),oc=null}else return e=Ms(r),e!==null&&ju(e),t.blockedOn=r,!1;e.shift()}return!0}function qd(t,e,r){ka(t)&&r.delete(e)}function c0(){hc=!1,Ur!==null&&ka(Ur)&&(Ur=null),Fr!==null&&ka(Fr)&&(Fr=null),Br!==null&&ka(Br)&&(Br=null),ms.forEach(qd),ps.forEach(qd)}function $i(t,e){t.blockedOn===e&&(t.blockedOn=null,hc||(hc=!0,wt.unstable_scheduleCallback(wt.unstable_NormalPriority,c0)))}function gs(t){function e(i){return $i(i,t)}if(0<Qs.length){$i(Qs[0],t);for(var r=1;r<Qs.length;r++){var n=Qs[r];n.blockedOn===t&&(n.blockedOn=null)}}for(Ur!==null&&$i(Ur,t),Fr!==null&&$i(Fr,t),Br!==null&&$i(Br,t),ms.forEach(e),ps.forEach(e),r=0;r<Or.length;r++)n=Or[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<Or.length&&(r=Or[0],r.blockedOn===null);)Lm(r),r.blockedOn===null&&Or.shift()}var ai=_r.ReactCurrentBatchConfig,Ha=!0;function u0(t,e,r,n){var i=he,s=ai.transition;ai.transition=null;try{he=1,Nu(t,e,r,n)}finally{he=i,ai.transition=s}}function d0(t,e,r,n){var i=he,s=ai.transition;ai.transition=null;try{he=4,Nu(t,e,r,n)}finally{he=i,ai.transition=s}}function Nu(t,e,r,n){if(Ha){var i=fc(t,e,r,n);if(i===null)El(t,e,n,Wa,r),Wd(t,n);else if(l0(i,t,e,r,n))n.stopPropagation();else if(Wd(t,n),e&4&&-1<o0.indexOf(t)){for(;i!==null;){var s=Ms(i);if(s!==null&&Rm(s),s=fc(t,e,r,n),s===null&&El(t,e,n,Wa,r),s===i)break;i=s}i!==null&&n.stopPropagation()}else El(t,e,n,null,r)}}var Wa=null;function fc(t,e,r,n){if(Wa=null,t=bu(n),t=pn(t),t!==null)if(e=On(t),e===null)t=null;else if(r=e.tag,r===13){if(t=Sm(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Wa=t,null}function $m(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Qy()){case ku:return 1;case Cm:return 4;case Va:case Xy:return 16;case Tm:return 536870912;default:return 16}default:return 16}}var Lr=null,Eu=null,Sa=null;function Mm(){if(Sa)return Sa;var t,e=Eu,r=e.length,n,i="value"in Lr?Lr.value:Lr.textContent,s=i.length;for(t=0;t<r&&e[t]===i[t];t++);var a=r-t;for(n=1;n<=a&&e[r-n]===i[s-n];n++);return Sa=i.slice(t,1<n?1-n:void 0)}function ja(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Xs(){return!0}function Gd(){return!1}function bt(t){function e(r,n,i,s,a){this._reactName=r,this._targetInst=i,this.type=n,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var o in t)t.hasOwnProperty(o)&&(r=t[o],this[o]=r?r(s):s[o]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Xs:Gd,this.isPropagationStopped=Gd,this}return Se(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Xs)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Xs)},persist:function(){},isPersistent:Xs}),e}var Ci={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Cu=bt(Ci),$s=Se({},Ci,{view:0,detail:0}),h0=bt($s),yl,wl,Mi,Lo=Se({},$s,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Tu,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Mi&&(Mi&&t.type==="mousemove"?(yl=t.screenX-Mi.screenX,wl=t.screenY-Mi.screenY):wl=yl=0,Mi=t),yl)},movementY:function(t){return"movementY"in t?t.movementY:wl}}),Kd=bt(Lo),f0=Se({},Lo,{dataTransfer:0}),m0=bt(f0),p0=Se({},$s,{relatedTarget:0}),xl=bt(p0),g0=Se({},Ci,{animationName:0,elapsedTime:0,pseudoElement:0}),v0=bt(g0),y0=Se({},Ci,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),w0=bt(y0),x0=Se({},Ci,{data:0}),Jd=bt(x0),_0={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},b0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},k0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function S0(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=k0[t])?!!e[t]:!1}function Tu(){return S0}var j0=Se({},$s,{key:function(t){if(t.key){var e=_0[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=ja(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?b0[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Tu,charCode:function(t){return t.type==="keypress"?ja(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ja(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),N0=bt(j0),E0=Se({},Lo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Yd=bt(E0),C0=Se({},$s,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Tu}),T0=bt(C0),A0=Se({},Ci,{propertyName:0,elapsedTime:0,pseudoElement:0}),O0=bt(A0),R0=Se({},Lo,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),P0=bt(R0),I0=[9,13,27,32],Au=gr&&"CompositionEvent"in window,rs=null;gr&&"documentMode"in document&&(rs=document.documentMode);var D0=gr&&"TextEvent"in window&&!rs,Um=gr&&(!Au||rs&&8<rs&&11>=rs),Zd=" ",Qd=!1;function Fm(t,e){switch(t){case"keyup":return I0.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bm(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Gn=!1;function L0(t,e){switch(t){case"compositionend":return Bm(e);case"keypress":return e.which!==32?null:(Qd=!0,Zd);case"textInput":return t=e.data,t===Zd&&Qd?null:t;default:return null}}function $0(t,e){if(Gn)return t==="compositionend"||!Au&&Fm(t,e)?(t=Mm(),Sa=Eu=Lr=null,Gn=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Um&&e.locale!=="ko"?null:e.data;default:return null}}var M0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Xd(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!M0[t.type]:e==="textarea"}function Vm(t,e,r,n){wm(n),e=qa(e,"onChange"),0<e.length&&(r=new Cu("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var ns=null,vs=null;function U0(t){Xm(t,0)}function $o(t){var e=Yn(t);if(hm(e))return t}function F0(t,e){if(t==="change")return e}var zm=!1;if(gr){var _l;if(gr){var bl="oninput"in document;if(!bl){var eh=document.createElement("div");eh.setAttribute("oninput","return;"),bl=typeof eh.oninput=="function"}_l=bl}else _l=!1;zm=_l&&(!document.documentMode||9<document.documentMode)}function th(){ns&&(ns.detachEvent("onpropertychange",Hm),vs=ns=null)}function Hm(t){if(t.propertyName==="value"&&$o(vs)){var e=[];Vm(e,vs,t,bu(t)),km(U0,e)}}function B0(t,e,r){t==="focusin"?(th(),ns=e,vs=r,ns.attachEvent("onpropertychange",Hm)):t==="focusout"&&th()}function V0(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return $o(vs)}function z0(t,e){if(t==="click")return $o(e)}function H0(t,e){if(t==="input"||t==="change")return $o(e)}function W0(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Wt=typeof Object.is=="function"?Object.is:W0;function ys(t,e){if(Wt(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var i=r[n];if(!Jl.call(e,i)||!Wt(t[i],e[i]))return!1}return!0}function rh(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function nh(t,e){var r=rh(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=rh(r)}}function Wm(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Wm(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function qm(){for(var t=window,e=Ua();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=Ua(t.document)}return e}function Ou(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function q0(t){var e=qm(),r=t.focusedElem,n=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&Wm(r.ownerDocument.documentElement,r)){if(n!==null&&Ou(r)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=r.textContent.length,s=Math.min(n.start,i);n=n.end===void 0?s:Math.min(n.end,i),!t.extend&&s>n&&(i=n,n=s,s=i),i=nh(r,s);var a=nh(r,n);i&&a&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>n?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var G0=gr&&"documentMode"in document&&11>=document.documentMode,Kn=null,mc=null,is=null,pc=!1;function ih(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;pc||Kn==null||Kn!==Ua(n)||(n=Kn,"selectionStart"in n&&Ou(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),is&&ys(is,n)||(is=n,n=qa(mc,"onSelect"),0<n.length&&(e=new Cu("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=Kn)))}function ea(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var Jn={animationend:ea("Animation","AnimationEnd"),animationiteration:ea("Animation","AnimationIteration"),animationstart:ea("Animation","AnimationStart"),transitionend:ea("Transition","TransitionEnd")},kl={},Gm={};gr&&(Gm=document.createElement("div").style,"AnimationEvent"in window||(delete Jn.animationend.animation,delete Jn.animationiteration.animation,delete Jn.animationstart.animation),"TransitionEvent"in window||delete Jn.transitionend.transition);function Mo(t){if(kl[t])return kl[t];if(!Jn[t])return t;var e=Jn[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in Gm)return kl[t]=e[r];return t}var Km=Mo("animationend"),Jm=Mo("animationiteration"),Ym=Mo("animationstart"),Zm=Mo("transitionend"),Qm=new Map,sh="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Qr(t,e){Qm.set(t,e),An(e,[t])}for(var Sl=0;Sl<sh.length;Sl++){var jl=sh[Sl],K0=jl.toLowerCase(),J0=jl[0].toUpperCase()+jl.slice(1);Qr(K0,"on"+J0)}Qr(Km,"onAnimationEnd");Qr(Jm,"onAnimationIteration");Qr(Ym,"onAnimationStart");Qr("dblclick","onDoubleClick");Qr("focusin","onFocus");Qr("focusout","onBlur");Qr(Zm,"onTransitionEnd");di("onMouseEnter",["mouseout","mouseover"]);di("onMouseLeave",["mouseout","mouseover"]);di("onPointerEnter",["pointerout","pointerover"]);di("onPointerLeave",["pointerout","pointerover"]);An("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));An("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));An("onBeforeInput",["compositionend","keypress","textInput","paste"]);An("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));An("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));An("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Yi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Y0=new Set("cancel close invalid load scroll toggle".split(" ").concat(Yi));function ah(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,Ky(n,e,void 0,t),t.currentTarget=null}function Xm(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],i=n.event;n=n.listeners;e:{var s=void 0;if(e)for(var a=n.length-1;0<=a;a--){var o=n[a],c=o.instance,u=o.currentTarget;if(o=o.listener,c!==s&&i.isPropagationStopped())break e;ah(i,o,u),s=c}else for(a=0;a<n.length;a++){if(o=n[a],c=o.instance,u=o.currentTarget,o=o.listener,c!==s&&i.isPropagationStopped())break e;ah(i,o,u),s=c}}}if(Ba)throw t=uc,Ba=!1,uc=null,t}function ve(t,e){var r=e[xc];r===void 0&&(r=e[xc]=new Set);var n=t+"__bubble";r.has(n)||(ep(e,t,2,!1),r.add(n))}function Nl(t,e,r){var n=0;e&&(n|=4),ep(r,t,n,e)}var ta="_reactListening"+Math.random().toString(36).slice(2);function ws(t){if(!t[ta]){t[ta]=!0,om.forEach(function(r){r!=="selectionchange"&&(Y0.has(r)||Nl(r,!1,t),Nl(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[ta]||(e[ta]=!0,Nl("selectionchange",!1,e))}}function ep(t,e,r,n){switch($m(e)){case 1:var i=u0;break;case 4:i=d0;break;default:i=Nu}r=i.bind(null,e,r,t),i=void 0,!cc||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),n?i!==void 0?t.addEventListener(e,r,{capture:!0,passive:i}):t.addEventListener(e,r,!0):i!==void 0?t.addEventListener(e,r,{passive:i}):t.addEventListener(e,r,!1)}function El(t,e,r,n,i){var s=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var a=n.tag;if(a===3||a===4){var o=n.stateNode.containerInfo;if(o===i||o.nodeType===8&&o.parentNode===i)break;if(a===4)for(a=n.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;a=a.return}for(;o!==null;){if(a=pn(o),a===null)return;if(c=a.tag,c===5||c===6){n=s=a;continue e}o=o.parentNode}}n=n.return}km(function(){var u=s,d=bu(r),f=[];e:{var m=Qm.get(t);if(m!==void 0){var g=Cu,y=t;switch(t){case"keypress":if(ja(r)===0)break e;case"keydown":case"keyup":g=N0;break;case"focusin":y="focus",g=xl;break;case"focusout":y="blur",g=xl;break;case"beforeblur":case"afterblur":g=xl;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=Kd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=m0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=T0;break;case Km:case Jm:case Ym:g=v0;break;case Zm:g=O0;break;case"scroll":g=h0;break;case"wheel":g=P0;break;case"copy":case"cut":case"paste":g=w0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=Yd}var w=(e&4)!==0,b=!w&&t==="scroll",v=w?m!==null?m+"Capture":null:m;w=[];for(var h=u,p;h!==null;){p=h;var _=p.stateNode;if(p.tag===5&&_!==null&&(p=_,v!==null&&(_=fs(h,v),_!=null&&w.push(xs(h,_,p)))),b)break;h=h.return}0<w.length&&(m=new g(m,y,null,r,d),f.push({event:m,listeners:w}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",g=t==="mouseout"||t==="pointerout",m&&r!==oc&&(y=r.relatedTarget||r.fromElement)&&(pn(y)||y[vr]))break e;if((g||m)&&(m=d.window===d?d:(m=d.ownerDocument)?m.defaultView||m.parentWindow:window,g?(y=r.relatedTarget||r.toElement,g=u,y=y?pn(y):null,y!==null&&(b=On(y),y!==b||y.tag!==5&&y.tag!==6)&&(y=null)):(g=null,y=u),g!==y)){if(w=Kd,_="onMouseLeave",v="onMouseEnter",h="mouse",(t==="pointerout"||t==="pointerover")&&(w=Yd,_="onPointerLeave",v="onPointerEnter",h="pointer"),b=g==null?m:Yn(g),p=y==null?m:Yn(y),m=new w(_,h+"leave",g,r,d),m.target=b,m.relatedTarget=p,_=null,pn(d)===u&&(w=new w(v,h+"enter",y,r,d),w.target=p,w.relatedTarget=b,_=w),b=_,g&&y)t:{for(w=g,v=y,h=0,p=w;p;p=In(p))h++;for(p=0,_=v;_;_=In(_))p++;for(;0<h-p;)w=In(w),h--;for(;0<p-h;)v=In(v),p--;for(;h--;){if(w===v||v!==null&&w===v.alternate)break t;w=In(w),v=In(v)}w=null}else w=null;g!==null&&oh(f,m,g,w,!1),y!==null&&b!==null&&oh(f,b,y,w,!0)}}e:{if(m=u?Yn(u):window,g=m.nodeName&&m.nodeName.toLowerCase(),g==="select"||g==="input"&&m.type==="file")var S=F0;else if(Xd(m))if(zm)S=H0;else{S=V0;var N=B0}else(g=m.nodeName)&&g.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(S=z0);if(S&&(S=S(t,u))){Vm(f,S,r,d);break e}N&&N(t,m,u),t==="focusout"&&(N=m._wrapperState)&&N.controlled&&m.type==="number"&&rc(m,"number",m.value)}switch(N=u?Yn(u):window,t){case"focusin":(Xd(N)||N.contentEditable==="true")&&(Kn=N,mc=u,is=null);break;case"focusout":is=mc=Kn=null;break;case"mousedown":pc=!0;break;case"contextmenu":case"mouseup":case"dragend":pc=!1,ih(f,r,d);break;case"selectionchange":if(G0)break;case"keydown":case"keyup":ih(f,r,d)}var E;if(Au)e:{switch(t){case"compositionstart":var P="onCompositionStart";break e;case"compositionend":P="onCompositionEnd";break e;case"compositionupdate":P="onCompositionUpdate";break e}P=void 0}else Gn?Fm(t,r)&&(P="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(P="onCompositionStart");P&&(Um&&r.locale!=="ko"&&(Gn||P!=="onCompositionStart"?P==="onCompositionEnd"&&Gn&&(E=Mm()):(Lr=d,Eu="value"in Lr?Lr.value:Lr.textContent,Gn=!0)),N=qa(u,P),0<N.length&&(P=new Jd(P,t,null,r,d),f.push({event:P,listeners:N}),E?P.data=E:(E=Bm(r),E!==null&&(P.data=E)))),(E=D0?L0(t,r):$0(t,r))&&(u=qa(u,"onBeforeInput"),0<u.length&&(d=new Jd("onBeforeInput","beforeinput",null,r,d),f.push({event:d,listeners:u}),d.data=E))}Xm(f,e)})}function xs(t,e,r){return{instance:t,listener:e,currentTarget:r}}function qa(t,e){for(var r=e+"Capture",n=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=fs(t,r),s!=null&&n.unshift(xs(t,s,i)),s=fs(t,e),s!=null&&n.push(xs(t,s,i))),t=t.return}return n}function In(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function oh(t,e,r,n,i){for(var s=e._reactName,a=[];r!==null&&r!==n;){var o=r,c=o.alternate,u=o.stateNode;if(c!==null&&c===n)break;o.tag===5&&u!==null&&(o=u,i?(c=fs(r,s),c!=null&&a.unshift(xs(r,c,o))):i||(c=fs(r,s),c!=null&&a.push(xs(r,c,o)))),r=r.return}a.length!==0&&t.push({event:e,listeners:a})}var Z0=/\r\n?/g,Q0=/\u0000|\uFFFD/g;function lh(t){return(typeof t=="string"?t:""+t).replace(Z0,`
`).replace(Q0,"")}function ra(t,e,r){if(e=lh(e),lh(t)!==e&&r)throw Error(C(425))}function Ga(){}var gc=null,vc=null;function yc(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var wc=typeof setTimeout=="function"?setTimeout:void 0,X0=typeof clearTimeout=="function"?clearTimeout:void 0,ch=typeof Promise=="function"?Promise:void 0,ew=typeof queueMicrotask=="function"?queueMicrotask:typeof ch<"u"?function(t){return ch.resolve(null).then(t).catch(tw)}:wc;function tw(t){setTimeout(function(){throw t})}function Cl(t,e){var r=e,n=0;do{var i=r.nextSibling;if(t.removeChild(r),i&&i.nodeType===8)if(r=i.data,r==="/$"){if(n===0){t.removeChild(i),gs(e);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=i}while(r);gs(e)}function Vr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function uh(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var Ti=Math.random().toString(36).slice(2),Qt="__reactFiber$"+Ti,_s="__reactProps$"+Ti,vr="__reactContainer$"+Ti,xc="__reactEvents$"+Ti,rw="__reactListeners$"+Ti,nw="__reactHandles$"+Ti;function pn(t){var e=t[Qt];if(e)return e;for(var r=t.parentNode;r;){if(e=r[vr]||r[Qt]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=uh(t);t!==null;){if(r=t[Qt])return r;t=uh(t)}return e}t=r,r=t.parentNode}return null}function Ms(t){return t=t[Qt]||t[vr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Yn(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(C(33))}function Uo(t){return t[_s]||null}var _c=[],Zn=-1;function Xr(t){return{current:t}}function ye(t){0>Zn||(t.current=_c[Zn],_c[Zn]=null,Zn--)}function ge(t,e){Zn++,_c[Zn]=t.current,t.current=e}var Jr={},Ze=Xr(Jr),dt=Xr(!1),kn=Jr;function hi(t,e){var r=t.type.contextTypes;if(!r)return Jr;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in r)i[s]=e[s];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function ht(t){return t=t.childContextTypes,t!=null}function Ka(){ye(dt),ye(Ze)}function dh(t,e,r){if(Ze.current!==Jr)throw Error(C(168));ge(Ze,e),ge(dt,r)}function tp(t,e,r){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var i in n)if(!(i in e))throw Error(C(108,By(t)||"Unknown",i));return Se({},r,n)}function Ja(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Jr,kn=Ze.current,ge(Ze,t),ge(dt,dt.current),!0}function hh(t,e,r){var n=t.stateNode;if(!n)throw Error(C(169));r?(t=tp(t,e,kn),n.__reactInternalMemoizedMergedChildContext=t,ye(dt),ye(Ze),ge(Ze,t)):ye(dt),ge(dt,r)}var ur=null,Fo=!1,Tl=!1;function rp(t){ur===null?ur=[t]:ur.push(t)}function iw(t){Fo=!0,rp(t)}function en(){if(!Tl&&ur!==null){Tl=!0;var t=0,e=he;try{var r=ur;for(he=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}ur=null,Fo=!1}catch(i){throw ur!==null&&(ur=ur.slice(t+1)),Em(ku,en),i}finally{he=e,Tl=!1}}return null}var Qn=[],Xn=0,Ya=null,Za=0,St=[],jt=0,Sn=null,dr=1,hr="";function on(t,e){Qn[Xn++]=Za,Qn[Xn++]=Ya,Ya=t,Za=e}function np(t,e,r){St[jt++]=dr,St[jt++]=hr,St[jt++]=Sn,Sn=t;var n=dr;t=hr;var i=32-zt(n)-1;n&=~(1<<i),r+=1;var s=32-zt(e)+i;if(30<s){var a=i-i%5;s=(n&(1<<a)-1).toString(32),n>>=a,i-=a,dr=1<<32-zt(e)+i|r<<i|n,hr=s+t}else dr=1<<s|r<<i|n,hr=t}function Ru(t){t.return!==null&&(on(t,1),np(t,1,0))}function Pu(t){for(;t===Ya;)Ya=Qn[--Xn],Qn[Xn]=null,Za=Qn[--Xn],Qn[Xn]=null;for(;t===Sn;)Sn=St[--jt],St[jt]=null,hr=St[--jt],St[jt]=null,dr=St[--jt],St[jt]=null}var yt=null,vt=null,_e=!1,Ft=null;function ip(t,e){var r=Et(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function fh(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,yt=t,vt=Vr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,yt=t,vt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=Sn!==null?{id:dr,overflow:hr}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=Et(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,yt=t,vt=null,!0):!1;default:return!1}}function bc(t){return(t.mode&1)!==0&&(t.flags&128)===0}function kc(t){if(_e){var e=vt;if(e){var r=e;if(!fh(t,e)){if(bc(t))throw Error(C(418));e=Vr(r.nextSibling);var n=yt;e&&fh(t,e)?ip(n,r):(t.flags=t.flags&-4097|2,_e=!1,yt=t)}}else{if(bc(t))throw Error(C(418));t.flags=t.flags&-4097|2,_e=!1,yt=t}}}function mh(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;yt=t}function na(t){if(t!==yt)return!1;if(!_e)return mh(t),_e=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!yc(t.type,t.memoizedProps)),e&&(e=vt)){if(bc(t))throw sp(),Error(C(418));for(;e;)ip(t,e),e=Vr(e.nextSibling)}if(mh(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(C(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){vt=Vr(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}vt=null}}else vt=yt?Vr(t.stateNode.nextSibling):null;return!0}function sp(){for(var t=vt;t;)t=Vr(t.nextSibling)}function fi(){vt=yt=null,_e=!1}function Iu(t){Ft===null?Ft=[t]:Ft.push(t)}var sw=_r.ReactCurrentBatchConfig;function Ui(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(C(309));var n=r.stateNode}if(!n)throw Error(C(147,t));var i=n,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(a){var o=i.refs;a===null?delete o[s]:o[s]=a},e._stringRef=s,e)}if(typeof t!="string")throw Error(C(284));if(!r._owner)throw Error(C(290,t))}return t}function ia(t,e){throw t=Object.prototype.toString.call(e),Error(C(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function ph(t){var e=t._init;return e(t._payload)}function ap(t){function e(v,h){if(t){var p=v.deletions;p===null?(v.deletions=[h],v.flags|=16):p.push(h)}}function r(v,h){if(!t)return null;for(;h!==null;)e(v,h),h=h.sibling;return null}function n(v,h){for(v=new Map;h!==null;)h.key!==null?v.set(h.key,h):v.set(h.index,h),h=h.sibling;return v}function i(v,h){return v=qr(v,h),v.index=0,v.sibling=null,v}function s(v,h,p){return v.index=p,t?(p=v.alternate,p!==null?(p=p.index,p<h?(v.flags|=2,h):p):(v.flags|=2,h)):(v.flags|=1048576,h)}function a(v){return t&&v.alternate===null&&(v.flags|=2),v}function o(v,h,p,_){return h===null||h.tag!==6?(h=Ll(p,v.mode,_),h.return=v,h):(h=i(h,p),h.return=v,h)}function c(v,h,p,_){var S=p.type;return S===qn?d(v,h,p.props.children,_,p.key):h!==null&&(h.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Cr&&ph(S)===h.type)?(_=i(h,p.props),_.ref=Ui(v,h,p),_.return=v,_):(_=Ra(p.type,p.key,p.props,null,v.mode,_),_.ref=Ui(v,h,p),_.return=v,_)}function u(v,h,p,_){return h===null||h.tag!==4||h.stateNode.containerInfo!==p.containerInfo||h.stateNode.implementation!==p.implementation?(h=$l(p,v.mode,_),h.return=v,h):(h=i(h,p.children||[]),h.return=v,h)}function d(v,h,p,_,S){return h===null||h.tag!==7?(h=_n(p,v.mode,_,S),h.return=v,h):(h=i(h,p),h.return=v,h)}function f(v,h,p){if(typeof h=="string"&&h!==""||typeof h=="number")return h=Ll(""+h,v.mode,p),h.return=v,h;if(typeof h=="object"&&h!==null){switch(h.$$typeof){case Gs:return p=Ra(h.type,h.key,h.props,null,v.mode,p),p.ref=Ui(v,null,h),p.return=v,p;case Wn:return h=$l(h,v.mode,p),h.return=v,h;case Cr:var _=h._init;return f(v,_(h._payload),p)}if(Ki(h)||Ii(h))return h=_n(h,v.mode,p,null),h.return=v,h;ia(v,h)}return null}function m(v,h,p,_){var S=h!==null?h.key:null;if(typeof p=="string"&&p!==""||typeof p=="number")return S!==null?null:o(v,h,""+p,_);if(typeof p=="object"&&p!==null){switch(p.$$typeof){case Gs:return p.key===S?c(v,h,p,_):null;case Wn:return p.key===S?u(v,h,p,_):null;case Cr:return S=p._init,m(v,h,S(p._payload),_)}if(Ki(p)||Ii(p))return S!==null?null:d(v,h,p,_,null);ia(v,p)}return null}function g(v,h,p,_,S){if(typeof _=="string"&&_!==""||typeof _=="number")return v=v.get(p)||null,o(h,v,""+_,S);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Gs:return v=v.get(_.key===null?p:_.key)||null,c(h,v,_,S);case Wn:return v=v.get(_.key===null?p:_.key)||null,u(h,v,_,S);case Cr:var N=_._init;return g(v,h,p,N(_._payload),S)}if(Ki(_)||Ii(_))return v=v.get(p)||null,d(h,v,_,S,null);ia(h,_)}return null}function y(v,h,p,_){for(var S=null,N=null,E=h,P=h=0,G=null;E!==null&&P<p.length;P++){E.index>P?(G=E,E=null):G=E.sibling;var K=m(v,E,p[P],_);if(K===null){E===null&&(E=G);break}t&&E&&K.alternate===null&&e(v,E),h=s(K,h,P),N===null?S=K:N.sibling=K,N=K,E=G}if(P===p.length)return r(v,E),_e&&on(v,P),S;if(E===null){for(;P<p.length;P++)E=f(v,p[P],_),E!==null&&(h=s(E,h,P),N===null?S=E:N.sibling=E,N=E);return _e&&on(v,P),S}for(E=n(v,E);P<p.length;P++)G=g(E,v,P,p[P],_),G!==null&&(t&&G.alternate!==null&&E.delete(G.key===null?P:G.key),h=s(G,h,P),N===null?S=G:N.sibling=G,N=G);return t&&E.forEach(function(ne){return e(v,ne)}),_e&&on(v,P),S}function w(v,h,p,_){var S=Ii(p);if(typeof S!="function")throw Error(C(150));if(p=S.call(p),p==null)throw Error(C(151));for(var N=S=null,E=h,P=h=0,G=null,K=p.next();E!==null&&!K.done;P++,K=p.next()){E.index>P?(G=E,E=null):G=E.sibling;var ne=m(v,E,K.value,_);if(ne===null){E===null&&(E=G);break}t&&E&&ne.alternate===null&&e(v,E),h=s(ne,h,P),N===null?S=ne:N.sibling=ne,N=ne,E=G}if(K.done)return r(v,E),_e&&on(v,P),S;if(E===null){for(;!K.done;P++,K=p.next())K=f(v,K.value,_),K!==null&&(h=s(K,h,P),N===null?S=K:N.sibling=K,N=K);return _e&&on(v,P),S}for(E=n(v,E);!K.done;P++,K=p.next())K=g(E,v,P,K.value,_),K!==null&&(t&&K.alternate!==null&&E.delete(K.key===null?P:K.key),h=s(K,h,P),N===null?S=K:N.sibling=K,N=K);return t&&E.forEach(function(q){return e(v,q)}),_e&&on(v,P),S}function b(v,h,p,_){if(typeof p=="object"&&p!==null&&p.type===qn&&p.key===null&&(p=p.props.children),typeof p=="object"&&p!==null){switch(p.$$typeof){case Gs:e:{for(var S=p.key,N=h;N!==null;){if(N.key===S){if(S=p.type,S===qn){if(N.tag===7){r(v,N.sibling),h=i(N,p.props.children),h.return=v,v=h;break e}}else if(N.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Cr&&ph(S)===N.type){r(v,N.sibling),h=i(N,p.props),h.ref=Ui(v,N,p),h.return=v,v=h;break e}r(v,N);break}else e(v,N);N=N.sibling}p.type===qn?(h=_n(p.props.children,v.mode,_,p.key),h.return=v,v=h):(_=Ra(p.type,p.key,p.props,null,v.mode,_),_.ref=Ui(v,h,p),_.return=v,v=_)}return a(v);case Wn:e:{for(N=p.key;h!==null;){if(h.key===N)if(h.tag===4&&h.stateNode.containerInfo===p.containerInfo&&h.stateNode.implementation===p.implementation){r(v,h.sibling),h=i(h,p.children||[]),h.return=v,v=h;break e}else{r(v,h);break}else e(v,h);h=h.sibling}h=$l(p,v.mode,_),h.return=v,v=h}return a(v);case Cr:return N=p._init,b(v,h,N(p._payload),_)}if(Ki(p))return y(v,h,p,_);if(Ii(p))return w(v,h,p,_);ia(v,p)}return typeof p=="string"&&p!==""||typeof p=="number"?(p=""+p,h!==null&&h.tag===6?(r(v,h.sibling),h=i(h,p),h.return=v,v=h):(r(v,h),h=Ll(p,v.mode,_),h.return=v,v=h),a(v)):r(v,h)}return b}var mi=ap(!0),op=ap(!1),Qa=Xr(null),Xa=null,ei=null,Du=null;function Lu(){Du=ei=Xa=null}function $u(t){var e=Qa.current;ye(Qa),t._currentValue=e}function Sc(t,e,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function oi(t,e){Xa=t,Du=ei=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(ut=!0),t.firstContext=null)}function At(t){var e=t._currentValue;if(Du!==t)if(t={context:t,memoizedValue:e,next:null},ei===null){if(Xa===null)throw Error(C(308));ei=t,Xa.dependencies={lanes:0,firstContext:t}}else ei=ei.next=t;return e}var gn=null;function Mu(t){gn===null?gn=[t]:gn.push(t)}function lp(t,e,r,n){var i=e.interleaved;return i===null?(r.next=r,Mu(e)):(r.next=i.next,i.next=r),e.interleaved=r,yr(t,n)}function yr(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var Tr=!1;function Uu(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function cp(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function fr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function zr(t,e,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,ae&2){var i=n.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),n.pending=e,yr(t,r)}return i=n.interleaved,i===null?(e.next=e,Mu(n)):(e.next=i.next,i.next=e),n.interleaved=e,yr(t,r)}function Na(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,Su(t,r)}}function gh(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var i=null,s=null;if(r=r.firstBaseUpdate,r!==null){do{var a={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};s===null?i=s=a:s=s.next=a,r=r.next}while(r!==null);s===null?i=s=e:s=s.next=e}else i=s=e;r={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function eo(t,e,r,n){var i=t.updateQueue;Tr=!1;var s=i.firstBaseUpdate,a=i.lastBaseUpdate,o=i.shared.pending;if(o!==null){i.shared.pending=null;var c=o,u=c.next;c.next=null,a===null?s=u:a.next=u,a=c;var d=t.alternate;d!==null&&(d=d.updateQueue,o=d.lastBaseUpdate,o!==a&&(o===null?d.firstBaseUpdate=u:o.next=u,d.lastBaseUpdate=c))}if(s!==null){var f=i.baseState;a=0,d=u=c=null,o=s;do{var m=o.lane,g=o.eventTime;if((n&m)===m){d!==null&&(d=d.next={eventTime:g,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var y=t,w=o;switch(m=e,g=r,w.tag){case 1:if(y=w.payload,typeof y=="function"){f=y.call(g,f,m);break e}f=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=w.payload,m=typeof y=="function"?y.call(g,f,m):y,m==null)break e;f=Se({},f,m);break e;case 2:Tr=!0}}o.callback!==null&&o.lane!==0&&(t.flags|=64,m=i.effects,m===null?i.effects=[o]:m.push(o))}else g={eventTime:g,lane:m,tag:o.tag,payload:o.payload,callback:o.callback,next:null},d===null?(u=d=g,c=f):d=d.next=g,a|=m;if(o=o.next,o===null){if(o=i.shared.pending,o===null)break;m=o,o=m.next,m.next=null,i.lastBaseUpdate=m,i.shared.pending=null}}while(!0);if(d===null&&(c=f),i.baseState=c,i.firstBaseUpdate=u,i.lastBaseUpdate=d,e=i.shared.interleaved,e!==null){i=e;do a|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Nn|=a,t.lanes=a,t.memoizedState=f}}function vh(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],i=n.callback;if(i!==null){if(n.callback=null,n=r,typeof i!="function")throw Error(C(191,i));i.call(n)}}}var Us={},tr=Xr(Us),bs=Xr(Us),ks=Xr(Us);function vn(t){if(t===Us)throw Error(C(174));return t}function Fu(t,e){switch(ge(ks,e),ge(bs,t),ge(tr,Us),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:ic(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=ic(e,t)}ye(tr),ge(tr,e)}function pi(){ye(tr),ye(bs),ye(ks)}function up(t){vn(ks.current);var e=vn(tr.current),r=ic(e,t.type);e!==r&&(ge(bs,t),ge(tr,r))}function Bu(t){bs.current===t&&(ye(tr),ye(bs))}var be=Xr(0);function to(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Al=[];function Vu(){for(var t=0;t<Al.length;t++)Al[t]._workInProgressVersionPrimary=null;Al.length=0}var Ea=_r.ReactCurrentDispatcher,Ol=_r.ReactCurrentBatchConfig,jn=0,ke=null,Le=null,Ue=null,ro=!1,ss=!1,Ss=0,aw=0;function Ge(){throw Error(C(321))}function zu(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!Wt(t[r],e[r]))return!1;return!0}function Hu(t,e,r,n,i,s){if(jn=s,ke=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Ea.current=t===null||t.memoizedState===null?uw:dw,t=r(n,i),ss){s=0;do{if(ss=!1,Ss=0,25<=s)throw Error(C(301));s+=1,Ue=Le=null,e.updateQueue=null,Ea.current=hw,t=r(n,i)}while(ss)}if(Ea.current=no,e=Le!==null&&Le.next!==null,jn=0,Ue=Le=ke=null,ro=!1,e)throw Error(C(300));return t}function Wu(){var t=Ss!==0;return Ss=0,t}function Jt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ue===null?ke.memoizedState=Ue=t:Ue=Ue.next=t,Ue}function Ot(){if(Le===null){var t=ke.alternate;t=t!==null?t.memoizedState:null}else t=Le.next;var e=Ue===null?ke.memoizedState:Ue.next;if(e!==null)Ue=e,Le=t;else{if(t===null)throw Error(C(310));Le=t,t={memoizedState:Le.memoizedState,baseState:Le.baseState,baseQueue:Le.baseQueue,queue:Le.queue,next:null},Ue===null?ke.memoizedState=Ue=t:Ue=Ue.next=t}return Ue}function js(t,e){return typeof e=="function"?e(t):e}function Rl(t){var e=Ot(),r=e.queue;if(r===null)throw Error(C(311));r.lastRenderedReducer=t;var n=Le,i=n.baseQueue,s=r.pending;if(s!==null){if(i!==null){var a=i.next;i.next=s.next,s.next=a}n.baseQueue=i=s,r.pending=null}if(i!==null){s=i.next,n=n.baseState;var o=a=null,c=null,u=s;do{var d=u.lane;if((jn&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:t(n,u.action);else{var f={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(o=c=f,a=n):c=c.next=f,ke.lanes|=d,Nn|=d}u=u.next}while(u!==null&&u!==s);c===null?a=n:c.next=o,Wt(n,e.memoizedState)||(ut=!0),e.memoizedState=n,e.baseState=a,e.baseQueue=c,r.lastRenderedState=n}if(t=r.interleaved,t!==null){i=t;do s=i.lane,ke.lanes|=s,Nn|=s,i=i.next;while(i!==t)}else i===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function Pl(t){var e=Ot(),r=e.queue;if(r===null)throw Error(C(311));r.lastRenderedReducer=t;var n=r.dispatch,i=r.pending,s=e.memoizedState;if(i!==null){r.pending=null;var a=i=i.next;do s=t(s,a.action),a=a.next;while(a!==i);Wt(s,e.memoizedState)||(ut=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),r.lastRenderedState=s}return[s,n]}function dp(){}function hp(t,e){var r=ke,n=Ot(),i=e(),s=!Wt(n.memoizedState,i);if(s&&(n.memoizedState=i,ut=!0),n=n.queue,qu(pp.bind(null,r,n,t),[t]),n.getSnapshot!==e||s||Ue!==null&&Ue.memoizedState.tag&1){if(r.flags|=2048,Ns(9,mp.bind(null,r,n,i,e),void 0,null),Fe===null)throw Error(C(349));jn&30||fp(r,e,i)}return i}function fp(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=ke.updateQueue,e===null?(e={lastEffect:null,stores:null},ke.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function mp(t,e,r,n){e.value=r,e.getSnapshot=n,gp(e)&&vp(t)}function pp(t,e,r){return r(function(){gp(e)&&vp(t)})}function gp(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!Wt(t,r)}catch{return!0}}function vp(t){var e=yr(t,1);e!==null&&Ht(e,t,1,-1)}function yh(t){var e=Jt();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:js,lastRenderedState:t},e.queue=t,t=t.dispatch=cw.bind(null,ke,t),[e.memoizedState,t]}function Ns(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=ke.updateQueue,e===null?(e={lastEffect:null,stores:null},ke.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function yp(){return Ot().memoizedState}function Ca(t,e,r,n){var i=Jt();ke.flags|=t,i.memoizedState=Ns(1|e,r,void 0,n===void 0?null:n)}function Bo(t,e,r,n){var i=Ot();n=n===void 0?null:n;var s=void 0;if(Le!==null){var a=Le.memoizedState;if(s=a.destroy,n!==null&&zu(n,a.deps)){i.memoizedState=Ns(e,r,s,n);return}}ke.flags|=t,i.memoizedState=Ns(1|e,r,s,n)}function wh(t,e){return Ca(8390656,8,t,e)}function qu(t,e){return Bo(2048,8,t,e)}function wp(t,e){return Bo(4,2,t,e)}function xp(t,e){return Bo(4,4,t,e)}function _p(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function bp(t,e,r){return r=r!=null?r.concat([t]):null,Bo(4,4,_p.bind(null,e,t),r)}function Gu(){}function kp(t,e){var r=Ot();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&zu(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function Sp(t,e){var r=Ot();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&zu(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function jp(t,e,r){return jn&21?(Wt(r,e)||(r=Am(),ke.lanes|=r,Nn|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,ut=!0),t.memoizedState=r)}function ow(t,e){var r=he;he=r!==0&&4>r?r:4,t(!0);var n=Ol.transition;Ol.transition={};try{t(!1),e()}finally{he=r,Ol.transition=n}}function Np(){return Ot().memoizedState}function lw(t,e,r){var n=Wr(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},Ep(t))Cp(e,r);else if(r=lp(t,e,r,n),r!==null){var i=rt();Ht(r,t,n,i),Tp(r,e,n)}}function cw(t,e,r){var n=Wr(t),i={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(Ep(t))Cp(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var a=e.lastRenderedState,o=s(a,r);if(i.hasEagerState=!0,i.eagerState=o,Wt(o,a)){var c=e.interleaved;c===null?(i.next=i,Mu(e)):(i.next=c.next,c.next=i),e.interleaved=i;return}}catch{}finally{}r=lp(t,e,i,n),r!==null&&(i=rt(),Ht(r,t,n,i),Tp(r,e,n))}}function Ep(t){var e=t.alternate;return t===ke||e!==null&&e===ke}function Cp(t,e){ss=ro=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function Tp(t,e,r){if(r&4194240){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,Su(t,r)}}var no={readContext:At,useCallback:Ge,useContext:Ge,useEffect:Ge,useImperativeHandle:Ge,useInsertionEffect:Ge,useLayoutEffect:Ge,useMemo:Ge,useReducer:Ge,useRef:Ge,useState:Ge,useDebugValue:Ge,useDeferredValue:Ge,useTransition:Ge,useMutableSource:Ge,useSyncExternalStore:Ge,useId:Ge,unstable_isNewReconciler:!1},uw={readContext:At,useCallback:function(t,e){return Jt().memoizedState=[t,e===void 0?null:e],t},useContext:At,useEffect:wh,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,Ca(4194308,4,_p.bind(null,e,t),r)},useLayoutEffect:function(t,e){return Ca(4194308,4,t,e)},useInsertionEffect:function(t,e){return Ca(4,2,t,e)},useMemo:function(t,e){var r=Jt();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=Jt();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=lw.bind(null,ke,t),[n.memoizedState,t]},useRef:function(t){var e=Jt();return t={current:t},e.memoizedState=t},useState:yh,useDebugValue:Gu,useDeferredValue:function(t){return Jt().memoizedState=t},useTransition:function(){var t=yh(!1),e=t[0];return t=ow.bind(null,t[1]),Jt().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var n=ke,i=Jt();if(_e){if(r===void 0)throw Error(C(407));r=r()}else{if(r=e(),Fe===null)throw Error(C(349));jn&30||fp(n,e,r)}i.memoizedState=r;var s={value:r,getSnapshot:e};return i.queue=s,wh(pp.bind(null,n,s,t),[t]),n.flags|=2048,Ns(9,mp.bind(null,n,s,r,e),void 0,null),r},useId:function(){var t=Jt(),e=Fe.identifierPrefix;if(_e){var r=hr,n=dr;r=(n&~(1<<32-zt(n)-1)).toString(32)+r,e=":"+e+"R"+r,r=Ss++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=aw++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},dw={readContext:At,useCallback:kp,useContext:At,useEffect:qu,useImperativeHandle:bp,useInsertionEffect:wp,useLayoutEffect:xp,useMemo:Sp,useReducer:Rl,useRef:yp,useState:function(){return Rl(js)},useDebugValue:Gu,useDeferredValue:function(t){var e=Ot();return jp(e,Le.memoizedState,t)},useTransition:function(){var t=Rl(js)[0],e=Ot().memoizedState;return[t,e]},useMutableSource:dp,useSyncExternalStore:hp,useId:Np,unstable_isNewReconciler:!1},hw={readContext:At,useCallback:kp,useContext:At,useEffect:qu,useImperativeHandle:bp,useInsertionEffect:wp,useLayoutEffect:xp,useMemo:Sp,useReducer:Pl,useRef:yp,useState:function(){return Pl(js)},useDebugValue:Gu,useDeferredValue:function(t){var e=Ot();return Le===null?e.memoizedState=t:jp(e,Le.memoizedState,t)},useTransition:function(){var t=Pl(js)[0],e=Ot().memoizedState;return[t,e]},useMutableSource:dp,useSyncExternalStore:hp,useId:Np,unstable_isNewReconciler:!1};function Dt(t,e){if(t&&t.defaultProps){e=Se({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}function jc(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:Se({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var Vo={isMounted:function(t){return(t=t._reactInternals)?On(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=rt(),i=Wr(t),s=fr(n,i);s.payload=e,r!=null&&(s.callback=r),e=zr(t,s,i),e!==null&&(Ht(e,t,i,n),Na(e,t,i))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=rt(),i=Wr(t),s=fr(n,i);s.tag=1,s.payload=e,r!=null&&(s.callback=r),e=zr(t,s,i),e!==null&&(Ht(e,t,i,n),Na(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=rt(),n=Wr(t),i=fr(r,n);i.tag=2,e!=null&&(i.callback=e),e=zr(t,i,n),e!==null&&(Ht(e,t,n,r),Na(e,t,n))}};function xh(t,e,r,n,i,s,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,s,a):e.prototype&&e.prototype.isPureReactComponent?!ys(r,n)||!ys(i,s):!0}function Ap(t,e,r){var n=!1,i=Jr,s=e.contextType;return typeof s=="object"&&s!==null?s=At(s):(i=ht(e)?kn:Ze.current,n=e.contextTypes,s=(n=n!=null)?hi(t,i):Jr),e=new e(r,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Vo,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function _h(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&Vo.enqueueReplaceState(e,e.state,null)}function Nc(t,e,r,n){var i=t.stateNode;i.props=r,i.state=t.memoizedState,i.refs={},Uu(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=At(s):(s=ht(e)?kn:Ze.current,i.context=hi(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(jc(t,e,s,r),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Vo.enqueueReplaceState(i,i.state,null),eo(t,r,i,n),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function gi(t,e){try{var r="",n=e;do r+=Fy(n),n=n.return;while(n);var i=r}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Il(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function Ec(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var fw=typeof WeakMap=="function"?WeakMap:Map;function Op(t,e,r){r=fr(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){so||(so=!0,$c=n),Ec(t,e)},r}function Rp(t,e,r){r=fr(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var i=e.value;r.payload=function(){return n(i)},r.callback=function(){Ec(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(r.callback=function(){Ec(t,e),typeof n!="function"&&(Hr===null?Hr=new Set([this]):Hr.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),r}function bh(t,e,r){var n=t.pingCache;if(n===null){n=t.pingCache=new fw;var i=new Set;n.set(e,i)}else i=n.get(e),i===void 0&&(i=new Set,n.set(e,i));i.has(r)||(i.add(r),t=Ew.bind(null,t,e,r),e.then(t,t))}function kh(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Sh(t,e,r,n,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=fr(-1,1),e.tag=2,zr(r,e,1))),r.lanes|=1),t)}var mw=_r.ReactCurrentOwner,ut=!1;function et(t,e,r,n){e.child=t===null?op(e,null,r,n):mi(e,t.child,r,n)}function jh(t,e,r,n,i){r=r.render;var s=e.ref;return oi(e,i),n=Hu(t,e,r,n,s,i),r=Wu(),t!==null&&!ut?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,wr(t,e,i)):(_e&&r&&Ru(e),e.flags|=1,et(t,e,n,i),e.child)}function Nh(t,e,r,n,i){if(t===null){var s=r.type;return typeof s=="function"&&!td(s)&&s.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=s,Pp(t,e,s,n,i)):(t=Ra(r.type,null,n,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var a=s.memoizedProps;if(r=r.compare,r=r!==null?r:ys,r(a,n)&&t.ref===e.ref)return wr(t,e,i)}return e.flags|=1,t=qr(s,n),t.ref=e.ref,t.return=e,e.child=t}function Pp(t,e,r,n,i){if(t!==null){var s=t.memoizedProps;if(ys(s,n)&&t.ref===e.ref)if(ut=!1,e.pendingProps=n=s,(t.lanes&i)!==0)t.flags&131072&&(ut=!0);else return e.lanes=t.lanes,wr(t,e,i)}return Cc(t,e,r,n,i)}function Ip(t,e,r){var n=e.pendingProps,i=n.children,s=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ge(ri,mt),mt|=r;else{if(!(r&1073741824))return t=s!==null?s.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ge(ri,mt),mt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=s!==null?s.baseLanes:r,ge(ri,mt),mt|=n}else s!==null?(n=s.baseLanes|r,e.memoizedState=null):n=r,ge(ri,mt),mt|=n;return et(t,e,i,r),e.child}function Dp(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function Cc(t,e,r,n,i){var s=ht(r)?kn:Ze.current;return s=hi(e,s),oi(e,i),r=Hu(t,e,r,n,s,i),n=Wu(),t!==null&&!ut?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,wr(t,e,i)):(_e&&n&&Ru(e),e.flags|=1,et(t,e,r,i),e.child)}function Eh(t,e,r,n,i){if(ht(r)){var s=!0;Ja(e)}else s=!1;if(oi(e,i),e.stateNode===null)Ta(t,e),Ap(e,r,n),Nc(e,r,n,i),n=!0;else if(t===null){var a=e.stateNode,o=e.memoizedProps;a.props=o;var c=a.context,u=r.contextType;typeof u=="object"&&u!==null?u=At(u):(u=ht(r)?kn:Ze.current,u=hi(e,u));var d=r.getDerivedStateFromProps,f=typeof d=="function"||typeof a.getSnapshotBeforeUpdate=="function";f||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==n||c!==u)&&_h(e,a,n,u),Tr=!1;var m=e.memoizedState;a.state=m,eo(e,n,a,i),c=e.memoizedState,o!==n||m!==c||dt.current||Tr?(typeof d=="function"&&(jc(e,r,d,n),c=e.memoizedState),(o=Tr||xh(e,r,o,n,m,c,u))?(f||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=c),a.props=n,a.state=c,a.context=u,n=o):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{a=e.stateNode,cp(t,e),o=e.memoizedProps,u=e.type===e.elementType?o:Dt(e.type,o),a.props=u,f=e.pendingProps,m=a.context,c=r.contextType,typeof c=="object"&&c!==null?c=At(c):(c=ht(r)?kn:Ze.current,c=hi(e,c));var g=r.getDerivedStateFromProps;(d=typeof g=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==f||m!==c)&&_h(e,a,n,c),Tr=!1,m=e.memoizedState,a.state=m,eo(e,n,a,i);var y=e.memoizedState;o!==f||m!==y||dt.current||Tr?(typeof g=="function"&&(jc(e,r,g,n),y=e.memoizedState),(u=Tr||xh(e,r,u,n,m,y,c)||!1)?(d||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(n,y,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(n,y,c)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||o===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=y),a.props=n,a.state=y,a.context=c,n=u):(typeof a.componentDidUpdate!="function"||o===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),n=!1)}return Tc(t,e,r,n,s,i)}function Tc(t,e,r,n,i,s){Dp(t,e);var a=(e.flags&128)!==0;if(!n&&!a)return i&&hh(e,r,!1),wr(t,e,s);n=e.stateNode,mw.current=e;var o=a&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&a?(e.child=mi(e,t.child,null,s),e.child=mi(e,null,o,s)):et(t,e,o,s),e.memoizedState=n.state,i&&hh(e,r,!0),e.child}function Lp(t){var e=t.stateNode;e.pendingContext?dh(t,e.pendingContext,e.pendingContext!==e.context):e.context&&dh(t,e.context,!1),Fu(t,e.containerInfo)}function Ch(t,e,r,n,i){return fi(),Iu(i),e.flags|=256,et(t,e,r,n),e.child}var Ac={dehydrated:null,treeContext:null,retryLane:0};function Oc(t){return{baseLanes:t,cachePool:null,transitions:null}}function $p(t,e,r){var n=e.pendingProps,i=be.current,s=!1,a=(e.flags&128)!==0,o;if((o=a)||(o=t!==null&&t.memoizedState===null?!1:(i&2)!==0),o?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),ge(be,i&1),t===null)return kc(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=n.children,t=n.fallback,s?(n=e.mode,s=e.child,a={mode:"hidden",children:a},!(n&1)&&s!==null?(s.childLanes=0,s.pendingProps=a):s=Wo(a,n,0,null),t=_n(t,n,r,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Oc(r),e.memoizedState=Ac,t):Ku(e,a));if(i=t.memoizedState,i!==null&&(o=i.dehydrated,o!==null))return pw(t,e,a,n,o,i,r);if(s){s=n.fallback,a=e.mode,i=t.child,o=i.sibling;var c={mode:"hidden",children:n.children};return!(a&1)&&e.child!==i?(n=e.child,n.childLanes=0,n.pendingProps=c,e.deletions=null):(n=qr(i,c),n.subtreeFlags=i.subtreeFlags&14680064),o!==null?s=qr(o,s):(s=_n(s,a,r,null),s.flags|=2),s.return=e,n.return=e,n.sibling=s,e.child=n,n=s,s=e.child,a=t.child.memoizedState,a=a===null?Oc(r):{baseLanes:a.baseLanes|r,cachePool:null,transitions:a.transitions},s.memoizedState=a,s.childLanes=t.childLanes&~r,e.memoizedState=Ac,n}return s=t.child,t=s.sibling,n=qr(s,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n}function Ku(t,e){return e=Wo({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function sa(t,e,r,n){return n!==null&&Iu(n),mi(e,t.child,null,r),t=Ku(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function pw(t,e,r,n,i,s,a){if(r)return e.flags&256?(e.flags&=-257,n=Il(Error(C(422))),sa(t,e,a,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=n.fallback,i=e.mode,n=Wo({mode:"visible",children:n.children},i,0,null),s=_n(s,i,a,null),s.flags|=2,n.return=e,s.return=e,n.sibling=s,e.child=n,e.mode&1&&mi(e,t.child,null,a),e.child.memoizedState=Oc(a),e.memoizedState=Ac,s);if(!(e.mode&1))return sa(t,e,a,null);if(i.data==="$!"){if(n=i.nextSibling&&i.nextSibling.dataset,n)var o=n.dgst;return n=o,s=Error(C(419)),n=Il(s,n,void 0),sa(t,e,a,n)}if(o=(a&t.childLanes)!==0,ut||o){if(n=Fe,n!==null){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(n.suspendedLanes|a)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,yr(t,i),Ht(n,t,i,-1))}return ed(),n=Il(Error(C(421))),sa(t,e,a,n)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=Cw.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,vt=Vr(i.nextSibling),yt=e,_e=!0,Ft=null,t!==null&&(St[jt++]=dr,St[jt++]=hr,St[jt++]=Sn,dr=t.id,hr=t.overflow,Sn=e),e=Ku(e,n.children),e.flags|=4096,e)}function Th(t,e,r){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),Sc(t.return,e,r)}function Dl(t,e,r,n,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=n,s.tail=r,s.tailMode=i)}function Mp(t,e,r){var n=e.pendingProps,i=n.revealOrder,s=n.tail;if(et(t,e,n.children,r),n=be.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Th(t,r,e);else if(t.tag===19)Th(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(ge(be,n),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(r=e.child,i=null;r!==null;)t=r.alternate,t!==null&&to(t)===null&&(i=r),r=r.sibling;r=i,r===null?(i=e.child,e.child=null):(i=r.sibling,r.sibling=null),Dl(e,!1,i,r,s);break;case"backwards":for(r=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&to(t)===null){e.child=i;break}t=i.sibling,i.sibling=r,r=i,i=t}Dl(e,!0,r,null,s);break;case"together":Dl(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Ta(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function wr(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),Nn|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(C(153));if(e.child!==null){for(t=e.child,r=qr(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=qr(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function gw(t,e,r){switch(e.tag){case 3:Lp(e),fi();break;case 5:up(e);break;case 1:ht(e.type)&&Ja(e);break;case 4:Fu(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,i=e.memoizedProps.value;ge(Qa,n._currentValue),n._currentValue=i;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(ge(be,be.current&1),e.flags|=128,null):r&e.child.childLanes?$p(t,e,r):(ge(be,be.current&1),t=wr(t,e,r),t!==null?t.sibling:null);ge(be,be.current&1);break;case 19:if(n=(r&e.childLanes)!==0,t.flags&128){if(n)return Mp(t,e,r);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),ge(be,be.current),n)break;return null;case 22:case 23:return e.lanes=0,Ip(t,e,r)}return wr(t,e,r)}var Up,Rc,Fp,Bp;Up=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Rc=function(){};Fp=function(t,e,r,n){var i=t.memoizedProps;if(i!==n){t=e.stateNode,vn(tr.current);var s=null;switch(r){case"input":i=ec(t,i),n=ec(t,n),s=[];break;case"select":i=Se({},i,{value:void 0}),n=Se({},n,{value:void 0}),s=[];break;case"textarea":i=nc(t,i),n=nc(t,n),s=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=Ga)}sc(r,n);var a;r=null;for(u in i)if(!n.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var o=i[u];for(a in o)o.hasOwnProperty(a)&&(r||(r={}),r[a]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(ds.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in n){var c=n[u];if(o=i!=null?i[u]:void 0,n.hasOwnProperty(u)&&c!==o&&(c!=null||o!=null))if(u==="style")if(o){for(a in o)!o.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(r||(r={}),r[a]="");for(a in c)c.hasOwnProperty(a)&&o[a]!==c[a]&&(r||(r={}),r[a]=c[a])}else r||(s||(s=[]),s.push(u,r)),r=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,o=o?o.__html:void 0,c!=null&&o!==c&&(s=s||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(s=s||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(ds.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&ve("scroll",t),s||o===c||(s=[])):(s=s||[]).push(u,c))}r&&(s=s||[]).push("style",r);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};Bp=function(t,e,r,n){r!==n&&(e.flags|=4)};function Fi(t,e){if(!_e)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function Ke(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(e)for(var i=t.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags&14680064,n|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function vw(t,e,r){var n=e.pendingProps;switch(Pu(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ke(e),null;case 1:return ht(e.type)&&Ka(),Ke(e),null;case 3:return n=e.stateNode,pi(),ye(dt),ye(Ze),Vu(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(na(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Ft!==null&&(Fc(Ft),Ft=null))),Rc(t,e),Ke(e),null;case 5:Bu(e);var i=vn(ks.current);if(r=e.type,t!==null&&e.stateNode!=null)Fp(t,e,r,n,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(C(166));return Ke(e),null}if(t=vn(tr.current),na(e)){n=e.stateNode,r=e.type;var s=e.memoizedProps;switch(n[Qt]=e,n[_s]=s,t=(e.mode&1)!==0,r){case"dialog":ve("cancel",n),ve("close",n);break;case"iframe":case"object":case"embed":ve("load",n);break;case"video":case"audio":for(i=0;i<Yi.length;i++)ve(Yi[i],n);break;case"source":ve("error",n);break;case"img":case"image":case"link":ve("error",n),ve("load",n);break;case"details":ve("toggle",n);break;case"input":Md(n,s),ve("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!s.multiple},ve("invalid",n);break;case"textarea":Fd(n,s),ve("invalid",n)}sc(r,s),i=null;for(var a in s)if(s.hasOwnProperty(a)){var o=s[a];a==="children"?typeof o=="string"?n.textContent!==o&&(s.suppressHydrationWarning!==!0&&ra(n.textContent,o,t),i=["children",o]):typeof o=="number"&&n.textContent!==""+o&&(s.suppressHydrationWarning!==!0&&ra(n.textContent,o,t),i=["children",""+o]):ds.hasOwnProperty(a)&&o!=null&&a==="onScroll"&&ve("scroll",n)}switch(r){case"input":Ks(n),Ud(n,s,!0);break;case"textarea":Ks(n),Bd(n);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(n.onclick=Ga)}n=i,e.updateQueue=n,n!==null&&(e.flags|=4)}else{a=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=pm(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=a.createElement(r,{is:n.is}):(t=a.createElement(r),r==="select"&&(a=t,n.multiple?a.multiple=!0:n.size&&(a.size=n.size))):t=a.createElementNS(t,r),t[Qt]=e,t[_s]=n,Up(t,e,!1,!1),e.stateNode=t;e:{switch(a=ac(r,n),r){case"dialog":ve("cancel",t),ve("close",t),i=n;break;case"iframe":case"object":case"embed":ve("load",t),i=n;break;case"video":case"audio":for(i=0;i<Yi.length;i++)ve(Yi[i],t);i=n;break;case"source":ve("error",t),i=n;break;case"img":case"image":case"link":ve("error",t),ve("load",t),i=n;break;case"details":ve("toggle",t),i=n;break;case"input":Md(t,n),i=ec(t,n),ve("invalid",t);break;case"option":i=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},i=Se({},n,{value:void 0}),ve("invalid",t);break;case"textarea":Fd(t,n),i=nc(t,n),ve("invalid",t);break;default:i=n}sc(r,i),o=i;for(s in o)if(o.hasOwnProperty(s)){var c=o[s];s==="style"?ym(t,c):s==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&gm(t,c)):s==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&hs(t,c):typeof c=="number"&&hs(t,""+c):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(ds.hasOwnProperty(s)?c!=null&&s==="onScroll"&&ve("scroll",t):c!=null&&yu(t,s,c,a))}switch(r){case"input":Ks(t),Ud(t,n,!1);break;case"textarea":Ks(t),Bd(t);break;case"option":n.value!=null&&t.setAttribute("value",""+Kr(n.value));break;case"select":t.multiple=!!n.multiple,s=n.value,s!=null?ni(t,!!n.multiple,s,!1):n.defaultValue!=null&&ni(t,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Ga)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ke(e),null;case 6:if(t&&e.stateNode!=null)Bp(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(C(166));if(r=vn(ks.current),vn(tr.current),na(e)){if(n=e.stateNode,r=e.memoizedProps,n[Qt]=e,(s=n.nodeValue!==r)&&(t=yt,t!==null))switch(t.tag){case 3:ra(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&ra(n.nodeValue,r,(t.mode&1)!==0)}s&&(e.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Qt]=e,e.stateNode=n}return Ke(e),null;case 13:if(ye(be),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(_e&&vt!==null&&e.mode&1&&!(e.flags&128))sp(),fi(),e.flags|=98560,s=!1;else if(s=na(e),n!==null&&n.dehydrated!==null){if(t===null){if(!s)throw Error(C(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(C(317));s[Qt]=e}else fi(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ke(e),s=!1}else Ft!==null&&(Fc(Ft),Ft=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||be.current&1?$e===0&&($e=3):ed())),e.updateQueue!==null&&(e.flags|=4),Ke(e),null);case 4:return pi(),Rc(t,e),t===null&&ws(e.stateNode.containerInfo),Ke(e),null;case 10:return $u(e.type._context),Ke(e),null;case 17:return ht(e.type)&&Ka(),Ke(e),null;case 19:if(ye(be),s=e.memoizedState,s===null)return Ke(e),null;if(n=(e.flags&128)!==0,a=s.rendering,a===null)if(n)Fi(s,!1);else{if($e!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=to(t),a!==null){for(e.flags|=128,Fi(s,!1),n=a.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=r,r=e.child;r!==null;)s=r,t=n,s.flags&=14680066,a=s.alternate,a===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=a.childLanes,s.lanes=a.lanes,s.child=a.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=a.memoizedProps,s.memoizedState=a.memoizedState,s.updateQueue=a.updateQueue,s.type=a.type,t=a.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return ge(be,be.current&1|2),e.child}t=t.sibling}s.tail!==null&&Ce()>vi&&(e.flags|=128,n=!0,Fi(s,!1),e.lanes=4194304)}else{if(!n)if(t=to(a),t!==null){if(e.flags|=128,n=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),Fi(s,!0),s.tail===null&&s.tailMode==="hidden"&&!a.alternate&&!_e)return Ke(e),null}else 2*Ce()-s.renderingStartTime>vi&&r!==1073741824&&(e.flags|=128,n=!0,Fi(s,!1),e.lanes=4194304);s.isBackwards?(a.sibling=e.child,e.child=a):(r=s.last,r!==null?r.sibling=a:e.child=a,s.last=a)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Ce(),e.sibling=null,r=be.current,ge(be,n?r&1|2:r&1),e):(Ke(e),null);case 22:case 23:return Xu(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?mt&1073741824&&(Ke(e),e.subtreeFlags&6&&(e.flags|=8192)):Ke(e),null;case 24:return null;case 25:return null}throw Error(C(156,e.tag))}function yw(t,e){switch(Pu(e),e.tag){case 1:return ht(e.type)&&Ka(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return pi(),ye(dt),ye(Ze),Vu(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Bu(e),null;case 13:if(ye(be),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(C(340));fi()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ye(be),null;case 4:return pi(),null;case 10:return $u(e.type._context),null;case 22:case 23:return Xu(),null;case 24:return null;default:return null}}var aa=!1,Je=!1,ww=typeof WeakSet=="function"?WeakSet:Set,L=null;function ti(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){Ne(t,e,n)}else r.current=null}function Pc(t,e,r){try{r()}catch(n){Ne(t,e,n)}}var Ah=!1;function xw(t,e){if(gc=Ha,t=qm(),Ou(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var i=n.anchorOffset,s=n.focusNode;n=n.focusOffset;try{r.nodeType,s.nodeType}catch{r=null;break e}var a=0,o=-1,c=-1,u=0,d=0,f=t,m=null;t:for(;;){for(var g;f!==r||i!==0&&f.nodeType!==3||(o=a+i),f!==s||n!==0&&f.nodeType!==3||(c=a+n),f.nodeType===3&&(a+=f.nodeValue.length),(g=f.firstChild)!==null;)m=f,f=g;for(;;){if(f===t)break t;if(m===r&&++u===i&&(o=a),m===s&&++d===n&&(c=a),(g=f.nextSibling)!==null)break;f=m,m=f.parentNode}f=g}r=o===-1||c===-1?null:{start:o,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(vc={focusedElem:t,selectionRange:r},Ha=!1,L=e;L!==null;)if(e=L,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,L=t;else for(;L!==null;){e=L;try{var y=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var w=y.memoizedProps,b=y.memoizedState,v=e.stateNode,h=v.getSnapshotBeforeUpdate(e.elementType===e.type?w:Dt(e.type,w),b);v.__reactInternalSnapshotBeforeUpdate=h}break;case 3:var p=e.stateNode.containerInfo;p.nodeType===1?p.textContent="":p.nodeType===9&&p.documentElement&&p.removeChild(p.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(C(163))}}catch(_){Ne(e,e.return,_)}if(t=e.sibling,t!==null){t.return=e.return,L=t;break}L=e.return}return y=Ah,Ah=!1,y}function as(t,e,r){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var i=n=n.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&Pc(e,r,s)}i=i.next}while(i!==n)}}function zo(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}}function Ic(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function Vp(t){var e=t.alternate;e!==null&&(t.alternate=null,Vp(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Qt],delete e[_s],delete e[xc],delete e[rw],delete e[nw])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function zp(t){return t.tag===5||t.tag===3||t.tag===4}function Oh(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||zp(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Dc(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=Ga));else if(n!==4&&(t=t.child,t!==null))for(Dc(t,e,r),t=t.sibling;t!==null;)Dc(t,e,r),t=t.sibling}function Lc(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(Lc(t,e,r),t=t.sibling;t!==null;)Lc(t,e,r),t=t.sibling}var ze=null,$t=!1;function Nr(t,e,r){for(r=r.child;r!==null;)Hp(t,e,r),r=r.sibling}function Hp(t,e,r){if(er&&typeof er.onCommitFiberUnmount=="function")try{er.onCommitFiberUnmount(Do,r)}catch{}switch(r.tag){case 5:Je||ti(r,e);case 6:var n=ze,i=$t;ze=null,Nr(t,e,r),ze=n,$t=i,ze!==null&&($t?(t=ze,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):ze.removeChild(r.stateNode));break;case 18:ze!==null&&($t?(t=ze,r=r.stateNode,t.nodeType===8?Cl(t.parentNode,r):t.nodeType===1&&Cl(t,r),gs(t)):Cl(ze,r.stateNode));break;case 4:n=ze,i=$t,ze=r.stateNode.containerInfo,$t=!0,Nr(t,e,r),ze=n,$t=i;break;case 0:case 11:case 14:case 15:if(!Je&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){i=n=n.next;do{var s=i,a=s.destroy;s=s.tag,a!==void 0&&(s&2||s&4)&&Pc(r,e,a),i=i.next}while(i!==n)}Nr(t,e,r);break;case 1:if(!Je&&(ti(r,e),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(o){Ne(r,e,o)}Nr(t,e,r);break;case 21:Nr(t,e,r);break;case 22:r.mode&1?(Je=(n=Je)||r.memoizedState!==null,Nr(t,e,r),Je=n):Nr(t,e,r);break;default:Nr(t,e,r)}}function Rh(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new ww),e.forEach(function(n){var i=Tw.bind(null,t,n);r.has(n)||(r.add(n),n.then(i,i))})}}function Pt(t,e){var r=e.deletions;if(r!==null)for(var n=0;n<r.length;n++){var i=r[n];try{var s=t,a=e,o=a;e:for(;o!==null;){switch(o.tag){case 5:ze=o.stateNode,$t=!1;break e;case 3:ze=o.stateNode.containerInfo,$t=!0;break e;case 4:ze=o.stateNode.containerInfo,$t=!0;break e}o=o.return}if(ze===null)throw Error(C(160));Hp(s,a,i),ze=null,$t=!1;var c=i.alternate;c!==null&&(c.return=null),i.return=null}catch(u){Ne(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Wp(e,t),e=e.sibling}function Wp(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Pt(e,t),qt(t),n&4){try{as(3,t,t.return),zo(3,t)}catch(w){Ne(t,t.return,w)}try{as(5,t,t.return)}catch(w){Ne(t,t.return,w)}}break;case 1:Pt(e,t),qt(t),n&512&&r!==null&&ti(r,r.return);break;case 5:if(Pt(e,t),qt(t),n&512&&r!==null&&ti(r,r.return),t.flags&32){var i=t.stateNode;try{hs(i,"")}catch(w){Ne(t,t.return,w)}}if(n&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,a=r!==null?r.memoizedProps:s,o=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{o==="input"&&s.type==="radio"&&s.name!=null&&fm(i,s),ac(o,a);var u=ac(o,s);for(a=0;a<c.length;a+=2){var d=c[a],f=c[a+1];d==="style"?ym(i,f):d==="dangerouslySetInnerHTML"?gm(i,f):d==="children"?hs(i,f):yu(i,d,f,u)}switch(o){case"input":tc(i,s);break;case"textarea":mm(i,s);break;case"select":var m=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var g=s.value;g!=null?ni(i,!!s.multiple,g,!1):m!==!!s.multiple&&(s.defaultValue!=null?ni(i,!!s.multiple,s.defaultValue,!0):ni(i,!!s.multiple,s.multiple?[]:"",!1))}i[_s]=s}catch(w){Ne(t,t.return,w)}}break;case 6:if(Pt(e,t),qt(t),n&4){if(t.stateNode===null)throw Error(C(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(w){Ne(t,t.return,w)}}break;case 3:if(Pt(e,t),qt(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{gs(e.containerInfo)}catch(w){Ne(t,t.return,w)}break;case 4:Pt(e,t),qt(t);break;case 13:Pt(e,t),qt(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Zu=Ce())),n&4&&Rh(t);break;case 22:if(d=r!==null&&r.memoizedState!==null,t.mode&1?(Je=(u=Je)||d,Pt(e,t),Je=u):Pt(e,t),qt(t),n&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!d&&t.mode&1)for(L=t,d=t.child;d!==null;){for(f=L=d;L!==null;){switch(m=L,g=m.child,m.tag){case 0:case 11:case 14:case 15:as(4,m,m.return);break;case 1:ti(m,m.return);var y=m.stateNode;if(typeof y.componentWillUnmount=="function"){n=m,r=m.return;try{e=n,y.props=e.memoizedProps,y.state=e.memoizedState,y.componentWillUnmount()}catch(w){Ne(n,r,w)}}break;case 5:ti(m,m.return);break;case 22:if(m.memoizedState!==null){Ih(f);continue}}g!==null?(g.return=m,L=g):Ih(f)}d=d.sibling}e:for(d=null,f=t;;){if(f.tag===5){if(d===null){d=f;try{i=f.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(o=f.stateNode,c=f.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,o.style.display=vm("display",a))}catch(w){Ne(t,t.return,w)}}}else if(f.tag===6){if(d===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(w){Ne(t,t.return,w)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Pt(e,t),qt(t),n&4&&Rh(t);break;case 21:break;default:Pt(e,t),qt(t)}}function qt(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(zp(r)){var n=r;break e}r=r.return}throw Error(C(160))}switch(n.tag){case 5:var i=n.stateNode;n.flags&32&&(hs(i,""),n.flags&=-33);var s=Oh(t);Lc(t,s,i);break;case 3:case 4:var a=n.stateNode.containerInfo,o=Oh(t);Dc(t,o,a);break;default:throw Error(C(161))}}catch(c){Ne(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function _w(t,e,r){L=t,qp(t)}function qp(t,e,r){for(var n=(t.mode&1)!==0;L!==null;){var i=L,s=i.child;if(i.tag===22&&n){var a=i.memoizedState!==null||aa;if(!a){var o=i.alternate,c=o!==null&&o.memoizedState!==null||Je;o=aa;var u=Je;if(aa=a,(Je=c)&&!u)for(L=i;L!==null;)a=L,c=a.child,a.tag===22&&a.memoizedState!==null?Dh(i):c!==null?(c.return=a,L=c):Dh(i);for(;s!==null;)L=s,qp(s),s=s.sibling;L=i,aa=o,Je=u}Ph(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,L=s):Ph(t)}}function Ph(t){for(;L!==null;){var e=L;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Je||zo(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!Je)if(r===null)n.componentDidMount();else{var i=e.elementType===e.type?r.memoizedProps:Dt(e.type,r.memoizedProps);n.componentDidUpdate(i,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&vh(e,s,n);break;case 3:var a=e.updateQueue;if(a!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}vh(e,a,r)}break;case 5:var o=e.stateNode;if(r===null&&e.flags&4){r=o;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var f=d.dehydrated;f!==null&&gs(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(C(163))}Je||e.flags&512&&Ic(e)}catch(m){Ne(e,e.return,m)}}if(e===t){L=null;break}if(r=e.sibling,r!==null){r.return=e.return,L=r;break}L=e.return}}function Ih(t){for(;L!==null;){var e=L;if(e===t){L=null;break}var r=e.sibling;if(r!==null){r.return=e.return,L=r;break}L=e.return}}function Dh(t){for(;L!==null;){var e=L;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{zo(4,e)}catch(c){Ne(e,r,c)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var i=e.return;try{n.componentDidMount()}catch(c){Ne(e,i,c)}}var s=e.return;try{Ic(e)}catch(c){Ne(e,s,c)}break;case 5:var a=e.return;try{Ic(e)}catch(c){Ne(e,a,c)}}}catch(c){Ne(e,e.return,c)}if(e===t){L=null;break}var o=e.sibling;if(o!==null){o.return=e.return,L=o;break}L=e.return}}var bw=Math.ceil,io=_r.ReactCurrentDispatcher,Ju=_r.ReactCurrentOwner,Ct=_r.ReactCurrentBatchConfig,ae=0,Fe=null,Ie=null,He=0,mt=0,ri=Xr(0),$e=0,Es=null,Nn=0,Ho=0,Yu=0,os=null,lt=null,Zu=0,vi=1/0,cr=null,so=!1,$c=null,Hr=null,oa=!1,$r=null,ao=0,ls=0,Mc=null,Aa=-1,Oa=0;function rt(){return ae&6?Ce():Aa!==-1?Aa:Aa=Ce()}function Wr(t){return t.mode&1?ae&2&&He!==0?He&-He:sw.transition!==null?(Oa===0&&(Oa=Am()),Oa):(t=he,t!==0||(t=window.event,t=t===void 0?16:$m(t.type)),t):1}function Ht(t,e,r,n){if(50<ls)throw ls=0,Mc=null,Error(C(185));Ls(t,r,n),(!(ae&2)||t!==Fe)&&(t===Fe&&(!(ae&2)&&(Ho|=r),$e===4&&Rr(t,He)),ft(t,n),r===1&&ae===0&&!(e.mode&1)&&(vi=Ce()+500,Fo&&en()))}function ft(t,e){var r=t.callbackNode;s0(t,e);var n=za(t,t===Fe?He:0);if(n===0)r!==null&&Hd(r),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(r!=null&&Hd(r),e===1)t.tag===0?iw(Lh.bind(null,t)):rp(Lh.bind(null,t)),ew(function(){!(ae&6)&&en()}),r=null;else{switch(Om(n)){case 1:r=ku;break;case 4:r=Cm;break;case 16:r=Va;break;case 536870912:r=Tm;break;default:r=Va}r=eg(r,Gp.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function Gp(t,e){if(Aa=-1,Oa=0,ae&6)throw Error(C(327));var r=t.callbackNode;if(li()&&t.callbackNode!==r)return null;var n=za(t,t===Fe?He:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=oo(t,n);else{e=n;var i=ae;ae|=2;var s=Jp();(Fe!==t||He!==e)&&(cr=null,vi=Ce()+500,xn(t,e));do try{jw();break}catch(o){Kp(t,o)}while(!0);Lu(),io.current=s,ae=i,Ie!==null?e=0:(Fe=null,He=0,e=$e)}if(e!==0){if(e===2&&(i=dc(t),i!==0&&(n=i,e=Uc(t,i))),e===1)throw r=Es,xn(t,0),Rr(t,n),ft(t,Ce()),r;if(e===6)Rr(t,n);else{if(i=t.current.alternate,!(n&30)&&!kw(i)&&(e=oo(t,n),e===2&&(s=dc(t),s!==0&&(n=s,e=Uc(t,s))),e===1))throw r=Es,xn(t,0),Rr(t,n),ft(t,Ce()),r;switch(t.finishedWork=i,t.finishedLanes=n,e){case 0:case 1:throw Error(C(345));case 2:ln(t,lt,cr);break;case 3:if(Rr(t,n),(n&130023424)===n&&(e=Zu+500-Ce(),10<e)){if(za(t,0)!==0)break;if(i=t.suspendedLanes,(i&n)!==n){rt(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=wc(ln.bind(null,t,lt,cr),e);break}ln(t,lt,cr);break;case 4:if(Rr(t,n),(n&4194240)===n)break;for(e=t.eventTimes,i=-1;0<n;){var a=31-zt(n);s=1<<a,a=e[a],a>i&&(i=a),n&=~s}if(n=i,n=Ce()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*bw(n/1960))-n,10<n){t.timeoutHandle=wc(ln.bind(null,t,lt,cr),n);break}ln(t,lt,cr);break;case 5:ln(t,lt,cr);break;default:throw Error(C(329))}}}return ft(t,Ce()),t.callbackNode===r?Gp.bind(null,t):null}function Uc(t,e){var r=os;return t.current.memoizedState.isDehydrated&&(xn(t,e).flags|=256),t=oo(t,e),t!==2&&(e=lt,lt=r,e!==null&&Fc(e)),t}function Fc(t){lt===null?lt=t:lt.push.apply(lt,t)}function kw(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var i=r[n],s=i.getSnapshot;i=i.value;try{if(!Wt(s(),i))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Rr(t,e){for(e&=~Yu,e&=~Ho,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-zt(e),n=1<<r;t[r]=-1,e&=~n}}function Lh(t){if(ae&6)throw Error(C(327));li();var e=za(t,0);if(!(e&1))return ft(t,Ce()),null;var r=oo(t,e);if(t.tag!==0&&r===2){var n=dc(t);n!==0&&(e=n,r=Uc(t,n))}if(r===1)throw r=Es,xn(t,0),Rr(t,e),ft(t,Ce()),r;if(r===6)throw Error(C(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,ln(t,lt,cr),ft(t,Ce()),null}function Qu(t,e){var r=ae;ae|=1;try{return t(e)}finally{ae=r,ae===0&&(vi=Ce()+500,Fo&&en())}}function En(t){$r!==null&&$r.tag===0&&!(ae&6)&&li();var e=ae;ae|=1;var r=Ct.transition,n=he;try{if(Ct.transition=null,he=1,t)return t()}finally{he=n,Ct.transition=r,ae=e,!(ae&6)&&en()}}function Xu(){mt=ri.current,ye(ri)}function xn(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,X0(r)),Ie!==null)for(r=Ie.return;r!==null;){var n=r;switch(Pu(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Ka();break;case 3:pi(),ye(dt),ye(Ze),Vu();break;case 5:Bu(n);break;case 4:pi();break;case 13:ye(be);break;case 19:ye(be);break;case 10:$u(n.type._context);break;case 22:case 23:Xu()}r=r.return}if(Fe=t,Ie=t=qr(t.current,null),He=mt=e,$e=0,Es=null,Yu=Ho=Nn=0,lt=os=null,gn!==null){for(e=0;e<gn.length;e++)if(r=gn[e],n=r.interleaved,n!==null){r.interleaved=null;var i=n.next,s=r.pending;if(s!==null){var a=s.next;s.next=i,n.next=a}r.pending=n}gn=null}return t}function Kp(t,e){do{var r=Ie;try{if(Lu(),Ea.current=no,ro){for(var n=ke.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}ro=!1}if(jn=0,Ue=Le=ke=null,ss=!1,Ss=0,Ju.current=null,r===null||r.return===null){$e=1,Es=e,Ie=null;break}e:{var s=t,a=r.return,o=r,c=e;if(e=He,o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=o,f=d.tag;if(!(d.mode&1)&&(f===0||f===11||f===15)){var m=d.alternate;m?(d.updateQueue=m.updateQueue,d.memoizedState=m.memoizedState,d.lanes=m.lanes):(d.updateQueue=null,d.memoizedState=null)}var g=kh(a);if(g!==null){g.flags&=-257,Sh(g,a,o,s,e),g.mode&1&&bh(s,u,e),e=g,c=u;var y=e.updateQueue;if(y===null){var w=new Set;w.add(c),e.updateQueue=w}else y.add(c);break e}else{if(!(e&1)){bh(s,u,e),ed();break e}c=Error(C(426))}}else if(_e&&o.mode&1){var b=kh(a);if(b!==null){!(b.flags&65536)&&(b.flags|=256),Sh(b,a,o,s,e),Iu(gi(c,o));break e}}s=c=gi(c,o),$e!==4&&($e=2),os===null?os=[s]:os.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var v=Op(s,c,e);gh(s,v);break e;case 1:o=c;var h=s.type,p=s.stateNode;if(!(s.flags&128)&&(typeof h.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(Hr===null||!Hr.has(p)))){s.flags|=65536,e&=-e,s.lanes|=e;var _=Rp(s,o,e);gh(s,_);break e}}s=s.return}while(s!==null)}Zp(r)}catch(S){e=S,Ie===r&&r!==null&&(Ie=r=r.return);continue}break}while(!0)}function Jp(){var t=io.current;return io.current=no,t===null?no:t}function ed(){($e===0||$e===3||$e===2)&&($e=4),Fe===null||!(Nn&268435455)&&!(Ho&268435455)||Rr(Fe,He)}function oo(t,e){var r=ae;ae|=2;var n=Jp();(Fe!==t||He!==e)&&(cr=null,xn(t,e));do try{Sw();break}catch(i){Kp(t,i)}while(!0);if(Lu(),ae=r,io.current=n,Ie!==null)throw Error(C(261));return Fe=null,He=0,$e}function Sw(){for(;Ie!==null;)Yp(Ie)}function jw(){for(;Ie!==null&&!Yy();)Yp(Ie)}function Yp(t){var e=Xp(t.alternate,t,mt);t.memoizedProps=t.pendingProps,e===null?Zp(t):Ie=e,Ju.current=null}function Zp(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=yw(r,e),r!==null){r.flags&=32767,Ie=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{$e=6,Ie=null;return}}else if(r=vw(r,e,mt),r!==null){Ie=r;return}if(e=e.sibling,e!==null){Ie=e;return}Ie=e=t}while(e!==null);$e===0&&($e=5)}function ln(t,e,r){var n=he,i=Ct.transition;try{Ct.transition=null,he=1,Nw(t,e,r,n)}finally{Ct.transition=i,he=n}return null}function Nw(t,e,r,n){do li();while($r!==null);if(ae&6)throw Error(C(327));r=t.finishedWork;var i=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(C(177));t.callbackNode=null,t.callbackPriority=0;var s=r.lanes|r.childLanes;if(a0(t,s),t===Fe&&(Ie=Fe=null,He=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||oa||(oa=!0,eg(Va,function(){return li(),null})),s=(r.flags&15990)!==0,r.subtreeFlags&15990||s){s=Ct.transition,Ct.transition=null;var a=he;he=1;var o=ae;ae|=4,Ju.current=null,xw(t,r),Wp(r,t),q0(vc),Ha=!!gc,vc=gc=null,t.current=r,_w(r),Zy(),ae=o,he=a,Ct.transition=s}else t.current=r;if(oa&&(oa=!1,$r=t,ao=i),s=t.pendingLanes,s===0&&(Hr=null),e0(r.stateNode),ft(t,Ce()),e!==null)for(n=t.onRecoverableError,r=0;r<e.length;r++)i=e[r],n(i.value,{componentStack:i.stack,digest:i.digest});if(so)throw so=!1,t=$c,$c=null,t;return ao&1&&t.tag!==0&&li(),s=t.pendingLanes,s&1?t===Mc?ls++:(ls=0,Mc=t):ls=0,en(),null}function li(){if($r!==null){var t=Om(ao),e=Ct.transition,r=he;try{if(Ct.transition=null,he=16>t?16:t,$r===null)var n=!1;else{if(t=$r,$r=null,ao=0,ae&6)throw Error(C(331));var i=ae;for(ae|=4,L=t.current;L!==null;){var s=L,a=s.child;if(L.flags&16){var o=s.deletions;if(o!==null){for(var c=0;c<o.length;c++){var u=o[c];for(L=u;L!==null;){var d=L;switch(d.tag){case 0:case 11:case 15:as(8,d,s)}var f=d.child;if(f!==null)f.return=d,L=f;else for(;L!==null;){d=L;var m=d.sibling,g=d.return;if(Vp(d),d===u){L=null;break}if(m!==null){m.return=g,L=m;break}L=g}}}var y=s.alternate;if(y!==null){var w=y.child;if(w!==null){y.child=null;do{var b=w.sibling;w.sibling=null,w=b}while(w!==null)}}L=s}}if(s.subtreeFlags&2064&&a!==null)a.return=s,L=a;else e:for(;L!==null;){if(s=L,s.flags&2048)switch(s.tag){case 0:case 11:case 15:as(9,s,s.return)}var v=s.sibling;if(v!==null){v.return=s.return,L=v;break e}L=s.return}}var h=t.current;for(L=h;L!==null;){a=L;var p=a.child;if(a.subtreeFlags&2064&&p!==null)p.return=a,L=p;else e:for(a=h;L!==null;){if(o=L,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:zo(9,o)}}catch(S){Ne(o,o.return,S)}if(o===a){L=null;break e}var _=o.sibling;if(_!==null){_.return=o.return,L=_;break e}L=o.return}}if(ae=i,en(),er&&typeof er.onPostCommitFiberRoot=="function")try{er.onPostCommitFiberRoot(Do,t)}catch{}n=!0}return n}finally{he=r,Ct.transition=e}}return!1}function $h(t,e,r){e=gi(r,e),e=Op(t,e,1),t=zr(t,e,1),e=rt(),t!==null&&(Ls(t,1,e),ft(t,e))}function Ne(t,e,r){if(t.tag===3)$h(t,t,r);else for(;e!==null;){if(e.tag===3){$h(e,t,r);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Hr===null||!Hr.has(n))){t=gi(r,t),t=Rp(e,t,1),e=zr(e,t,1),t=rt(),e!==null&&(Ls(e,1,t),ft(e,t));break}}e=e.return}}function Ew(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=rt(),t.pingedLanes|=t.suspendedLanes&r,Fe===t&&(He&r)===r&&($e===4||$e===3&&(He&130023424)===He&&500>Ce()-Zu?xn(t,0):Yu|=r),ft(t,e)}function Qp(t,e){e===0&&(t.mode&1?(e=Zs,Zs<<=1,!(Zs&130023424)&&(Zs=4194304)):e=1);var r=rt();t=yr(t,e),t!==null&&(Ls(t,e,r),ft(t,r))}function Cw(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),Qp(t,r)}function Tw(t,e){var r=0;switch(t.tag){case 13:var n=t.stateNode,i=t.memoizedState;i!==null&&(r=i.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(C(314))}n!==null&&n.delete(e),Qp(t,r)}var Xp;Xp=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||dt.current)ut=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return ut=!1,gw(t,e,r);ut=!!(t.flags&131072)}else ut=!1,_e&&e.flags&1048576&&np(e,Za,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;Ta(t,e),t=e.pendingProps;var i=hi(e,Ze.current);oi(e,r),i=Hu(null,e,n,t,i,r);var s=Wu();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,ht(n)?(s=!0,Ja(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Uu(e),i.updater=Vo,e.stateNode=i,i._reactInternals=e,Nc(e,n,t,r),e=Tc(null,e,n,!0,s,r)):(e.tag=0,_e&&s&&Ru(e),et(null,e,i,r),e=e.child),e;case 16:n=e.elementType;e:{switch(Ta(t,e),t=e.pendingProps,i=n._init,n=i(n._payload),e.type=n,i=e.tag=Ow(n),t=Dt(n,t),i){case 0:e=Cc(null,e,n,t,r);break e;case 1:e=Eh(null,e,n,t,r);break e;case 11:e=jh(null,e,n,t,r);break e;case 14:e=Nh(null,e,n,Dt(n.type,t),r);break e}throw Error(C(306,n,""))}return e;case 0:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Dt(n,i),Cc(t,e,n,i,r);case 1:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Dt(n,i),Eh(t,e,n,i,r);case 3:e:{if(Lp(e),t===null)throw Error(C(387));n=e.pendingProps,s=e.memoizedState,i=s.element,cp(t,e),eo(e,n,null,r);var a=e.memoizedState;if(n=a.element,s.isDehydrated)if(s={element:n,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=gi(Error(C(423)),e),e=Ch(t,e,n,r,i);break e}else if(n!==i){i=gi(Error(C(424)),e),e=Ch(t,e,n,r,i);break e}else for(vt=Vr(e.stateNode.containerInfo.firstChild),yt=e,_e=!0,Ft=null,r=op(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(fi(),n===i){e=wr(t,e,r);break e}et(t,e,n,r)}e=e.child}return e;case 5:return up(e),t===null&&kc(e),n=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,a=i.children,yc(n,i)?a=null:s!==null&&yc(n,s)&&(e.flags|=32),Dp(t,e),et(t,e,a,r),e.child;case 6:return t===null&&kc(e),null;case 13:return $p(t,e,r);case 4:return Fu(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=mi(e,null,n,r):et(t,e,n,r),e.child;case 11:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Dt(n,i),jh(t,e,n,i,r);case 7:return et(t,e,e.pendingProps,r),e.child;case 8:return et(t,e,e.pendingProps.children,r),e.child;case 12:return et(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(n=e.type._context,i=e.pendingProps,s=e.memoizedProps,a=i.value,ge(Qa,n._currentValue),n._currentValue=a,s!==null)if(Wt(s.value,a)){if(s.children===i.children&&!dt.current){e=wr(t,e,r);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var o=s.dependencies;if(o!==null){a=s.child;for(var c=o.firstContext;c!==null;){if(c.context===n){if(s.tag===1){c=fr(-1,r&-r),c.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}s.lanes|=r,c=s.alternate,c!==null&&(c.lanes|=r),Sc(s.return,r,e),o.lanes|=r;break}c=c.next}}else if(s.tag===10)a=s.type===e.type?null:s.child;else if(s.tag===18){if(a=s.return,a===null)throw Error(C(341));a.lanes|=r,o=a.alternate,o!==null&&(o.lanes|=r),Sc(a,r,e),a=s.sibling}else a=s.child;if(a!==null)a.return=s;else for(a=s;a!==null;){if(a===e){a=null;break}if(s=a.sibling,s!==null){s.return=a.return,a=s;break}a=a.return}s=a}et(t,e,i.children,r),e=e.child}return e;case 9:return i=e.type,n=e.pendingProps.children,oi(e,r),i=At(i),n=n(i),e.flags|=1,et(t,e,n,r),e.child;case 14:return n=e.type,i=Dt(n,e.pendingProps),i=Dt(n.type,i),Nh(t,e,n,i,r);case 15:return Pp(t,e,e.type,e.pendingProps,r);case 17:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Dt(n,i),Ta(t,e),e.tag=1,ht(n)?(t=!0,Ja(e)):t=!1,oi(e,r),Ap(e,n,i),Nc(e,n,i,r),Tc(null,e,n,!0,t,r);case 19:return Mp(t,e,r);case 22:return Ip(t,e,r)}throw Error(C(156,e.tag))};function eg(t,e){return Em(t,e)}function Aw(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Et(t,e,r,n){return new Aw(t,e,r,n)}function td(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Ow(t){if(typeof t=="function")return td(t)?1:0;if(t!=null){if(t=t.$$typeof,t===xu)return 11;if(t===_u)return 14}return 2}function qr(t,e){var r=t.alternate;return r===null?(r=Et(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function Ra(t,e,r,n,i,s){var a=2;if(n=t,typeof t=="function")td(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case qn:return _n(r.children,i,s,e);case wu:a=8,i|=8;break;case Yl:return t=Et(12,r,e,i|2),t.elementType=Yl,t.lanes=s,t;case Zl:return t=Et(13,r,e,i),t.elementType=Zl,t.lanes=s,t;case Ql:return t=Et(19,r,e,i),t.elementType=Ql,t.lanes=s,t;case um:return Wo(r,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case lm:a=10;break e;case cm:a=9;break e;case xu:a=11;break e;case _u:a=14;break e;case Cr:a=16,n=null;break e}throw Error(C(130,t==null?t:typeof t,""))}return e=Et(a,r,e,i),e.elementType=t,e.type=n,e.lanes=s,e}function _n(t,e,r,n){return t=Et(7,t,n,e),t.lanes=r,t}function Wo(t,e,r,n){return t=Et(22,t,n,e),t.elementType=um,t.lanes=r,t.stateNode={isHidden:!1},t}function Ll(t,e,r){return t=Et(6,t,null,e),t.lanes=r,t}function $l(t,e,r){return e=Et(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Rw(t,e,r,n,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=vl(0),this.expirationTimes=vl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=vl(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function rd(t,e,r,n,i,s,a,o,c){return t=new Rw(t,e,r,o,c),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Et(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Uu(s),t}function Pw(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Wn,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function tg(t){if(!t)return Jr;t=t._reactInternals;e:{if(On(t)!==t||t.tag!==1)throw Error(C(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(ht(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(C(171))}if(t.tag===1){var r=t.type;if(ht(r))return tp(t,r,e)}return e}function rg(t,e,r,n,i,s,a,o,c){return t=rd(r,n,!0,t,i,s,a,o,c),t.context=tg(null),r=t.current,n=rt(),i=Wr(r),s=fr(n,i),s.callback=e??null,zr(r,s,i),t.current.lanes=i,Ls(t,i,n),ft(t,n),t}function qo(t,e,r,n){var i=e.current,s=rt(),a=Wr(i);return r=tg(r),e.context===null?e.context=r:e.pendingContext=r,e=fr(s,a),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=zr(i,e,a),t!==null&&(Ht(t,i,a,s),Na(t,i,a)),a}function lo(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Mh(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function nd(t,e){Mh(t,e),(t=t.alternate)&&Mh(t,e)}function Iw(){return null}var ng=typeof reportError=="function"?reportError:function(t){console.error(t)};function id(t){this._internalRoot=t}Go.prototype.render=id.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(C(409));qo(t,e,null,null)};Go.prototype.unmount=id.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;En(function(){qo(null,t,null,null)}),e[vr]=null}};function Go(t){this._internalRoot=t}Go.prototype.unstable_scheduleHydration=function(t){if(t){var e=Im();t={blockedOn:null,target:t,priority:e};for(var r=0;r<Or.length&&e!==0&&e<Or[r].priority;r++);Or.splice(r,0,t),r===0&&Lm(t)}};function sd(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Ko(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Uh(){}function Dw(t,e,r,n,i){if(i){if(typeof n=="function"){var s=n;n=function(){var u=lo(a);s.call(u)}}var a=rg(e,n,t,0,null,!1,!1,"",Uh);return t._reactRootContainer=a,t[vr]=a.current,ws(t.nodeType===8?t.parentNode:t),En(),a}for(;i=t.lastChild;)t.removeChild(i);if(typeof n=="function"){var o=n;n=function(){var u=lo(c);o.call(u)}}var c=rd(t,0,!1,null,null,!1,!1,"",Uh);return t._reactRootContainer=c,t[vr]=c.current,ws(t.nodeType===8?t.parentNode:t),En(function(){qo(e,c,r,n)}),c}function Jo(t,e,r,n,i){var s=r._reactRootContainer;if(s){var a=s;if(typeof i=="function"){var o=i;i=function(){var c=lo(a);o.call(c)}}qo(e,a,t,i)}else a=Dw(r,e,t,i,n);return lo(a)}Rm=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=Ji(e.pendingLanes);r!==0&&(Su(e,r|1),ft(e,Ce()),!(ae&6)&&(vi=Ce()+500,en()))}break;case 13:En(function(){var n=yr(t,1);if(n!==null){var i=rt();Ht(n,t,1,i)}}),nd(t,1)}};ju=function(t){if(t.tag===13){var e=yr(t,134217728);if(e!==null){var r=rt();Ht(e,t,134217728,r)}nd(t,134217728)}};Pm=function(t){if(t.tag===13){var e=Wr(t),r=yr(t,e);if(r!==null){var n=rt();Ht(r,t,e,n)}nd(t,e)}};Im=function(){return he};Dm=function(t,e){var r=he;try{return he=t,e()}finally{he=r}};lc=function(t,e,r){switch(e){case"input":if(tc(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var i=Uo(n);if(!i)throw Error(C(90));hm(n),tc(n,i)}}}break;case"textarea":mm(t,r);break;case"select":e=r.value,e!=null&&ni(t,!!r.multiple,e,!1)}};_m=Qu;bm=En;var Lw={usingClientEntryPoint:!1,Events:[Ms,Yn,Uo,wm,xm,Qu]},Bi={findFiberByHostInstance:pn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},$w={bundleType:Bi.bundleType,version:Bi.version,rendererPackageName:Bi.rendererPackageName,rendererConfig:Bi.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:_r.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=jm(t),t===null?null:t.stateNode},findFiberByHostInstance:Bi.findFiberByHostInstance||Iw,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var la=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!la.isDisabled&&la.supportsFiber)try{Do=la.inject($w),er=la}catch{}}_t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Lw;_t.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!sd(e))throw Error(C(200));return Pw(t,e,null,r)};_t.createRoot=function(t,e){if(!sd(t))throw Error(C(299));var r=!1,n="",i=ng;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=rd(t,1,!1,null,null,r,!1,n,i),t[vr]=e.current,ws(t.nodeType===8?t.parentNode:t),new id(e)};_t.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(C(188)):(t=Object.keys(t).join(","),Error(C(268,t)));return t=jm(e),t=t===null?null:t.stateNode,t};_t.flushSync=function(t){return En(t)};_t.hydrate=function(t,e,r){if(!Ko(e))throw Error(C(200));return Jo(null,t,e,!0,r)};_t.hydrateRoot=function(t,e,r){if(!sd(t))throw Error(C(405));var n=r!=null&&r.hydratedSources||null,i=!1,s="",a=ng;if(r!=null&&(r.unstable_strictMode===!0&&(i=!0),r.identifierPrefix!==void 0&&(s=r.identifierPrefix),r.onRecoverableError!==void 0&&(a=r.onRecoverableError)),e=rg(e,null,t,1,r??null,i,!1,s,a),t[vr]=e.current,ws(t),n)for(t=0;t<n.length;t++)r=n[t],i=r._getVersion,i=i(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,i]:e.mutableSourceEagerHydrationData.push(r,i);return new Go(e)};_t.render=function(t,e,r){if(!Ko(e))throw Error(C(200));return Jo(null,t,e,!1,r)};_t.unmountComponentAtNode=function(t){if(!Ko(t))throw Error(C(40));return t._reactRootContainer?(En(function(){Jo(null,null,t,!1,function(){t._reactRootContainer=null,t[vr]=null})}),!0):!1};_t.unstable_batchedUpdates=Qu;_t.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!Ko(r))throw Error(C(200));if(t==null||t._reactInternals===void 0)throw Error(C(38));return Jo(t,e,r,!1,n)};_t.version="18.3.1-next-f1338f8080-20240426";function ig(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(ig)}catch(t){console.error(t)}}ig(),im.exports=_t;var Mw=im.exports,Fh=Mw;Kl.createRoot=Fh.createRoot,Kl.hydrateRoot=Fh.hydrateRoot;const Uw={},Bh=t=>{let e;const r=new Set,n=(d,f)=>{const m=typeof d=="function"?d(e):d;if(!Object.is(m,e)){const g=e;e=f??(typeof m!="object"||m===null)?m:Object.assign({},e,m),r.forEach(y=>y(e,g))}},i=()=>e,c={setState:n,getState:i,getInitialState:()=>u,subscribe:d=>(r.add(d),()=>r.delete(d)),destroy:()=>{(Uw?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),r.clear()}},u=e=t(n,i,c);return c},Fw=t=>t?Bh(t):Bh;var sg={exports:{}},ag={},og={exports:{}},lg={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yi=Y;function Bw(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Vw=typeof Object.is=="function"?Object.is:Bw,zw=yi.useState,Hw=yi.useEffect,Ww=yi.useLayoutEffect,qw=yi.useDebugValue;function Gw(t,e){var r=e(),n=zw({inst:{value:r,getSnapshot:e}}),i=n[0].inst,s=n[1];return Ww(function(){i.value=r,i.getSnapshot=e,Ml(i)&&s({inst:i})},[t,r,e]),Hw(function(){return Ml(i)&&s({inst:i}),t(function(){Ml(i)&&s({inst:i})})},[t]),qw(r),r}function Ml(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!Vw(t,r)}catch{return!0}}function Kw(t,e){return e()}var Jw=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Kw:Gw;lg.useSyncExternalStore=yi.useSyncExternalStore!==void 0?yi.useSyncExternalStore:Jw;og.exports=lg;var Yw=og.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yo=Y,Zw=Yw;function Qw(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Xw=typeof Object.is=="function"?Object.is:Qw,ex=Zw.useSyncExternalStore,tx=Yo.useRef,rx=Yo.useEffect,nx=Yo.useMemo,ix=Yo.useDebugValue;ag.useSyncExternalStoreWithSelector=function(t,e,r,n,i){var s=tx(null);if(s.current===null){var a={hasValue:!1,value:null};s.current=a}else a=s.current;s=nx(function(){function c(g){if(!u){if(u=!0,d=g,g=n(g),i!==void 0&&a.hasValue){var y=a.value;if(i(y,g))return f=y}return f=g}if(y=f,Xw(d,g))return y;var w=n(g);return i!==void 0&&i(y,w)?(d=g,y):(d=g,f=w)}var u=!1,d,f,m=r===void 0?null:r;return[function(){return c(e())},m===null?void 0:function(){return c(m())}]},[e,r,n,i]);var o=ex(t,s[0],s[1]);return rx(function(){a.hasValue=!0,a.value=o},[o]),ix(o),o};sg.exports=ag;var sx=sg.exports;const ax=du(sx),cg={},{useDebugValue:ox}=Xe,{useSyncExternalStoreWithSelector:lx}=ax;let Vh=!1;const cx=t=>t;function ux(t,e=cx,r){(cg?"production":void 0)!=="production"&&r&&!Vh&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),Vh=!0);const n=lx(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,r);return ox(n),n}const zh=t=>{(cg?"production":void 0)!=="production"&&typeof t!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const e=typeof t=="function"?Fw(t):t,r=(n,i)=>ux(e,n,i);return Object.assign(r,e),r},dx=t=>t?zh(t):zh;var le;(function(t){t.assertEqual=i=>{};function e(i){}t.assertIs=e;function r(i){throw new Error}t.assertNever=r,t.arrayToEnum=i=>{const s={};for(const a of i)s[a]=a;return s},t.getValidEnumValues=i=>{const s=t.objectKeys(i).filter(o=>typeof i[i[o]]!="number"),a={};for(const o of s)a[o]=i[o];return t.objectValues(a)},t.objectValues=i=>t.objectKeys(i).map(function(s){return i[s]}),t.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{const s=[];for(const a in i)Object.prototype.hasOwnProperty.call(i,a)&&s.push(a);return s},t.find=(i,s)=>{for(const a of i)if(s(a))return a},t.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&Number.isFinite(i)&&Math.floor(i)===i;function n(i,s=" | "){return i.map(a=>typeof a=="string"?`'${a}'`:a).join(s)}t.joinValues=n,t.jsonStringifyReplacer=(i,s)=>typeof s=="bigint"?s.toString():s})(le||(le={}));var Hh;(function(t){t.mergeShapes=(e,r)=>({...e,...r})})(Hh||(Hh={}));const U=le.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Ar=t=>{switch(typeof t){case"undefined":return U.undefined;case"string":return U.string;case"number":return Number.isNaN(t)?U.nan:U.number;case"boolean":return U.boolean;case"function":return U.function;case"bigint":return U.bigint;case"symbol":return U.symbol;case"object":return Array.isArray(t)?U.array:t===null?U.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?U.promise:typeof Map<"u"&&t instanceof Map?U.map:typeof Set<"u"&&t instanceof Set?U.set:typeof Date<"u"&&t instanceof Date?U.date:U.object;default:return U.unknown}},T=le.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class xr extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};const r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=e}format(e){const r=e||function(s){return s.message},n={_errors:[]},i=s=>{for(const a of s.issues)if(a.code==="invalid_union")a.unionErrors.map(i);else if(a.code==="invalid_return_type")i(a.returnTypeError);else if(a.code==="invalid_arguments")i(a.argumentsError);else if(a.path.length===0)n._errors.push(r(a));else{let o=n,c=0;for(;c<a.path.length;){const u=a.path[c];c===a.path.length-1?(o[u]=o[u]||{_errors:[]},o[u]._errors.push(r(a))):o[u]=o[u]||{_errors:[]},o=o[u],c++}}};return i(this),n}static assert(e){if(!(e instanceof xr))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,le.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=r=>r.message){const r={},n=[];for(const i of this.issues)if(i.path.length>0){const s=i.path[0];r[s]=r[s]||[],r[s].push(e(i))}else n.push(e(i));return{formErrors:n,fieldErrors:r}}get formErrors(){return this.flatten()}}xr.create=t=>new xr(t);const Bc=(t,e)=>{let r;switch(t.code){case T.invalid_type:t.received===U.undefined?r="Required":r=`Expected ${t.expected}, received ${t.received}`;break;case T.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(t.expected,le.jsonStringifyReplacer)}`;break;case T.unrecognized_keys:r=`Unrecognized key(s) in object: ${le.joinValues(t.keys,", ")}`;break;case T.invalid_union:r="Invalid input";break;case T.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${le.joinValues(t.options)}`;break;case T.invalid_enum_value:r=`Invalid enum value. Expected ${le.joinValues(t.options)}, received '${t.received}'`;break;case T.invalid_arguments:r="Invalid function arguments";break;case T.invalid_return_type:r="Invalid function return type";break;case T.invalid_date:r="Invalid date";break;case T.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(r=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(r=`${r} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?r=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?r=`Invalid input: must end with "${t.validation.endsWith}"`:le.assertNever(t.validation):t.validation!=="regex"?r=`Invalid ${t.validation}`:r="Invalid";break;case T.too_small:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="bigint"?r=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:r="Invalid input";break;case T.too_big:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?r=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:r="Invalid input";break;case T.custom:r="Invalid input";break;case T.invalid_intersection_types:r="Intersection results could not be merged";break;case T.not_multiple_of:r=`Number must be a multiple of ${t.multipleOf}`;break;case T.not_finite:r="Number must be finite";break;default:r=e.defaultError,le.assertNever(t)}return{message:r}};let hx=Bc;function fx(){return hx}const mx=t=>{const{data:e,path:r,errorMaps:n,issueData:i}=t,s=[...r,...i.path||[]],a={...i,path:s};if(i.message!==void 0)return{...i,path:s,message:i.message};let o="";const c=n.filter(u=>!!u).slice().reverse();for(const u of c)o=u(a,{data:e,defaultError:o}).message;return{...i,path:s,message:o}};function I(t,e){const r=fx(),n=mx({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,r,r===Bc?void 0:Bc].filter(i=>!!i)});t.common.issues.push(n)}class xt{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,r){const n=[];for(const i of r){if(i.status==="aborted")return X;i.status==="dirty"&&e.dirty(),n.push(i.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,r){const n=[];for(const i of r){const s=await i.key,a=await i.value;n.push({key:s,value:a})}return xt.mergeObjectSync(e,n)}static mergeObjectSync(e,r){const n={};for(const i of r){const{key:s,value:a}=i;if(s.status==="aborted"||a.status==="aborted")return X;s.status==="dirty"&&e.dirty(),a.status==="dirty"&&e.dirty(),s.value!=="__proto__"&&(typeof a.value<"u"||i.alwaysSet)&&(n[s.value]=a.value)}return{status:e.value,value:n}}}const X=Object.freeze({status:"aborted"}),Zi=t=>({status:"dirty",value:t}),Rt=t=>({status:"valid",value:t}),Wh=t=>t.status==="aborted",qh=t=>t.status==="dirty",wi=t=>t.status==="valid",co=t=>typeof Promise<"u"&&t instanceof Promise;var B;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(B||(B={}));class Yr{constructor(e,r,n,i){this._cachedPath=[],this.parent=e,this.data=r,this._path=n,this._key=i}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const Gh=(t,e)=>{if(wi(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const r=new xr(t.common.issues);return this._error=r,this._error}}};function ie(t){if(!t)return{};const{errorMap:e,invalid_type_error:r,required_error:n,description:i}=t;if(e&&(r||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:i}:{errorMap:(a,o)=>{const{message:c}=t;return a.code==="invalid_enum_value"?{message:c??o.defaultError}:typeof o.data>"u"?{message:c??n??o.defaultError}:a.code!=="invalid_type"?{message:o.defaultError}:{message:c??r??o.defaultError}},description:i}}class oe{get description(){return this._def.description}_getType(e){return Ar(e.data)}_getOrReturnCtx(e,r){return r||{common:e.parent.common,data:e.data,parsedType:Ar(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new xt,ctx:{common:e.parent.common,data:e.data,parsedType:Ar(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const r=this._parse(e);if(co(r))throw new Error("Synchronous parse encountered promise.");return r}_parseAsync(e){const r=this._parse(e);return Promise.resolve(r)}parse(e,r){const n=this.safeParse(e,r);if(n.success)return n.data;throw n.error}safeParse(e,r){const n={common:{issues:[],async:(r==null?void 0:r.async)??!1,contextualErrorMap:r==null?void 0:r.errorMap},path:(r==null?void 0:r.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Ar(e)},i=this._parseSync({data:e,path:n.path,parent:n});return Gh(n,i)}"~validate"(e){var n,i;const r={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Ar(e)};if(!this["~standard"].async)try{const s=this._parseSync({data:e,path:[],parent:r});return wi(s)?{value:s.value}:{issues:r.common.issues}}catch(s){(i=(n=s==null?void 0:s.message)==null?void 0:n.toLowerCase())!=null&&i.includes("encountered")&&(this["~standard"].async=!0),r.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:r}).then(s=>wi(s)?{value:s.value}:{issues:r.common.issues})}async parseAsync(e,r){const n=await this.safeParseAsync(e,r);if(n.success)return n.data;throw n.error}async safeParseAsync(e,r){const n={common:{issues:[],contextualErrorMap:r==null?void 0:r.errorMap,async:!0},path:(r==null?void 0:r.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Ar(e)},i=this._parse({data:e,path:n.path,parent:n}),s=await(co(i)?i:Promise.resolve(i));return Gh(n,s)}refine(e,r){const n=i=>typeof r=="string"||typeof r>"u"?{message:r}:typeof r=="function"?r(i):r;return this._refinement((i,s)=>{const a=e(i),o=()=>s.addIssue({code:T.custom,...n(i)});return typeof Promise<"u"&&a instanceof Promise?a.then(c=>c?!0:(o(),!1)):a?!0:(o(),!1)})}refinement(e,r){return this._refinement((n,i)=>e(n)?!0:(i.addIssue(typeof r=="function"?r(n,i):r),!1))}_refinement(e){return new bi({schema:this,typeName:ee.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:r=>this["~validate"](r)}}optional(){return Gr.create(this,this._def)}nullable(){return ki.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return rr.create(this)}promise(){return mo.create(this,this._def)}or(e){return ho.create([this,e],this._def)}and(e){return fo.create(this,e,this._def)}transform(e){return new bi({...ie(this._def),schema:this,typeName:ee.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const r=typeof e=="function"?e:()=>e;return new zc({...ie(this._def),innerType:this,defaultValue:r,typeName:ee.ZodDefault})}brand(){return new $x({typeName:ee.ZodBranded,type:this,...ie(this._def)})}catch(e){const r=typeof e=="function"?e:()=>e;return new Hc({...ie(this._def),innerType:this,catchValue:r,typeName:ee.ZodCatch})}describe(e){const r=this.constructor;return new r({...this._def,description:e})}pipe(e){return ad.create(this,e)}readonly(){return Wc.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const px=/^c[^\s-]{8,}$/i,gx=/^[0-9a-z]+$/,vx=/^[0-9A-HJKMNP-TV-Z]{26}$/i,yx=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,wx=/^[a-z0-9_-]{21}$/i,xx=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,_x=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,bx=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,kx="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let Ul;const Sx=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,jx=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,Nx=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,Ex=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,Cx=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,Tx=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,ug="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",Ax=new RegExp(`^${ug}$`);function dg(t){let e="[0-5]\\d";t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`);const r=t.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${r}`}function Ox(t){return new RegExp(`^${dg(t)}$`)}function Rx(t){let e=`${ug}T${dg(t)}`;const r=[];return r.push(t.local?"Z?":"Z"),t.offset&&r.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${r.join("|")})`,new RegExp(`^${e}$`)}function Px(t,e){return!!((e==="v4"||!e)&&Sx.test(t)||(e==="v6"||!e)&&Nx.test(t))}function Ix(t,e){if(!xx.test(t))return!1;try{const[r]=t.split(".");if(!r)return!1;const n=r.replace(/-/g,"+").replace(/_/g,"/").padEnd(r.length+(4-r.length%4)%4,"="),i=JSON.parse(atob(n));return!(typeof i!="object"||i===null||"typ"in i&&(i==null?void 0:i.typ)!=="JWT"||!i.alg||e&&i.alg!==e)}catch{return!1}}function Dx(t,e){return!!((e==="v4"||!e)&&jx.test(t)||(e==="v6"||!e)&&Ex.test(t))}class Mr extends oe{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==U.string){const s=this._getOrReturnCtx(e);return I(s,{code:T.invalid_type,expected:U.string,received:s.parsedType}),X}const n=new xt;let i;for(const s of this._def.checks)if(s.kind==="min")e.data.length<s.value&&(i=this._getOrReturnCtx(e,i),I(i,{code:T.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),n.dirty());else if(s.kind==="max")e.data.length>s.value&&(i=this._getOrReturnCtx(e,i),I(i,{code:T.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),n.dirty());else if(s.kind==="length"){const a=e.data.length>s.value,o=e.data.length<s.value;(a||o)&&(i=this._getOrReturnCtx(e,i),a?I(i,{code:T.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}):o&&I(i,{code:T.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}),n.dirty())}else if(s.kind==="email")bx.test(e.data)||(i=this._getOrReturnCtx(e,i),I(i,{validation:"email",code:T.invalid_string,message:s.message}),n.dirty());else if(s.kind==="emoji")Ul||(Ul=new RegExp(kx,"u")),Ul.test(e.data)||(i=this._getOrReturnCtx(e,i),I(i,{validation:"emoji",code:T.invalid_string,message:s.message}),n.dirty());else if(s.kind==="uuid")yx.test(e.data)||(i=this._getOrReturnCtx(e,i),I(i,{validation:"uuid",code:T.invalid_string,message:s.message}),n.dirty());else if(s.kind==="nanoid")wx.test(e.data)||(i=this._getOrReturnCtx(e,i),I(i,{validation:"nanoid",code:T.invalid_string,message:s.message}),n.dirty());else if(s.kind==="cuid")px.test(e.data)||(i=this._getOrReturnCtx(e,i),I(i,{validation:"cuid",code:T.invalid_string,message:s.message}),n.dirty());else if(s.kind==="cuid2")gx.test(e.data)||(i=this._getOrReturnCtx(e,i),I(i,{validation:"cuid2",code:T.invalid_string,message:s.message}),n.dirty());else if(s.kind==="ulid")vx.test(e.data)||(i=this._getOrReturnCtx(e,i),I(i,{validation:"ulid",code:T.invalid_string,message:s.message}),n.dirty());else if(s.kind==="url")try{new URL(e.data)}catch{i=this._getOrReturnCtx(e,i),I(i,{validation:"url",code:T.invalid_string,message:s.message}),n.dirty()}else s.kind==="regex"?(s.regex.lastIndex=0,s.regex.test(e.data)||(i=this._getOrReturnCtx(e,i),I(i,{validation:"regex",code:T.invalid_string,message:s.message}),n.dirty())):s.kind==="trim"?e.data=e.data.trim():s.kind==="includes"?e.data.includes(s.value,s.position)||(i=this._getOrReturnCtx(e,i),I(i,{code:T.invalid_string,validation:{includes:s.value,position:s.position},message:s.message}),n.dirty()):s.kind==="toLowerCase"?e.data=e.data.toLowerCase():s.kind==="toUpperCase"?e.data=e.data.toUpperCase():s.kind==="startsWith"?e.data.startsWith(s.value)||(i=this._getOrReturnCtx(e,i),I(i,{code:T.invalid_string,validation:{startsWith:s.value},message:s.message}),n.dirty()):s.kind==="endsWith"?e.data.endsWith(s.value)||(i=this._getOrReturnCtx(e,i),I(i,{code:T.invalid_string,validation:{endsWith:s.value},message:s.message}),n.dirty()):s.kind==="datetime"?Rx(s).test(e.data)||(i=this._getOrReturnCtx(e,i),I(i,{code:T.invalid_string,validation:"datetime",message:s.message}),n.dirty()):s.kind==="date"?Ax.test(e.data)||(i=this._getOrReturnCtx(e,i),I(i,{code:T.invalid_string,validation:"date",message:s.message}),n.dirty()):s.kind==="time"?Ox(s).test(e.data)||(i=this._getOrReturnCtx(e,i),I(i,{code:T.invalid_string,validation:"time",message:s.message}),n.dirty()):s.kind==="duration"?_x.test(e.data)||(i=this._getOrReturnCtx(e,i),I(i,{validation:"duration",code:T.invalid_string,message:s.message}),n.dirty()):s.kind==="ip"?Px(e.data,s.version)||(i=this._getOrReturnCtx(e,i),I(i,{validation:"ip",code:T.invalid_string,message:s.message}),n.dirty()):s.kind==="jwt"?Ix(e.data,s.alg)||(i=this._getOrReturnCtx(e,i),I(i,{validation:"jwt",code:T.invalid_string,message:s.message}),n.dirty()):s.kind==="cidr"?Dx(e.data,s.version)||(i=this._getOrReturnCtx(e,i),I(i,{validation:"cidr",code:T.invalid_string,message:s.message}),n.dirty()):s.kind==="base64"?Cx.test(e.data)||(i=this._getOrReturnCtx(e,i),I(i,{validation:"base64",code:T.invalid_string,message:s.message}),n.dirty()):s.kind==="base64url"?Tx.test(e.data)||(i=this._getOrReturnCtx(e,i),I(i,{validation:"base64url",code:T.invalid_string,message:s.message}),n.dirty()):le.assertNever(s);return{status:n.value,value:e.data}}_regex(e,r,n){return this.refinement(i=>e.test(i),{validation:r,code:T.invalid_string,...B.errToObj(n)})}_addCheck(e){return new Mr({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...B.errToObj(e)})}url(e){return this._addCheck({kind:"url",...B.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...B.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...B.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...B.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...B.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...B.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...B.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...B.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...B.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...B.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...B.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...B.errToObj(e)})}datetime(e){return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(e==null?void 0:e.offset)??!1,local:(e==null?void 0:e.local)??!1,...B.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...B.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...B.errToObj(e)})}regex(e,r){return this._addCheck({kind:"regex",regex:e,...B.errToObj(r)})}includes(e,r){return this._addCheck({kind:"includes",value:e,position:r==null?void 0:r.position,...B.errToObj(r==null?void 0:r.message)})}startsWith(e,r){return this._addCheck({kind:"startsWith",value:e,...B.errToObj(r)})}endsWith(e,r){return this._addCheck({kind:"endsWith",value:e,...B.errToObj(r)})}min(e,r){return this._addCheck({kind:"min",value:e,...B.errToObj(r)})}max(e,r){return this._addCheck({kind:"max",value:e,...B.errToObj(r)})}length(e,r){return this._addCheck({kind:"length",value:e,...B.errToObj(r)})}nonempty(e){return this.min(1,B.errToObj(e))}trim(){return new Mr({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Mr({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Mr({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxLength(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}}Mr.create=t=>new Mr({checks:[],typeName:ee.ZodString,coerce:(t==null?void 0:t.coerce)??!1,...ie(t)});function Lx(t,e){const r=(t.toString().split(".")[1]||"").length,n=(e.toString().split(".")[1]||"").length,i=r>n?r:n,s=Number.parseInt(t.toFixed(i).replace(".","")),a=Number.parseInt(e.toFixed(i).replace(".",""));return s%a/10**i}class xi extends oe{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==U.number){const s=this._getOrReturnCtx(e);return I(s,{code:T.invalid_type,expected:U.number,received:s.parsedType}),X}let n;const i=new xt;for(const s of this._def.checks)s.kind==="int"?le.isInteger(e.data)||(n=this._getOrReturnCtx(e,n),I(n,{code:T.invalid_type,expected:"integer",received:"float",message:s.message}),i.dirty()):s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(n=this._getOrReturnCtx(e,n),I(n,{code:T.too_small,minimum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),i.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(n=this._getOrReturnCtx(e,n),I(n,{code:T.too_big,maximum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),i.dirty()):s.kind==="multipleOf"?Lx(e.data,s.value)!==0&&(n=this._getOrReturnCtx(e,n),I(n,{code:T.not_multiple_of,multipleOf:s.value,message:s.message}),i.dirty()):s.kind==="finite"?Number.isFinite(e.data)||(n=this._getOrReturnCtx(e,n),I(n,{code:T.not_finite,message:s.message}),i.dirty()):le.assertNever(s);return{status:i.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,B.toString(r))}gt(e,r){return this.setLimit("min",e,!1,B.toString(r))}lte(e,r){return this.setLimit("max",e,!0,B.toString(r))}lt(e,r){return this.setLimit("max",e,!1,B.toString(r))}setLimit(e,r,n,i){return new xi({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:B.toString(i)}]})}_addCheck(e){return new xi({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:B.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:B.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:B.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:B.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:B.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:B.toString(r)})}finite(e){return this._addCheck({kind:"finite",message:B.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:B.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:B.toString(e)})}get minValue(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&le.isInteger(e.value))}get isFinite(){let e=null,r=null;for(const n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(r===null||n.value>r)&&(r=n.value):n.kind==="max"&&(e===null||n.value<e)&&(e=n.value)}return Number.isFinite(r)&&Number.isFinite(e)}}xi.create=t=>new xi({checks:[],typeName:ee.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...ie(t)});class Cs extends oe{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==U.bigint)return this._getInvalidInput(e);let n;const i=new xt;for(const s of this._def.checks)s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(n=this._getOrReturnCtx(e,n),I(n,{code:T.too_small,type:"bigint",minimum:s.value,inclusive:s.inclusive,message:s.message}),i.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(n=this._getOrReturnCtx(e,n),I(n,{code:T.too_big,type:"bigint",maximum:s.value,inclusive:s.inclusive,message:s.message}),i.dirty()):s.kind==="multipleOf"?e.data%s.value!==BigInt(0)&&(n=this._getOrReturnCtx(e,n),I(n,{code:T.not_multiple_of,multipleOf:s.value,message:s.message}),i.dirty()):le.assertNever(s);return{status:i.value,value:e.data}}_getInvalidInput(e){const r=this._getOrReturnCtx(e);return I(r,{code:T.invalid_type,expected:U.bigint,received:r.parsedType}),X}gte(e,r){return this.setLimit("min",e,!0,B.toString(r))}gt(e,r){return this.setLimit("min",e,!1,B.toString(r))}lte(e,r){return this.setLimit("max",e,!0,B.toString(r))}lt(e,r){return this.setLimit("max",e,!1,B.toString(r))}setLimit(e,r,n,i){return new Cs({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:B.toString(i)}]})}_addCheck(e){return new Cs({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:B.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:B.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:B.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:B.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:B.toString(r)})}get minValue(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}}Cs.create=t=>new Cs({checks:[],typeName:ee.ZodBigInt,coerce:(t==null?void 0:t.coerce)??!1,...ie(t)});class Kh extends oe{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==U.boolean){const n=this._getOrReturnCtx(e);return I(n,{code:T.invalid_type,expected:U.boolean,received:n.parsedType}),X}return Rt(e.data)}}Kh.create=t=>new Kh({typeName:ee.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...ie(t)});class uo extends oe{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==U.date){const s=this._getOrReturnCtx(e);return I(s,{code:T.invalid_type,expected:U.date,received:s.parsedType}),X}if(Number.isNaN(e.data.getTime())){const s=this._getOrReturnCtx(e);return I(s,{code:T.invalid_date}),X}const n=new xt;let i;for(const s of this._def.checks)s.kind==="min"?e.data.getTime()<s.value&&(i=this._getOrReturnCtx(e,i),I(i,{code:T.too_small,message:s.message,inclusive:!0,exact:!1,minimum:s.value,type:"date"}),n.dirty()):s.kind==="max"?e.data.getTime()>s.value&&(i=this._getOrReturnCtx(e,i),I(i,{code:T.too_big,message:s.message,inclusive:!0,exact:!1,maximum:s.value,type:"date"}),n.dirty()):le.assertNever(s);return{status:n.value,value:new Date(e.data.getTime())}}_addCheck(e){return new uo({...this._def,checks:[...this._def.checks,e]})}min(e,r){return this._addCheck({kind:"min",value:e.getTime(),message:B.toString(r)})}max(e,r){return this._addCheck({kind:"max",value:e.getTime(),message:B.toString(r)})}get minDate(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e!=null?new Date(e):null}}uo.create=t=>new uo({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:ee.ZodDate,...ie(t)});class Jh extends oe{_parse(e){if(this._getType(e)!==U.symbol){const n=this._getOrReturnCtx(e);return I(n,{code:T.invalid_type,expected:U.symbol,received:n.parsedType}),X}return Rt(e.data)}}Jh.create=t=>new Jh({typeName:ee.ZodSymbol,...ie(t)});class Yh extends oe{_parse(e){if(this._getType(e)!==U.undefined){const n=this._getOrReturnCtx(e);return I(n,{code:T.invalid_type,expected:U.undefined,received:n.parsedType}),X}return Rt(e.data)}}Yh.create=t=>new Yh({typeName:ee.ZodUndefined,...ie(t)});class Zh extends oe{_parse(e){if(this._getType(e)!==U.null){const n=this._getOrReturnCtx(e);return I(n,{code:T.invalid_type,expected:U.null,received:n.parsedType}),X}return Rt(e.data)}}Zh.create=t=>new Zh({typeName:ee.ZodNull,...ie(t)});class Qh extends oe{constructor(){super(...arguments),this._any=!0}_parse(e){return Rt(e.data)}}Qh.create=t=>new Qh({typeName:ee.ZodAny,...ie(t)});class Xh extends oe{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Rt(e.data)}}Xh.create=t=>new Xh({typeName:ee.ZodUnknown,...ie(t)});class Zr extends oe{_parse(e){const r=this._getOrReturnCtx(e);return I(r,{code:T.invalid_type,expected:U.never,received:r.parsedType}),X}}Zr.create=t=>new Zr({typeName:ee.ZodNever,...ie(t)});class ef extends oe{_parse(e){if(this._getType(e)!==U.undefined){const n=this._getOrReturnCtx(e);return I(n,{code:T.invalid_type,expected:U.void,received:n.parsedType}),X}return Rt(e.data)}}ef.create=t=>new ef({typeName:ee.ZodVoid,...ie(t)});class rr extends oe{_parse(e){const{ctx:r,status:n}=this._processInputParams(e),i=this._def;if(r.parsedType!==U.array)return I(r,{code:T.invalid_type,expected:U.array,received:r.parsedType}),X;if(i.exactLength!==null){const a=r.data.length>i.exactLength.value,o=r.data.length<i.exactLength.value;(a||o)&&(I(r,{code:a?T.too_big:T.too_small,minimum:o?i.exactLength.value:void 0,maximum:a?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),n.dirty())}if(i.minLength!==null&&r.data.length<i.minLength.value&&(I(r,{code:T.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),n.dirty()),i.maxLength!==null&&r.data.length>i.maxLength.value&&(I(r,{code:T.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),n.dirty()),r.common.async)return Promise.all([...r.data].map((a,o)=>i.type._parseAsync(new Yr(r,a,r.path,o)))).then(a=>xt.mergeArray(n,a));const s=[...r.data].map((a,o)=>i.type._parseSync(new Yr(r,a,r.path,o)));return xt.mergeArray(n,s)}get element(){return this._def.type}min(e,r){return new rr({...this._def,minLength:{value:e,message:B.toString(r)}})}max(e,r){return new rr({...this._def,maxLength:{value:e,message:B.toString(r)}})}length(e,r){return new rr({...this._def,exactLength:{value:e,message:B.toString(r)}})}nonempty(e){return this.min(1,e)}}rr.create=(t,e)=>new rr({type:t,minLength:null,maxLength:null,exactLength:null,typeName:ee.ZodArray,...ie(e)});function Bn(t){if(t instanceof Pe){const e={};for(const r in t.shape){const n=t.shape[r];e[r]=Gr.create(Bn(n))}return new Pe({...t._def,shape:()=>e})}else return t instanceof rr?new rr({...t._def,type:Bn(t.element)}):t instanceof Gr?Gr.create(Bn(t.unwrap())):t instanceof ki?ki.create(Bn(t.unwrap())):t instanceof Cn?Cn.create(t.items.map(e=>Bn(e))):t}class Pe extends oe{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),r=le.objectKeys(e);return this._cached={shape:e,keys:r},this._cached}_parse(e){if(this._getType(e)!==U.object){const u=this._getOrReturnCtx(e);return I(u,{code:T.invalid_type,expected:U.object,received:u.parsedType}),X}const{status:n,ctx:i}=this._processInputParams(e),{shape:s,keys:a}=this._getCached(),o=[];if(!(this._def.catchall instanceof Zr&&this._def.unknownKeys==="strip"))for(const u in i.data)a.includes(u)||o.push(u);const c=[];for(const u of a){const d=s[u],f=i.data[u];c.push({key:{status:"valid",value:u},value:d._parse(new Yr(i,f,i.path,u)),alwaysSet:u in i.data})}if(this._def.catchall instanceof Zr){const u=this._def.unknownKeys;if(u==="passthrough")for(const d of o)c.push({key:{status:"valid",value:d},value:{status:"valid",value:i.data[d]}});else if(u==="strict")o.length>0&&(I(i,{code:T.unrecognized_keys,keys:o}),n.dirty());else if(u!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const u=this._def.catchall;for(const d of o){const f=i.data[d];c.push({key:{status:"valid",value:d},value:u._parse(new Yr(i,f,i.path,d)),alwaysSet:d in i.data})}}return i.common.async?Promise.resolve().then(async()=>{const u=[];for(const d of c){const f=await d.key,m=await d.value;u.push({key:f,value:m,alwaysSet:d.alwaysSet})}return u}).then(u=>xt.mergeObjectSync(n,u)):xt.mergeObjectSync(n,c)}get shape(){return this._def.shape()}strict(e){return B.errToObj,new Pe({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(r,n)=>{var s,a;const i=((a=(s=this._def).errorMap)==null?void 0:a.call(s,r,n).message)??n.defaultError;return r.code==="unrecognized_keys"?{message:B.errToObj(e).message??i}:{message:i}}}:{}})}strip(){return new Pe({...this._def,unknownKeys:"strip"})}passthrough(){return new Pe({...this._def,unknownKeys:"passthrough"})}extend(e){return new Pe({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new Pe({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:ee.ZodObject})}setKey(e,r){return this.augment({[e]:r})}catchall(e){return new Pe({...this._def,catchall:e})}pick(e){const r={};for(const n of le.objectKeys(e))e[n]&&this.shape[n]&&(r[n]=this.shape[n]);return new Pe({...this._def,shape:()=>r})}omit(e){const r={};for(const n of le.objectKeys(this.shape))e[n]||(r[n]=this.shape[n]);return new Pe({...this._def,shape:()=>r})}deepPartial(){return Bn(this)}partial(e){const r={};for(const n of le.objectKeys(this.shape)){const i=this.shape[n];e&&!e[n]?r[n]=i:r[n]=i.optional()}return new Pe({...this._def,shape:()=>r})}required(e){const r={};for(const n of le.objectKeys(this.shape))if(e&&!e[n])r[n]=this.shape[n];else{let s=this.shape[n];for(;s instanceof Gr;)s=s._def.innerType;r[n]=s}return new Pe({...this._def,shape:()=>r})}keyof(){return hg(le.objectKeys(this.shape))}}Pe.create=(t,e)=>new Pe({shape:()=>t,unknownKeys:"strip",catchall:Zr.create(),typeName:ee.ZodObject,...ie(e)});Pe.strictCreate=(t,e)=>new Pe({shape:()=>t,unknownKeys:"strict",catchall:Zr.create(),typeName:ee.ZodObject,...ie(e)});Pe.lazycreate=(t,e)=>new Pe({shape:t,unknownKeys:"strip",catchall:Zr.create(),typeName:ee.ZodObject,...ie(e)});class ho extends oe{_parse(e){const{ctx:r}=this._processInputParams(e),n=this._def.options;function i(s){for(const o of s)if(o.result.status==="valid")return o.result;for(const o of s)if(o.result.status==="dirty")return r.common.issues.push(...o.ctx.common.issues),o.result;const a=s.map(o=>new xr(o.ctx.common.issues));return I(r,{code:T.invalid_union,unionErrors:a}),X}if(r.common.async)return Promise.all(n.map(async s=>{const a={...r,common:{...r.common,issues:[]},parent:null};return{result:await s._parseAsync({data:r.data,path:r.path,parent:a}),ctx:a}})).then(i);{let s;const a=[];for(const c of n){const u={...r,common:{...r.common,issues:[]},parent:null},d=c._parseSync({data:r.data,path:r.path,parent:u});if(d.status==="valid")return d;d.status==="dirty"&&!s&&(s={result:d,ctx:u}),u.common.issues.length&&a.push(u.common.issues)}if(s)return r.common.issues.push(...s.ctx.common.issues),s.result;const o=a.map(c=>new xr(c));return I(r,{code:T.invalid_union,unionErrors:o}),X}}get options(){return this._def.options}}ho.create=(t,e)=>new ho({options:t,typeName:ee.ZodUnion,...ie(e)});function Vc(t,e){const r=Ar(t),n=Ar(e);if(t===e)return{valid:!0,data:t};if(r===U.object&&n===U.object){const i=le.objectKeys(e),s=le.objectKeys(t).filter(o=>i.indexOf(o)!==-1),a={...t,...e};for(const o of s){const c=Vc(t[o],e[o]);if(!c.valid)return{valid:!1};a[o]=c.data}return{valid:!0,data:a}}else if(r===U.array&&n===U.array){if(t.length!==e.length)return{valid:!1};const i=[];for(let s=0;s<t.length;s++){const a=t[s],o=e[s],c=Vc(a,o);if(!c.valid)return{valid:!1};i.push(c.data)}return{valid:!0,data:i}}else return r===U.date&&n===U.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class fo extends oe{_parse(e){const{status:r,ctx:n}=this._processInputParams(e),i=(s,a)=>{if(Wh(s)||Wh(a))return X;const o=Vc(s.value,a.value);return o.valid?((qh(s)||qh(a))&&r.dirty(),{status:r.value,value:o.data}):(I(n,{code:T.invalid_intersection_types}),X)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([s,a])=>i(s,a)):i(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}}fo.create=(t,e,r)=>new fo({left:t,right:e,typeName:ee.ZodIntersection,...ie(r)});class Cn extends oe{_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==U.array)return I(n,{code:T.invalid_type,expected:U.array,received:n.parsedType}),X;if(n.data.length<this._def.items.length)return I(n,{code:T.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),X;!this._def.rest&&n.data.length>this._def.items.length&&(I(n,{code:T.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());const s=[...n.data].map((a,o)=>{const c=this._def.items[o]||this._def.rest;return c?c._parse(new Yr(n,a,n.path,o)):null}).filter(a=>!!a);return n.common.async?Promise.all(s).then(a=>xt.mergeArray(r,a)):xt.mergeArray(r,s)}get items(){return this._def.items}rest(e){return new Cn({...this._def,rest:e})}}Cn.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Cn({items:t,typeName:ee.ZodTuple,rest:null,...ie(e)})};class tf extends oe{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==U.map)return I(n,{code:T.invalid_type,expected:U.map,received:n.parsedType}),X;const i=this._def.keyType,s=this._def.valueType,a=[...n.data.entries()].map(([o,c],u)=>({key:i._parse(new Yr(n,o,n.path,[u,"key"])),value:s._parse(new Yr(n,c,n.path,[u,"value"]))}));if(n.common.async){const o=new Map;return Promise.resolve().then(async()=>{for(const c of a){const u=await c.key,d=await c.value;if(u.status==="aborted"||d.status==="aborted")return X;(u.status==="dirty"||d.status==="dirty")&&r.dirty(),o.set(u.value,d.value)}return{status:r.value,value:o}})}else{const o=new Map;for(const c of a){const u=c.key,d=c.value;if(u.status==="aborted"||d.status==="aborted")return X;(u.status==="dirty"||d.status==="dirty")&&r.dirty(),o.set(u.value,d.value)}return{status:r.value,value:o}}}}tf.create=(t,e,r)=>new tf({valueType:e,keyType:t,typeName:ee.ZodMap,...ie(r)});class Ts extends oe{_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==U.set)return I(n,{code:T.invalid_type,expected:U.set,received:n.parsedType}),X;const i=this._def;i.minSize!==null&&n.data.size<i.minSize.value&&(I(n,{code:T.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),r.dirty()),i.maxSize!==null&&n.data.size>i.maxSize.value&&(I(n,{code:T.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),r.dirty());const s=this._def.valueType;function a(c){const u=new Set;for(const d of c){if(d.status==="aborted")return X;d.status==="dirty"&&r.dirty(),u.add(d.value)}return{status:r.value,value:u}}const o=[...n.data.values()].map((c,u)=>s._parse(new Yr(n,c,n.path,u)));return n.common.async?Promise.all(o).then(c=>a(c)):a(o)}min(e,r){return new Ts({...this._def,minSize:{value:e,message:B.toString(r)}})}max(e,r){return new Ts({...this._def,maxSize:{value:e,message:B.toString(r)}})}size(e,r){return this.min(e,r).max(e,r)}nonempty(e){return this.min(1,e)}}Ts.create=(t,e)=>new Ts({valueType:t,minSize:null,maxSize:null,typeName:ee.ZodSet,...ie(e)});class rf extends oe{get schema(){return this._def.getter()}_parse(e){const{ctx:r}=this._processInputParams(e);return this._def.getter()._parse({data:r.data,path:r.path,parent:r})}}rf.create=(t,e)=>new rf({getter:t,typeName:ee.ZodLazy,...ie(e)});class nf extends oe{_parse(e){if(e.data!==this._def.value){const r=this._getOrReturnCtx(e);return I(r,{received:r.data,code:T.invalid_literal,expected:this._def.value}),X}return{status:"valid",value:e.data}}get value(){return this._def.value}}nf.create=(t,e)=>new nf({value:t,typeName:ee.ZodLiteral,...ie(e)});function hg(t,e){return new _i({values:t,typeName:ee.ZodEnum,...ie(e)})}class _i extends oe{_parse(e){if(typeof e.data!="string"){const r=this._getOrReturnCtx(e),n=this._def.values;return I(r,{expected:le.joinValues(n),received:r.parsedType,code:T.invalid_type}),X}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){const r=this._getOrReturnCtx(e),n=this._def.values;return I(r,{received:r.data,code:T.invalid_enum_value,options:n}),X}return Rt(e.data)}get options(){return this._def.values}get enum(){const e={};for(const r of this._def.values)e[r]=r;return e}get Values(){const e={};for(const r of this._def.values)e[r]=r;return e}get Enum(){const e={};for(const r of this._def.values)e[r]=r;return e}extract(e,r=this._def){return _i.create(e,{...this._def,...r})}exclude(e,r=this._def){return _i.create(this.options.filter(n=>!e.includes(n)),{...this._def,...r})}}_i.create=hg;class sf extends oe{_parse(e){const r=le.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==U.string&&n.parsedType!==U.number){const i=le.objectValues(r);return I(n,{expected:le.joinValues(i),received:n.parsedType,code:T.invalid_type}),X}if(this._cache||(this._cache=new Set(le.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){const i=le.objectValues(r);return I(n,{received:n.data,code:T.invalid_enum_value,options:i}),X}return Rt(e.data)}get enum(){return this._def.values}}sf.create=(t,e)=>new sf({values:t,typeName:ee.ZodNativeEnum,...ie(e)});class mo extends oe{unwrap(){return this._def.type}_parse(e){const{ctx:r}=this._processInputParams(e);if(r.parsedType!==U.promise&&r.common.async===!1)return I(r,{code:T.invalid_type,expected:U.promise,received:r.parsedType}),X;const n=r.parsedType===U.promise?r.data:Promise.resolve(r.data);return Rt(n.then(i=>this._def.type.parseAsync(i,{path:r.path,errorMap:r.common.contextualErrorMap})))}}mo.create=(t,e)=>new mo({type:t,typeName:ee.ZodPromise,...ie(e)});class bi extends oe{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===ee.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:r,ctx:n}=this._processInputParams(e),i=this._def.effect||null,s={addIssue:a=>{I(n,a),a.fatal?r.abort():r.dirty()},get path(){return n.path}};if(s.addIssue=s.addIssue.bind(s),i.type==="preprocess"){const a=i.transform(n.data,s);if(n.common.async)return Promise.resolve(a).then(async o=>{if(r.value==="aborted")return X;const c=await this._def.schema._parseAsync({data:o,path:n.path,parent:n});return c.status==="aborted"?X:c.status==="dirty"||r.value==="dirty"?Zi(c.value):c});{if(r.value==="aborted")return X;const o=this._def.schema._parseSync({data:a,path:n.path,parent:n});return o.status==="aborted"?X:o.status==="dirty"||r.value==="dirty"?Zi(o.value):o}}if(i.type==="refinement"){const a=o=>{const c=i.refinement(o,s);if(n.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return o};if(n.common.async===!1){const o=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return o.status==="aborted"?X:(o.status==="dirty"&&r.dirty(),a(o.value),{status:r.value,value:o.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(o=>o.status==="aborted"?X:(o.status==="dirty"&&r.dirty(),a(o.value).then(()=>({status:r.value,value:o.value}))))}if(i.type==="transform")if(n.common.async===!1){const a=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!wi(a))return X;const o=i.transform(a.value,s);if(o instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:o}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(a=>wi(a)?Promise.resolve(i.transform(a.value,s)).then(o=>({status:r.value,value:o})):X);le.assertNever(i)}}bi.create=(t,e,r)=>new bi({schema:t,typeName:ee.ZodEffects,effect:e,...ie(r)});bi.createWithPreprocess=(t,e,r)=>new bi({schema:e,effect:{type:"preprocess",transform:t},typeName:ee.ZodEffects,...ie(r)});class Gr extends oe{_parse(e){return this._getType(e)===U.undefined?Rt(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Gr.create=(t,e)=>new Gr({innerType:t,typeName:ee.ZodOptional,...ie(e)});class ki extends oe{_parse(e){return this._getType(e)===U.null?Rt(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}ki.create=(t,e)=>new ki({innerType:t,typeName:ee.ZodNullable,...ie(e)});class zc extends oe{_parse(e){const{ctx:r}=this._processInputParams(e);let n=r.data;return r.parsedType===U.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:r.path,parent:r})}removeDefault(){return this._def.innerType}}zc.create=(t,e)=>new zc({innerType:t,typeName:ee.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...ie(e)});class Hc extends oe{_parse(e){const{ctx:r}=this._processInputParams(e),n={...r,common:{...r.common,issues:[]}},i=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return co(i)?i.then(s=>({status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new xr(n.common.issues)},input:n.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new xr(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}}Hc.create=(t,e)=>new Hc({innerType:t,typeName:ee.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...ie(e)});class af extends oe{_parse(e){if(this._getType(e)!==U.nan){const n=this._getOrReturnCtx(e);return I(n,{code:T.invalid_type,expected:U.nan,received:n.parsedType}),X}return{status:"valid",value:e.data}}}af.create=t=>new af({typeName:ee.ZodNaN,...ie(t)});class $x extends oe{_parse(e){const{ctx:r}=this._processInputParams(e),n=r.data;return this._def.type._parse({data:n,path:r.path,parent:r})}unwrap(){return this._def.type}}class ad extends oe{_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.common.async)return(async()=>{const s=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return s.status==="aborted"?X:s.status==="dirty"?(r.dirty(),Zi(s.value)):this._def.out._parseAsync({data:s.value,path:n.path,parent:n})})();{const i=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return i.status==="aborted"?X:i.status==="dirty"?(r.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:n.path,parent:n})}}static create(e,r){return new ad({in:e,out:r,typeName:ee.ZodPipeline})}}class Wc extends oe{_parse(e){const r=this._def.innerType._parse(e),n=i=>(wi(i)&&(i.value=Object.freeze(i.value)),i);return co(r)?r.then(i=>n(i)):n(r)}unwrap(){return this._def.innerType}}Wc.create=(t,e)=>new Wc({innerType:t,typeName:ee.ZodReadonly,...ie(e)});var ee;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(ee||(ee={}));const Q=Mr.create,Mt=xi.create;Zr.create;const tt=rr.create,ir=Pe.create;ho.create;fo.create;Cn.create;const mr=_i.create;mo.create;Gr.create;ki.create;const Mx=ir({drug1:Q(),drug2:Q(),severity:mr(["minor","moderate","major","contraindicated"]),description:Q(),recommendation:Q()}),Ux=ir({medication:Q(),condition:Q(),severity:mr(["relative","absolute"]),description:Q(),recommendation:Q()}),Fx=ir({medication:Q(),dosage:Q(),frequency:Q(),duration:Q(),route:Q(),confidenceScore:Mt().min(0).max(100),rationale:Q(),monitoringRequired:tt(Q()),warnings:tt(Q())}),Bx=ir({medication:Q(),dosage:Q(),rationale:Q(),confidenceScore:Mt().min(0).max(100),considerations:tt(Q())}),Vx=ir({factor:Q(),severity:mr(["low","medium","high"]),description:Q(),mitigation:Q()}),zx=ir({overallRiskLevel:mr(["low","medium","high","critical"]),riskScore:Mt().min(0).max(100),summaryAssessment:Q(),primaryRecommendation:Fx,alternativeTreatments:tt(Bx),drugInteractions:tt(Mx),contraindications:tt(Ux),riskFactors:tt(Vx),lifestyleRecommendations:tt(Q()),followUpRecommendations:tt(Q()),labTestsRecommended:tt(Q()),analysisTimestamp:Q(),modelVersion:Q(),disclaimer:Q()});function Hx(t){const e=JSON.stringify(t);let r=0;for(let n=0;n<e.length;n++){const i=e.charCodeAt(n);r=(r<<5)-r+i,r=r&r}return`hash-${Math.abs(r).toString(16)}`}function Wx(){return`session-${Date.now()}-${Math.random().toString(36).substr(2,9)}`}function qx(t){switch(t){case"low":return"Low Risk";case"medium":return"Medium Risk";case"high":return"High Risk";case"critical":return"Critical Risk"}}var od={},po={},qc=function(t,e){return qc=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},qc(t,e)};function fg(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");qc(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var go=function(){return go=Object.assign||function(e){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},go.apply(this,arguments)};function Ai(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}function mg(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var o=t.length-1;o>=0;o--)(a=t[o])&&(s=(i<3?a(s):i>3?a(e,r,s):a(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s}function pg(t,e){return function(r,n){e(r,n,t)}}function gg(t,e,r,n,i,s){function a(v){if(v!==void 0&&typeof v!="function")throw new TypeError("Function expected");return v}for(var o=n.kind,c=o==="getter"?"get":o==="setter"?"set":"value",u=!e&&t?n.static?t:t.prototype:null,d=e||(u?Object.getOwnPropertyDescriptor(u,n.name):{}),f,m=!1,g=r.length-1;g>=0;g--){var y={};for(var w in n)y[w]=w==="access"?{}:n[w];for(var w in n.access)y.access[w]=n.access[w];y.addInitializer=function(v){if(m)throw new TypeError("Cannot add initializers after decoration has completed");s.push(a(v||null))};var b=(0,r[g])(o==="accessor"?{get:d.get,set:d.set}:d[c],y);if(o==="accessor"){if(b===void 0)continue;if(b===null||typeof b!="object")throw new TypeError("Object expected");(f=a(b.get))&&(d.get=f),(f=a(b.set))&&(d.set=f),(f=a(b.init))&&i.unshift(f)}else(f=a(b))&&(o==="field"?i.unshift(f):d[c]=f)}u&&Object.defineProperty(u,n.name,d),m=!0}function vg(t,e,r){for(var n=arguments.length>2,i=0;i<e.length;i++)r=n?e[i].call(t,r):e[i].call(t);return n?r:void 0}function yg(t){return typeof t=="symbol"?t:"".concat(t)}function wg(t,e,r){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(t,"name",{configurable:!0,value:r?"".concat(r," ",e):e})}function xg(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function $(t,e,r,n){function i(s){return s instanceof r?s:new r(function(a){a(s)})}return new(r||(r=Promise))(function(s,a){function o(d){try{u(n.next(d))}catch(f){a(f)}}function c(d){try{u(n.throw(d))}catch(f){a(f)}}function u(d){d.done?s(d.value):i(d.value).then(o,c)}u((n=n.apply(t,e||[])).next())})}function _g(t,e){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,a=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return a.next=o(0),a.throw=o(1),a.return=o(2),typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function o(u){return function(d){return c([u,d])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(r=0)),r;)try{if(n=1,i&&(s=u[0]&2?i.return:u[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,u[1])).done)return s;switch(i=0,s&&(u=[u[0]&2,s.value]),u[0]){case 0:case 1:s=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,i=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){r.label=u[1];break}if(u[0]===6&&r.label<s[1]){r.label=s[1],s=u;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(u);break}s[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r)}catch(d){u=[6,d],i=0}finally{n=s=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}var Zo=Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]};function bg(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Zo(e,t,r)}function vo(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function ld(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,s=[],a;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(o){a={error:o}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return s}function kg(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(ld(arguments[e]));return t}function Sg(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),i=0,e=0;e<r;e++)for(var s=arguments[e],a=0,o=s.length;a<o;a++,i++)n[i]=s[a];return n}function jg(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,s;n<i;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return t.concat(s||Array.prototype.slice.call(e))}function Si(t){return this instanceof Si?(this.v=t,this):new Si(t)}function Ng(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),i,s=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),o("next"),o("throw"),o("return",a),i[Symbol.asyncIterator]=function(){return this},i;function a(g){return function(y){return Promise.resolve(y).then(g,f)}}function o(g,y){n[g]&&(i[g]=function(w){return new Promise(function(b,v){s.push([g,w,b,v])>1||c(g,w)})},y&&(i[g]=y(i[g])))}function c(g,y){try{u(n[g](y))}catch(w){m(s[0][3],w)}}function u(g){g.value instanceof Si?Promise.resolve(g.value.v).then(d,f):m(s[0][2],g)}function d(g){c("next",g)}function f(g){c("throw",g)}function m(g,y){g(y),s.shift(),s.length&&c(s[0][0],s[0][1])}}function Eg(t){var e,r;return e={},n("next"),n("throw",function(i){throw i}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(i,s){e[i]=t[i]?function(a){return(r=!r)?{value:Si(t[i](a)),done:!1}:s?s(a):a}:s}}function Cg(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof vo=="function"?vo(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(s){r[s]=t[s]&&function(a){return new Promise(function(o,c){a=t[s](a),i(o,c,a.done,a.value)})}}function i(s,a,o,c){Promise.resolve(c).then(function(u){s({value:u,done:o})},a)}}function Tg(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}var Gx=Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e},Gc=function(t){return Gc=Object.getOwnPropertyNames||function(e){var r=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[r.length]=n);return r},Gc(t)};function Ag(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r=Gc(t),n=0;n<r.length;n++)r[n]!=="default"&&Zo(e,t,r[n]);return Gx(e,t),e}function Og(t){return t&&t.__esModule?t:{default:t}}function Rg(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)}function Pg(t,e,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(t,r):i?i.value=r:e.set(t,r),r}function Ig(t,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof t=="function"?e===t:t.has(e)}function Dg(t,e,r){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var n,i;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=e[Symbol.asyncDispose]}if(n===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=e[Symbol.dispose],r&&(i=n)}if(typeof n!="function")throw new TypeError("Object not disposable.");i&&(n=function(){try{i.call(this)}catch(s){return Promise.reject(s)}}),t.stack.push({value:e,dispose:n,async:r})}else r&&t.stack.push({async:!0});return e}var Kx=typeof SuppressedError=="function"?SuppressedError:function(t,e,r){var n=new Error(r);return n.name="SuppressedError",n.error=t,n.suppressed=e,n};function Lg(t){function e(s){t.error=t.hasError?new Kx(s,t.error,"An error was suppressed during disposal."):s,t.hasError=!0}var r,n=0;function i(){for(;r=t.stack.pop();)try{if(!r.async&&n===1)return n=0,t.stack.push(r),Promise.resolve().then(i);if(r.dispose){var s=r.dispose.call(r.value);if(r.async)return n|=2,Promise.resolve(s).then(i,function(a){return e(a),i()})}else n|=1}catch(a){e(a)}if(n===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return i()}function $g(t,e){return typeof t=="string"&&/^\.\.?\//.test(t)?t.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(r,n,i,s,a){return n?e?".jsx":".js":i&&(!s||!a)?r:i+s+"."+a.toLowerCase()+"js"}):t}const Jx={__extends:fg,__assign:go,__rest:Ai,__decorate:mg,__param:pg,__esDecorate:gg,__runInitializers:vg,__propKey:yg,__setFunctionName:wg,__metadata:xg,__awaiter:$,__generator:_g,__createBinding:Zo,__exportStar:bg,__values:vo,__read:ld,__spread:kg,__spreadArrays:Sg,__spreadArray:jg,__await:Si,__asyncGenerator:Ng,__asyncDelegator:Eg,__asyncValues:Cg,__makeTemplateObject:Tg,__importStar:Ag,__importDefault:Og,__classPrivateFieldGet:Rg,__classPrivateFieldSet:Pg,__classPrivateFieldIn:Ig,__addDisposableResource:Dg,__disposeResources:Lg,__rewriteRelativeImportExtension:$g},Yx=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:Dg,get __assign(){return go},__asyncDelegator:Eg,__asyncGenerator:Ng,__asyncValues:Cg,__await:Si,__awaiter:$,__classPrivateFieldGet:Rg,__classPrivateFieldIn:Ig,__classPrivateFieldSet:Pg,__createBinding:Zo,__decorate:mg,__disposeResources:Lg,__esDecorate:gg,__exportStar:bg,__extends:fg,__generator:_g,__importDefault:Og,__importStar:Ag,__makeTemplateObject:Tg,__metadata:xg,__param:pg,__propKey:yg,__read:ld,__rest:Ai,__rewriteRelativeImportExtension:$g,__runInitializers:vg,__setFunctionName:wg,__spread:kg,__spreadArray:jg,__spreadArrays:Sg,__values:vo,default:Jx},Symbol.toStringTag,{value:"Module"})),Zx=t=>t?(...e)=>t(...e):(...e)=>fetch(...e);let Qo=class extends Error{constructor(e,r="FunctionsError",n){super(e),this.name=r,this.context=n}},Mg=class extends Qo{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}},Kc=class extends Qo{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}},Jc=class extends Qo{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}};var yo;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(yo||(yo={}));class Qx{constructor(e,{headers:r={},customFetch:n,region:i=yo.Any}={}){this.url=e,this.headers=r,this.region=i,this.fetch=Zx(n)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return $(this,arguments,void 0,function*(r,n={}){var i;let s,a;try{const{headers:o,method:c,body:u,signal:d,timeout:f}=n;let m={},{region:g}=n;g||(g=this.region);const y=new URL(`${this.url}/${r}`);g&&g!=="any"&&(m["x-region"]=g,y.searchParams.set("forceFunctionRegion",g));let w;u&&(o&&!Object.prototype.hasOwnProperty.call(o,"Content-Type")||!o)?typeof Blob<"u"&&u instanceof Blob||u instanceof ArrayBuffer?(m["Content-Type"]="application/octet-stream",w=u):typeof u=="string"?(m["Content-Type"]="text/plain",w=u):typeof FormData<"u"&&u instanceof FormData?w=u:(m["Content-Type"]="application/json",w=JSON.stringify(u)):w=u;let b=d;f&&(a=new AbortController,s=setTimeout(()=>a.abort(),f),d?(b=a.signal,d.addEventListener("abort",()=>a.abort())):b=a.signal);const v=yield this.fetch(y.toString(),{method:c||"POST",headers:Object.assign(Object.assign(Object.assign({},m),this.headers),o),body:w,signal:b}).catch(S=>{throw new Mg(S)}),h=v.headers.get("x-relay-error");if(h&&h==="true")throw new Kc(v);if(!v.ok)throw new Jc(v);let p=((i=v.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),_;return p==="application/json"?_=yield v.json():p==="application/octet-stream"||p==="application/pdf"?_=yield v.blob():p==="text/event-stream"?_=v:p==="multipart/form-data"?_=yield v.formData():_=yield v.text(),{data:_,error:null,response:v}}catch(o){return{data:null,error:o,response:o instanceof Jc||o instanceof Kc?o.context:void 0}}finally{s&&clearTimeout(s)}})}}const Xx=Object.freeze(Object.defineProperty({__proto__:null,get FunctionRegion(){return yo},FunctionsClient:Qx,FunctionsError:Qo,FunctionsFetchError:Mg,FunctionsHttpError:Jc,FunctionsRelayError:Kc},Symbol.toStringTag,{value:"Module"})),Ug=Is(Xx);var Ye={};const Oi=Is(Yx);var ca={},ua={},da={},ha={},fa={},ma={},of;function Fg(){if(of)return ma;of=1,Object.defineProperty(ma,"__esModule",{value:!0});class t extends Error{constructor(r){super(r.message),this.name="PostgrestError",this.details=r.details,this.hint=r.hint,this.code=r.code}}return ma.default=t,ma}var lf;function Bg(){if(lf)return fa;lf=1,Object.defineProperty(fa,"__esModule",{value:!0});const e=Oi.__importDefault(Fg());let r=class{constructor(i){var s,a;this.shouldThrowOnError=!1,this.method=i.method,this.url=i.url,this.headers=new Headers(i.headers),this.schema=i.schema,this.body=i.body,this.shouldThrowOnError=(s=i.shouldThrowOnError)!==null&&s!==void 0?s:!1,this.signal=i.signal,this.isMaybeSingle=(a=i.isMaybeSingle)!==null&&a!==void 0?a:!1,i.fetch?this.fetch=i.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(i,s){return this.headers=new Headers(this.headers),this.headers.set(i,s),this}then(i,s){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const a=this.fetch;let o=a(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async c=>{var u,d,f,m;let g=null,y=null,w=null,b=c.status,v=c.statusText;if(c.ok){if(this.method!=="HEAD"){const S=await c.text();S===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((u=this.headers.get("Accept"))===null||u===void 0)&&u.includes("application/vnd.pgrst.plan+text"))?y=S:y=JSON.parse(S))}const p=(d=this.headers.get("Prefer"))===null||d===void 0?void 0:d.match(/count=(exact|planned|estimated)/),_=(f=c.headers.get("content-range"))===null||f===void 0?void 0:f.split("/");p&&_&&_.length>1&&(w=parseInt(_[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(y)&&(y.length>1?(g={code:"PGRST116",details:`Results contain ${y.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},y=null,w=null,b=406,v="Not Acceptable"):y.length===1?y=y[0]:y=null)}else{const p=await c.text();try{g=JSON.parse(p),Array.isArray(g)&&c.status===404&&(y=[],g=null,b=200,v="OK")}catch{c.status===404&&p===""?(b=204,v="No Content"):g={message:p}}if(g&&this.isMaybeSingle&&(!((m=g==null?void 0:g.details)===null||m===void 0)&&m.includes("0 rows"))&&(g=null,b=200,v="OK"),g&&this.shouldThrowOnError)throw new e.default(g)}return{error:g,data:y,count:w,status:b,statusText:v}});return this.shouldThrowOnError||(o=o.catch(c=>{var u,d,f,m,g,y;let w="";const b=c==null?void 0:c.cause;if(b){const v=(u=b==null?void 0:b.message)!==null&&u!==void 0?u:"",h=(d=b==null?void 0:b.code)!==null&&d!==void 0?d:"";w=`${(f=c==null?void 0:c.name)!==null&&f!==void 0?f:"FetchError"}: ${c==null?void 0:c.message}`,w+=`

Caused by: ${(m=b==null?void 0:b.name)!==null&&m!==void 0?m:"Error"}: ${v}`,h&&(w+=` (${h})`),b!=null&&b.stack&&(w+=`
${b.stack}`)}else w=(g=c==null?void 0:c.stack)!==null&&g!==void 0?g:"";return{error:{message:`${(y=c==null?void 0:c.name)!==null&&y!==void 0?y:"FetchError"}: ${c==null?void 0:c.message}`,details:w,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),o.then(i,s)}returns(){return this}overrideTypes(){return this}};return fa.default=r,fa}var cf;function Vg(){if(cf)return ha;cf=1,Object.defineProperty(ha,"__esModule",{value:!0});const e=Oi.__importDefault(Bg());let r=class extends e.default{select(i){let s=!1;const a=(i??"*").split("").map(o=>/\s/.test(o)&&!s?"":(o==='"'&&(s=!s),o)).join("");return this.url.searchParams.set("select",a),this.headers.append("Prefer","return=representation"),this}order(i,{ascending:s=!0,nullsFirst:a,foreignTable:o,referencedTable:c=o}={}){const u=c?`${c}.order`:"order",d=this.url.searchParams.get(u);return this.url.searchParams.set(u,`${d?`${d},`:""}${i}.${s?"asc":"desc"}${a===void 0?"":a?".nullsfirst":".nullslast"}`),this}limit(i,{foreignTable:s,referencedTable:a=s}={}){const o=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(o,`${i}`),this}range(i,s,{foreignTable:a,referencedTable:o=a}={}){const c=typeof o>"u"?"offset":`${o}.offset`,u=typeof o>"u"?"limit":`${o}.limit`;return this.url.searchParams.set(c,`${i}`),this.url.searchParams.set(u,`${s-i+1}`),this}abortSignal(i){return this.signal=i,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:i=!1,verbose:s=!1,settings:a=!1,buffers:o=!1,wal:c=!1,format:u="text"}={}){var d;const f=[i?"analyze":null,s?"verbose":null,a?"settings":null,o?"buffers":null,c?"wal":null].filter(Boolean).join("|"),m=(d=this.headers.get("Accept"))!==null&&d!==void 0?d:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${u}; for="${m}"; options=${f};`),u==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(i){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${i}`),this}};return ha.default=r,ha}var uf;function cd(){if(uf)return da;uf=1,Object.defineProperty(da,"__esModule",{value:!0});const e=Oi.__importDefault(Vg()),r=new RegExp("[,()]");let n=class extends e.default{eq(s,a){return this.url.searchParams.append(s,`eq.${a}`),this}neq(s,a){return this.url.searchParams.append(s,`neq.${a}`),this}gt(s,a){return this.url.searchParams.append(s,`gt.${a}`),this}gte(s,a){return this.url.searchParams.append(s,`gte.${a}`),this}lt(s,a){return this.url.searchParams.append(s,`lt.${a}`),this}lte(s,a){return this.url.searchParams.append(s,`lte.${a}`),this}like(s,a){return this.url.searchParams.append(s,`like.${a}`),this}likeAllOf(s,a){return this.url.searchParams.append(s,`like(all).{${a.join(",")}}`),this}likeAnyOf(s,a){return this.url.searchParams.append(s,`like(any).{${a.join(",")}}`),this}ilike(s,a){return this.url.searchParams.append(s,`ilike.${a}`),this}ilikeAllOf(s,a){return this.url.searchParams.append(s,`ilike(all).{${a.join(",")}}`),this}ilikeAnyOf(s,a){return this.url.searchParams.append(s,`ilike(any).{${a.join(",")}}`),this}regexMatch(s,a){return this.url.searchParams.append(s,`match.${a}`),this}regexIMatch(s,a){return this.url.searchParams.append(s,`imatch.${a}`),this}is(s,a){return this.url.searchParams.append(s,`is.${a}`),this}isDistinct(s,a){return this.url.searchParams.append(s,`isdistinct.${a}`),this}in(s,a){const o=Array.from(new Set(a)).map(c=>typeof c=="string"&&r.test(c)?`"${c}"`:`${c}`).join(",");return this.url.searchParams.append(s,`in.(${o})`),this}contains(s,a){return typeof a=="string"?this.url.searchParams.append(s,`cs.${a}`):Array.isArray(a)?this.url.searchParams.append(s,`cs.{${a.join(",")}}`):this.url.searchParams.append(s,`cs.${JSON.stringify(a)}`),this}containedBy(s,a){return typeof a=="string"?this.url.searchParams.append(s,`cd.${a}`):Array.isArray(a)?this.url.searchParams.append(s,`cd.{${a.join(",")}}`):this.url.searchParams.append(s,`cd.${JSON.stringify(a)}`),this}rangeGt(s,a){return this.url.searchParams.append(s,`sr.${a}`),this}rangeGte(s,a){return this.url.searchParams.append(s,`nxl.${a}`),this}rangeLt(s,a){return this.url.searchParams.append(s,`sl.${a}`),this}rangeLte(s,a){return this.url.searchParams.append(s,`nxr.${a}`),this}rangeAdjacent(s,a){return this.url.searchParams.append(s,`adj.${a}`),this}overlaps(s,a){return typeof a=="string"?this.url.searchParams.append(s,`ov.${a}`):this.url.searchParams.append(s,`ov.{${a.join(",")}}`),this}textSearch(s,a,{config:o,type:c}={}){let u="";c==="plain"?u="pl":c==="phrase"?u="ph":c==="websearch"&&(u="w");const d=o===void 0?"":`(${o})`;return this.url.searchParams.append(s,`${u}fts${d}.${a}`),this}match(s){return Object.entries(s).forEach(([a,o])=>{this.url.searchParams.append(a,`eq.${o}`)}),this}not(s,a,o){return this.url.searchParams.append(s,`not.${a}.${o}`),this}or(s,{foreignTable:a,referencedTable:o=a}={}){const c=o?`${o}.or`:"or";return this.url.searchParams.append(c,`(${s})`),this}filter(s,a,o){return this.url.searchParams.append(s,`${a}.${o}`),this}};return da.default=n,da}var df;function zg(){if(df)return ua;df=1,Object.defineProperty(ua,"__esModule",{value:!0});const e=Oi.__importDefault(cd());let r=class{constructor(i,{headers:s={},schema:a,fetch:o}){this.url=i,this.headers=new Headers(s),this.schema=a,this.fetch=o}select(i,s){const{head:a=!1,count:o}=s??{},c=a?"HEAD":"GET";let u=!1;const d=(i??"*").split("").map(f=>/\s/.test(f)&&!u?"":(f==='"'&&(u=!u),f)).join("");return this.url.searchParams.set("select",d),o&&this.headers.append("Prefer",`count=${o}`),new e.default({method:c,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(i,{count:s,defaultToNull:a=!0}={}){var o;const c="POST";if(s&&this.headers.append("Prefer",`count=${s}`),a||this.headers.append("Prefer","missing=default"),Array.isArray(i)){const u=i.reduce((d,f)=>d.concat(Object.keys(f)),[]);if(u.length>0){const d=[...new Set(u)].map(f=>`"${f}"`);this.url.searchParams.set("columns",d.join(","))}}return new e.default({method:c,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}upsert(i,{onConflict:s,ignoreDuplicates:a=!1,count:o,defaultToNull:c=!0}={}){var u;const d="POST";if(this.headers.append("Prefer",`resolution=${a?"ignore":"merge"}-duplicates`),s!==void 0&&this.url.searchParams.set("on_conflict",s),o&&this.headers.append("Prefer",`count=${o}`),c||this.headers.append("Prefer","missing=default"),Array.isArray(i)){const f=i.reduce((m,g)=>m.concat(Object.keys(g)),[]);if(f.length>0){const m=[...new Set(f)].map(g=>`"${g}"`);this.url.searchParams.set("columns",m.join(","))}}return new e.default({method:d,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}update(i,{count:s}={}){var a;const o="PATCH";return s&&this.headers.append("Prefer",`count=${s}`),new e.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}delete({count:i}={}){var s;const a="DELETE";return i&&this.headers.append("Prefer",`count=${i}`),new e.default({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}};return ua.default=r,ua}var hf;function e_(){if(hf)return ca;hf=1,Object.defineProperty(ca,"__esModule",{value:!0});const t=Oi,e=t.__importDefault(zg()),r=t.__importDefault(cd());let n=class Hg{constructor(s,{headers:a={},schema:o,fetch:c}={}){this.url=s,this.headers=new Headers(a),this.schemaName=o,this.fetch=c}from(s){if(!s||typeof s!="string"||s.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");const a=new URL(`${this.url}/${s}`);return new e.default(a,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(s){return new Hg(this.url,{headers:this.headers,schema:s,fetch:this.fetch})}rpc(s,a={},{head:o=!1,get:c=!1,count:u}={}){var d;let f;const m=new URL(`${this.url}/rpc/${s}`);let g;o||c?(f=o?"HEAD":"GET",Object.entries(a).filter(([w,b])=>b!==void 0).map(([w,b])=>[w,Array.isArray(b)?`{${b.join(",")}}`:`${b}`]).forEach(([w,b])=>{m.searchParams.append(w,b)})):(f="POST",g=a);const y=new Headers(this.headers);return u&&y.set("Prefer",`count=${u}`),new r.default({method:f,url:m,headers:y,schema:this.schemaName,body:g,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch})}};return ca.default=n,ca}Object.defineProperty(Ye,"__esModule",{value:!0});Ye.PostgrestError=Ye.PostgrestBuilder=Ye.PostgrestTransformBuilder=Ye.PostgrestFilterBuilder=Ye.PostgrestQueryBuilder=Ye.PostgrestClient=void 0;const Ri=Oi,Wg=Ri.__importDefault(e_());Ye.PostgrestClient=Wg.default;const qg=Ri.__importDefault(zg());Ye.PostgrestQueryBuilder=qg.default;const Gg=Ri.__importDefault(cd());Ye.PostgrestFilterBuilder=Gg.default;const Kg=Ri.__importDefault(Vg());Ye.PostgrestTransformBuilder=Kg.default;const Jg=Ri.__importDefault(Bg());Ye.PostgrestBuilder=Jg.default;const Yg=Ri.__importDefault(Fg());Ye.PostgrestError=Yg.default;Ye.default={PostgrestClient:Wg.default,PostgrestQueryBuilder:qg.default,PostgrestFilterBuilder:Gg.default,PostgrestTransformBuilder:Kg.default,PostgrestBuilder:Jg.default,PostgrestError:Yg.default};class Zg{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const r=process.versions;if(r&&r.node){const n=r.node,i=parseInt(n.replace(/^v/,"").split(".")[0]);return i>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${i} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${i} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let r=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(r+=`

Suggested solution: ${e.workaround}`),new Error(r)}static createWebSocket(e,r){const n=this.getWebSocketConstructor();return new n(e,r)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const t_="2.86.2",r_=`realtime-js/${t_}`,Qg="1.0.0",n_="2.0.0",ff=Qg,Yc=1e4,i_=1e3,s_=100;var fn;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(fn||(fn={}));var Oe;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(Oe||(Oe={}));var Ut;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(Ut||(Ut={}));var Zc;(function(t){t.websocket="websocket"})(Zc||(Zc={}));var mn;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(mn||(mn={}));class a_{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=e??[]}encode(e,r){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return r(this._binaryEncodeUserBroadcastPush(e));let n=[e.join_ref,e.ref,e.topic,e.event,e.payload];return r(JSON.stringify(n))}_binaryEncodeUserBroadcastPush(e){var r;return this._isArrayBuffer((r=e.payload)===null||r===void 0?void 0:r.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var r,n;const i=(n=(r=e.payload)===null||r===void 0?void 0:r.payload)!==null&&n!==void 0?n:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,i)}_encodeJsonUserBroadcastPush(e){var r,n;const i=(n=(r=e.payload)===null||r===void 0?void 0:r.payload)!==null&&n!==void 0?n:{},a=new TextEncoder().encode(JSON.stringify(i)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,a)}_encodeUserBroadcastPush(e,r,n){var i,s;const a=e.topic,o=(i=e.ref)!==null&&i!==void 0?i:"",c=(s=e.join_ref)!==null&&s!==void 0?s:"",u=e.payload.event,d=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},f=Object.keys(d).length===0?"":JSON.stringify(d);if(c.length>255)throw new Error(`joinRef length ${c.length} exceeds maximum of 255`);if(o.length>255)throw new Error(`ref length ${o.length} exceeds maximum of 255`);if(a.length>255)throw new Error(`topic length ${a.length} exceeds maximum of 255`);if(u.length>255)throw new Error(`userEvent length ${u.length} exceeds maximum of 255`);if(f.length>255)throw new Error(`metadata length ${f.length} exceeds maximum of 255`);const m=this.USER_BROADCAST_PUSH_META_LENGTH+c.length+o.length+a.length+u.length+f.length,g=new ArrayBuffer(this.HEADER_LENGTH+m);let y=new DataView(g),w=0;y.setUint8(w++,this.KINDS.userBroadcastPush),y.setUint8(w++,c.length),y.setUint8(w++,o.length),y.setUint8(w++,a.length),y.setUint8(w++,u.length),y.setUint8(w++,f.length),y.setUint8(w++,r),Array.from(c,v=>y.setUint8(w++,v.charCodeAt(0))),Array.from(o,v=>y.setUint8(w++,v.charCodeAt(0))),Array.from(a,v=>y.setUint8(w++,v.charCodeAt(0))),Array.from(u,v=>y.setUint8(w++,v.charCodeAt(0))),Array.from(f,v=>y.setUint8(w++,v.charCodeAt(0)));var b=new Uint8Array(g.byteLength+n.byteLength);return b.set(new Uint8Array(g),0),b.set(new Uint8Array(n),g.byteLength),b.buffer}decode(e,r){if(this._isArrayBuffer(e)){let n=this._binaryDecode(e);return r(n)}if(typeof e=="string"){const n=JSON.parse(e),[i,s,a,o,c]=n;return r({join_ref:i,ref:s,topic:a,event:o,payload:c})}return r({})}_binaryDecode(e){const r=new DataView(e),n=r.getUint8(0),i=new TextDecoder;switch(n){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(e,r,i)}}_decodeUserBroadcast(e,r,n){const i=r.getUint8(1),s=r.getUint8(2),a=r.getUint8(3),o=r.getUint8(4);let c=this.HEADER_LENGTH+4;const u=n.decode(e.slice(c,c+i));c=c+i;const d=n.decode(e.slice(c,c+s));c=c+s;const f=n.decode(e.slice(c,c+a));c=c+a;const m=e.slice(c,e.byteLength),g=o===this.JSON_ENCODING?JSON.parse(n.decode(m)):m,y={type:this.BROADCAST_EVENT,event:d,payload:g};return a>0&&(y.meta=JSON.parse(f)),{join_ref:null,ref:null,topic:u,event:this.BROADCAST_EVENT,payload:y}}_isArrayBuffer(e){var r;return e instanceof ArrayBuffer||((r=e==null?void 0:e.constructor)===null||r===void 0?void 0:r.name)==="ArrayBuffer"}_pick(e,r){return!e||typeof e!="object"?{}:Object.fromEntries(Object.entries(e).filter(([n])=>r.includes(n)))}}class Xg{constructor(e,r){this.callback=e,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var pe;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(pe||(pe={}));const mf=(t,e,r={})=>{var n;const i=(n=r.skipTypes)!==null&&n!==void 0?n:[];return e?Object.keys(e).reduce((s,a)=>(s[a]=o_(a,t,e,i),s),{}):{}},o_=(t,e,r,n)=>{const i=e.find(o=>o.name===t),s=i==null?void 0:i.type,a=r[t];return s&&!n.includes(s)?ev(s,a):Qc(a)},ev=(t,e)=>{if(t.charAt(0)==="_"){const r=t.slice(1,t.length);return d_(e,r)}switch(t){case pe.bool:return l_(e);case pe.float4:case pe.float8:case pe.int2:case pe.int4:case pe.int8:case pe.numeric:case pe.oid:return c_(e);case pe.json:case pe.jsonb:return u_(e);case pe.timestamp:return h_(e);case pe.abstime:case pe.date:case pe.daterange:case pe.int4range:case pe.int8range:case pe.money:case pe.reltime:case pe.text:case pe.time:case pe.timestamptz:case pe.timetz:case pe.tsrange:case pe.tstzrange:return Qc(e);default:return Qc(e)}},Qc=t=>t,l_=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},c_=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},u_=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},d_=(t,e)=>{if(typeof t!="string")return t;const r=t.length-1,n=t[r];if(t[0]==="{"&&n==="}"){let s;const a=t.slice(1,r);try{s=JSON.parse("["+a+"]")}catch{s=a?a.split(","):[]}return s.map(o=>ev(e,o))}return t},h_=t=>typeof t=="string"?t.replace(" ","T"):t,tv=t=>{const e=new URL(t);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class Fl{constructor(e,r,n={},i=Yc){this.channel=e,this.event=r,this.payload=n,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,r){var n;return this._hasReceived(e)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:e,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:r}){this.recHooks.filter(n=>n.status===e).forEach(n=>n.callback(r))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Xc;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(Xc||(Xc={}));let rv=class Pa{constructor(e,r){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},i=>{const{onJoin:s,onLeave:a,onSync:o}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Pa.syncState(this.state,i,s,a),this.pendingDiffs.forEach(c=>{this.state=Pa.syncDiff(this.state,c,s,a)}),this.pendingDiffs=[],o()}),this.channel._on(n.diff,{},i=>{const{onJoin:s,onLeave:a,onSync:o}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=Pa.syncDiff(this.state,i,s,a),o())}),this.onJoin((i,s,a)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:s,newPresences:a})}),this.onLeave((i,s,a)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:s,leftPresences:a})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,r,n,i){const s=this.cloneDeep(e),a=this.transformState(r),o={},c={};return this.map(s,(u,d)=>{a[u]||(c[u]=d)}),this.map(a,(u,d)=>{const f=s[u];if(f){const m=d.map(b=>b.presence_ref),g=f.map(b=>b.presence_ref),y=d.filter(b=>g.indexOf(b.presence_ref)<0),w=f.filter(b=>m.indexOf(b.presence_ref)<0);y.length>0&&(o[u]=y),w.length>0&&(c[u]=w)}else o[u]=d}),this.syncDiff(s,{joins:o,leaves:c},n,i)}static syncDiff(e,r,n,i){const{joins:s,leaves:a}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),i||(i=()=>{}),this.map(s,(o,c)=>{var u;const d=(u=e[o])!==null&&u!==void 0?u:[];if(e[o]=this.cloneDeep(c),d.length>0){const f=e[o].map(g=>g.presence_ref),m=d.filter(g=>f.indexOf(g.presence_ref)<0);e[o].unshift(...m)}n(o,d,c)}),this.map(a,(o,c)=>{let u=e[o];if(!u)return;const d=c.map(f=>f.presence_ref);u=u.filter(f=>d.indexOf(f.presence_ref)<0),e[o]=u,i(o,u,c),u.length===0&&delete e[o]}),e}static map(e,r){return Object.getOwnPropertyNames(e).map(n=>r(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((r,n)=>{const i=e[n];return"metas"in i?r[n]=i.metas.map(s=>(s.presence_ref=s.phx_ref,delete s.phx_ref,delete s.phx_ref_prev,s)):r[n]=i,r},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}};var eu;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(eu||(eu={}));var ci;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(ci||(ci={}));var Yt;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Yt||(Yt={}));const f_=Oe;let nv=class iv{constructor(e,r={config:{}},n){var i,s;if(this.topic=e,this.params=r,this.socket=n,this.bindings={},this.state=Oe.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new Fl(this,Ut.join,this.params,this.timeout),this.rejoinTimer=new Xg(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Oe.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(a=>a.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Oe.closed,this.socket._remove(this)}),this._onError(a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=Oe.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Oe.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=Oe.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Ut.reply,{},(a,o)=>{this._trigger(this._replyEventName(o),a)}),this.presence=new rv(this),this.broadcastEndpointURL=tv(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((s=(i=this.params.config)===null||i===void 0?void 0:i.broadcast)===null||s===void 0)&&s.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,r=this.timeout){var n,i,s;if(this.socket.isConnected()||this.socket.connect(),this.state==Oe.closed){const{config:{broadcast:a,presence:o,private:c}}=this.params,u=(i=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(g=>g.filter))!==null&&i!==void 0?i:[],d=!!this.bindings[ci.PRESENCE]&&this.bindings[ci.PRESENCE].length>0||((s=this.params.config.presence)===null||s===void 0?void 0:s.enabled)===!0,f={},m={broadcast:a,presence:Object.assign(Object.assign({},o),{enabled:d}),postgres_changes:u,private:c};this.socket.accessTokenValue&&(f.access_token=this.socket.accessTokenValue),this._onError(g=>e==null?void 0:e(Yt.CHANNEL_ERROR,g)),this._onClose(()=>e==null?void 0:e(Yt.CLOSED)),this.updateJoinPayload(Object.assign({config:m},f)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:g})=>{var y;if(this.socket.setAuth(),g===void 0){e==null||e(Yt.SUBSCRIBED);return}else{const w=this.bindings.postgres_changes,b=(y=w==null?void 0:w.length)!==null&&y!==void 0?y:0,v=[];for(let h=0;h<b;h++){const p=w[h],{filter:{event:_,schema:S,table:N,filter:E}}=p,P=g&&g[h];if(P&&P.event===_&&P.schema===S&&P.table===N&&P.filter===E)v.push(Object.assign(Object.assign({},p),{id:P.id}));else{this.unsubscribe(),this.state=Oe.errored,e==null||e(Yt.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=v,e&&e(Yt.SUBSCRIBED);return}}).receive("error",g=>{this.state=Oe.errored,e==null||e(Yt.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(g).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Yt.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,r={}){return await this.send({type:"presence",event:"track",payload:e},r.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,r,n){return this.state===Oe.joined&&e===ci.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,r,n)}async httpSend(e,r,n={}){var i;const s=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(r==null)return Promise.reject("Payload is required for httpSend()");const a={method:"POST",headers:{Authorization:s,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:r,private:this.private}]})},o=await this._fetchWithTimeout(this.broadcastEndpointURL,a,(i=n.timeout)!==null&&i!==void 0?i:this.timeout);if(o.status===202)return{success:!0};let c=o.statusText;try{const u=await o.json();c=u.error||u.message||c}catch{}return Promise.reject(new Error(c))}async send(e,r={}){var n,i;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:s,payload:a}=e,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:a,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((i=u.body)===null||i===void 0?void 0:i.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(s=>{var a,o,c;const u=this._push(e.type,e,r.timeout||this.timeout);e.type==="broadcast"&&!(!((c=(o=(a=this.params)===null||a===void 0?void 0:a.config)===null||o===void 0?void 0:o.broadcast)===null||c===void 0)&&c.ack)&&s("ok"),u.receive("ok",()=>s("ok")),u.receive("error",()=>s("error")),u.receive("timeout",()=>s("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Oe.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Ut.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(i=>{n=new Fl(this,Ut.leave,{},e),n.receive("ok",()=>{r(),i("ok")}).receive("timeout",()=>{r(),i("timed out")}).receive("error",()=>{i("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Oe.closed,this.bindings={}}async _fetchWithTimeout(e,r,n){const i=new AbortController,s=setTimeout(()=>i.abort(),n),a=await this.socket.fetch(e,Object.assign(Object.assign({},r),{signal:i.signal}));return clearTimeout(s),a}_push(e,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new Fl(this,e,r,n);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>s_){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(e,r,n){return r}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,r,n){var i,s;const a=e.toLocaleLowerCase(),{close:o,error:c,leave:u,join:d}=Ut;if(n&&[o,c,u,d].indexOf(a)>=0&&n!==this._joinRef())return;let m=this._onMessage(a,r,n);if(r&&!m)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(g=>{var y,w,b;return((y=g.filter)===null||y===void 0?void 0:y.event)==="*"||((b=(w=g.filter)===null||w===void 0?void 0:w.event)===null||b===void 0?void 0:b.toLocaleLowerCase())===a}).map(g=>g.callback(m,n)):(s=this.bindings[a])===null||s===void 0||s.filter(g=>{var y,w,b,v,h,p;if(["broadcast","presence","postgres_changes"].includes(a))if("id"in g){const _=g.id,S=(y=g.filter)===null||y===void 0?void 0:y.event;return _&&((w=r.ids)===null||w===void 0?void 0:w.includes(_))&&(S==="*"||(S==null?void 0:S.toLocaleLowerCase())===((b=r.data)===null||b===void 0?void 0:b.type.toLocaleLowerCase()))}else{const _=(h=(v=g==null?void 0:g.filter)===null||v===void 0?void 0:v.event)===null||h===void 0?void 0:h.toLocaleLowerCase();return _==="*"||_===((p=r==null?void 0:r.event)===null||p===void 0?void 0:p.toLocaleLowerCase())}else return g.type.toLocaleLowerCase()===a}).map(g=>{if(typeof m=="object"&&"ids"in m){const y=m.data,{schema:w,table:b,commit_timestamp:v,type:h,errors:p}=y;m=Object.assign(Object.assign({},{schema:w,table:b,commit_timestamp:v,eventType:h,new:{},old:{},errors:p}),this._getPayloadRecords(y))}g.callback(m,n)})}_isClosed(){return this.state===Oe.closed}_isJoined(){return this.state===Oe.joined}_isJoining(){return this.state===Oe.joining}_isLeaving(){return this.state===Oe.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,r,n){const i=e.toLocaleLowerCase(),s={type:i,filter:r,callback:n};return this.bindings[i]?this.bindings[i].push(s):this.bindings[i]=[s],this}_off(e,r){const n=e.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(i=>{var s;return!(((s=i.type)===null||s===void 0?void 0:s.toLocaleLowerCase())===n&&iv.isEqual(i.filter,r))})),this}static isEqual(e,r){if(Object.keys(e).length!==Object.keys(r).length)return!1;for(const n in e)if(e[n]!==r[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Ut.close,{},e)}_onError(e){this._on(Ut.error,{},r=>e(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Oe.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const r={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(r.new=mf(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(r.old=mf(e.columns,e.old_record)),r}};const Bl=()=>{},pa={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},m_=[1e3,2e3,5e3,1e4],p_=1e4,g_=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;let v_=class{constructor(e,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Yc,this.transport=null,this.heartbeatIntervalMs=pa.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Bl,this.ref=0,this.reconnectTimer=null,this.vsn=ff,this.logger=Bl,this.conn=null,this.sendBuffer=[],this.serializer=new a_,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=i=>i?(...s)=>i(...s):(...s)=>fetch(...s),!(!((n=r==null?void 0:r.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${e}/${Zc.websocket}`,this.httpEndpoint=tv(e),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Zg.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const r=e.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,r??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const r=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const e=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,r,n){this.logger(e,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case fn.connecting:return mn.Connecting;case fn.open:return mn.Open;case fn.closing:return mn.Closing;default:return mn.Closed}}isConnected(){return this.connectionState()===mn.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,r={config:{}}){const n=`realtime:${e}`,i=this.getChannels().find(s=>s.topic===n);if(i)return i;{const s=new nv(`realtime:${e}`,r,this);return this.channels.push(s),s}}push(e){const{topic:r,event:n,payload:i,ref:s}=e,a=()=>{this.encode(e,o=>{var c;(c=this.conn)===null||c===void 0||c.send(o)})};this.log("push",`${r} ${n} (${s})`,i),this.isConnected()?a():this.sendBuffer.push(a)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(i_,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},pa.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let r=this.channels.find(n=>n.topic===e&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${e}"`),r.unsubscribe())}_remove(e){this.channels=this.channels.filter(r=>r.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(u){this.log("error","error in heartbeat callback",u)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:n,event:i,payload:s,ref:a}=r,o=a?`(${a})`:"",c=s.status||"";this.log("receive",`${c} ${n} ${i} ${o}`.trim(),s),this.channels.filter(u=>u._isMember(n)).forEach(u=>u._trigger(i,s,a)),this._triggerStateCallbacks("message",r)})}_clearTimer(e){var r;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){if(this.conn){if(this.conn.readyState===fn.open||this.conn.readyState===fn.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(r=>{this.log("error","error waiting for auth on connect",r),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var r;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(Ut.error))}_appendParams(e,r){if(Object.keys(r).length===0)return e;const n=e.match(/\?/)?"&":"?",i=new URLSearchParams(r);return`${e}${n}${i}`}_workerObjectUrl(e){let r;if(e)r=e;else{const n=new Blob([g_],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(e,r=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(e=null){let r;e?r=e:this.accessToken?r=await this.accessToken():r=this.accessTokenValue,this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(n=>{const i={access_token:r,version:r_};r&&n.updateJoinPayload(i),n.joinedOnce&&n._isJoined()&&n._push(Ut.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(r=>{this.log("error",`error setting auth in ${e}`,r)})}_triggerStateCallbacks(e,r){try{this.stateChangeCallbacks[e].forEach(n=>{try{n(r)}catch(i){this.log("error",`error in ${e} callback`,i)}})}catch(n){this.log("error",`error triggering ${e} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new Xg(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},pa.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var r,n,i,s,a,o,c,u,d,f,m,g;switch(this.transport=(r=e==null?void 0:e.transport)!==null&&r!==void 0?r:null,this.timeout=(n=e==null?void 0:e.timeout)!==null&&n!==void 0?n:Yc,this.heartbeatIntervalMs=(i=e==null?void 0:e.heartbeatIntervalMs)!==null&&i!==void 0?i:pa.HEARTBEAT_INTERVAL,this.worker=(s=e==null?void 0:e.worker)!==null&&s!==void 0?s:!1,this.accessToken=(a=e==null?void 0:e.accessToken)!==null&&a!==void 0?a:null,this.heartbeatCallback=(o=e==null?void 0:e.heartbeatCallback)!==null&&o!==void 0?o:Bl,this.vsn=(c=e==null?void 0:e.vsn)!==null&&c!==void 0?c:ff,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(u=e==null?void 0:e.reconnectAfterMs)!==null&&u!==void 0?u:y=>m_[y-1]||p_,this.vsn){case Qg:this.encode=(d=e==null?void 0:e.encode)!==null&&d!==void 0?d:(y,w)=>w(JSON.stringify(y)),this.decode=(f=e==null?void 0:e.decode)!==null&&f!==void 0?f:(y,w)=>w(JSON.parse(y));break;case n_:this.encode=(m=e==null?void 0:e.encode)!==null&&m!==void 0?m:this.serializer.encode.bind(this.serializer),this.decode=(g=e==null?void 0:e.decode)!==null&&g!==void 0?g:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}};const y_=Object.freeze(Object.defineProperty({__proto__:null,REALTIME_CHANNEL_STATES:f_,get REALTIME_LISTEN_TYPES(){return ci},get REALTIME_POSTGRES_CHANGES_LISTEN_EVENT(){return eu},get REALTIME_PRESENCE_LISTEN_EVENTS(){return Xc},get REALTIME_SUBSCRIBE_STATES(){return Yt},RealtimeChannel:nv,RealtimeClient:v_,RealtimePresence:rv,WebSocketFactory:Zg},Symbol.toStringTag,{value:"Module"})),sv=Is(y_);class Fs extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function xe(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class av extends Fs{constructor(e,r,n){super(e),this.name="StorageApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class wo extends Fs{constructor(e,r){super(e),this.name="StorageUnknownError",this.originalError=r}}const ud=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),w_=()=>Response,tu=t=>{if(Array.isArray(t))return t.map(r=>tu(r));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([r,n])=>{const i=r.replace(/([-_][a-z])/gi,s=>s.toUpperCase().replace(/[-_]/g,""));e[i]=tu(n)}),e},x_=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},__=t=>!t||typeof t!="string"||t.length===0||t.length>100||t.trim()!==t||t.includes("/")||t.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(t),Vl=t=>{var e;return t.msg||t.message||t.error_description||(typeof t.error=="string"?t.error:(e=t.error)===null||e===void 0?void 0:e.message)||JSON.stringify(t)},b_=(t,e,r)=>$(void 0,void 0,void 0,function*(){const n=yield w_();t instanceof n&&!(r!=null&&r.noResolveJson)?t.json().then(i=>{const s=t.status||500,a=(i==null?void 0:i.statusCode)||s+"";e(new av(Vl(i),s,a))}).catch(i=>{e(new wo(Vl(i),i))}):e(new wo(Vl(t),t))}),k_=(t,e,r,n)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!n?i:(x_(n)?(i.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),i.body=JSON.stringify(n)):i.body=n,e!=null&&e.duplex&&(i.duplex=e.duplex),Object.assign(Object.assign({},i),r))};function Bs(t,e,r,n,i,s){return $(this,void 0,void 0,function*(){return new Promise((a,o)=>{t(r,k_(e,n,i,s)).then(c=>{if(!c.ok)throw c;return n!=null&&n.noResolveJson?c:c.json()}).then(c=>a(c)).catch(c=>b_(c,o,n))})})}function As(t,e,r,n){return $(this,void 0,void 0,function*(){return Bs(t,"GET",e,r,n)})}function Lt(t,e,r,n,i){return $(this,void 0,void 0,function*(){return Bs(t,"POST",e,n,i,r)})}function ru(t,e,r,n,i){return $(this,void 0,void 0,function*(){return Bs(t,"PUT",e,n,i,r)})}function S_(t,e,r,n){return $(this,void 0,void 0,function*(){return Bs(t,"HEAD",e,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function dd(t,e,r,n,i){return $(this,void 0,void 0,function*(){return Bs(t,"DELETE",e,n,i,r)})}class j_{constructor(e,r){this.downloadFn=e,this.shouldThrowOnError=r}then(e,r){return this.execute().then(e,r)}execute(){return $(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(xe(e))return{data:null,error:e};throw e}})}}var ov;class N_{constructor(e,r){this.downloadFn=e,this.shouldThrowOnError=r,this[ov]="BlobDownloadBuilder",this.promise=null}asStream(){return new j_(this.downloadFn,this.shouldThrowOnError)}then(e,r){return this.getPromise().then(e,r)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return $(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(xe(e))return{data:null,error:e};throw e}})}}ov=Symbol.toStringTag;const E_={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},pf={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class C_{constructor(e,r={},n,i){this.shouldThrowOnError=!1,this.url=e,this.headers=r,this.bucketId=n,this.fetch=ud(i)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,r,n,i){return $(this,void 0,void 0,function*(){try{let s;const a=Object.assign(Object.assign({},pf),i);let o=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(a.upsert)});const c=a.metadata;typeof Blob<"u"&&n instanceof Blob?(s=new FormData,s.append("cacheControl",a.cacheControl),c&&s.append("metadata",this.encodeMetadata(c)),s.append("",n)):typeof FormData<"u"&&n instanceof FormData?(s=n,s.has("cacheControl")||s.append("cacheControl",a.cacheControl),c&&!s.has("metadata")&&s.append("metadata",this.encodeMetadata(c))):(s=n,o["cache-control"]=`max-age=${a.cacheControl}`,o["content-type"]=a.contentType,c&&(o["x-metadata"]=this.toBase64(this.encodeMetadata(c))),(typeof ReadableStream<"u"&&s instanceof ReadableStream||s&&typeof s=="object"&&"pipe"in s&&typeof s.pipe=="function")&&!a.duplex&&(a.duplex="half")),i!=null&&i.headers&&(o=Object.assign(Object.assign({},o),i.headers));const u=this._removeEmptyFolders(r),d=this._getFinalPath(u),f=yield(e=="PUT"?ru:Lt)(this.fetch,`${this.url}/object/${d}`,s,Object.assign({headers:o},a!=null&&a.duplex?{duplex:a.duplex}:{}));return{data:{path:u,id:f.Id,fullPath:f.Key},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(xe(s))return{data:null,error:s};throw s}})}upload(e,r,n){return $(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,r,n)})}uploadToSignedUrl(e,r,n,i){return $(this,void 0,void 0,function*(){const s=this._removeEmptyFolders(e),a=this._getFinalPath(s),o=new URL(this.url+`/object/upload/sign/${a}`);o.searchParams.set("token",r);try{let c;const u=Object.assign({upsert:pf.upsert},i),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&n instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",n)):typeof FormData<"u"&&n instanceof FormData?(c=n,c.append("cacheControl",u.cacheControl)):(c=n,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType);const f=yield ru(this.fetch,o.toString(),c,{headers:d});return{data:{path:s,fullPath:f.Key},error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(xe(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(e,r){return $(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e);const i=Object.assign({},this.headers);r!=null&&r.upsert&&(i["x-upsert"]="true");const s=yield Lt(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:i}),a=new URL(this.url+s.url),o=a.searchParams.get("token");if(!o)throw new Fs("No token returned by API");return{data:{signedUrl:a.toString(),path:e,token:o},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(xe(n))return{data:null,error:n};throw n}})}update(e,r,n){return $(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,r,n)})}move(e,r,n){return $(this,void 0,void 0,function*(){try{return{data:yield Lt(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(xe(i))return{data:null,error:i};throw i}})}copy(e,r,n){return $(this,void 0,void 0,function*(){try{return{data:{path:(yield Lt(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(xe(i))return{data:null,error:i};throw i}})}createSignedUrl(e,r,n){return $(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e),s=yield Lt(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:r},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const a=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return s={signedUrl:encodeURI(`${this.url}${s.signedURL}${a}`)},{data:s,error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(xe(i))return{data:null,error:i};throw i}})}createSignedUrls(e,r,n){return $(this,void 0,void 0,function*(){try{const i=yield Lt(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:e},{headers:this.headers}),s=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:i.map(a=>Object.assign(Object.assign({},a),{signedUrl:a.signedURL?encodeURI(`${this.url}${a.signedURL}${s}`):null})),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(xe(i))return{data:null,error:i};throw i}})}download(e,r){const i=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",s=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),a=s?`?${s}`:"",o=this._getFinalPath(e),c=()=>As(this.fetch,`${this.url}/${i}/${o}${a}`,{headers:this.headers,noResolveJson:!0});return new N_(c,this.shouldThrowOnError)}info(e){return $(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{const n=yield As(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:tu(n),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(xe(n))return{data:null,error:n};throw n}})}exists(e){return $(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{return yield S_(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(xe(n)&&n instanceof wo){const i=n.originalError;if([400,404].includes(i==null?void 0:i.status))return{data:!1,error:n}}throw n}})}getPublicUrl(e,r){const n=this._getFinalPath(e),i=[],s=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";s!==""&&i.push(s);const o=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});c!==""&&i.push(c);let u=i.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${o}/public/${n}${u}`)}}}remove(e){return $(this,void 0,void 0,function*(){try{return{data:yield dd(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(xe(r))return{data:null,error:r};throw r}})}list(e,r,n){return $(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},E_),r),{prefix:e||""});return{data:yield Lt(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},n),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(xe(i))return{data:null,error:i};throw i}})}listV2(e,r){return $(this,void 0,void 0,function*(){try{const n=Object.assign({},e);return{data:yield Lt(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,n,{headers:this.headers},r),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(xe(n))return{data:null,error:n};throw n}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const r=[];return e.width&&r.push(`width=${e.width}`),e.height&&r.push(`height=${e.height}`),e.resize&&r.push(`resize=${e.resize}`),e.format&&r.push(`format=${e.format}`),e.quality&&r.push(`quality=${e.quality}`),r.join("&")}}const lv="2.86.2",cv={"X-Client-Info":`storage-js/${lv}`};class T_{constructor(e,r={},n,i){this.shouldThrowOnError=!1;const s=new URL(e);i!=null&&i.useNewHostname&&/supabase\.(co|in|red)$/.test(s.hostname)&&!s.hostname.includes("storage.supabase.")&&(s.hostname=s.hostname.replace("supabase.","storage.supabase.")),this.url=s.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},cv),r),this.fetch=ud(n)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(e){return $(this,void 0,void 0,function*(){try{const r=this.listBucketOptionsToQueryString(e);return{data:yield As(this.fetch,`${this.url}/bucket${r}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(xe(r))return{data:null,error:r};throw r}})}getBucket(e){return $(this,void 0,void 0,function*(){try{return{data:yield As(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(xe(r))return{data:null,error:r};throw r}})}createBucket(e){return $(this,arguments,void 0,function*(r,n={public:!1}){try{return{data:yield Lt(this.fetch,`${this.url}/bucket`,{id:r,name:r,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(xe(i))return{data:null,error:i};throw i}})}updateBucket(e,r){return $(this,void 0,void 0,function*(){try{return{data:yield ru(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(xe(n))return{data:null,error:n};throw n}})}emptyBucket(e){return $(this,void 0,void 0,function*(){try{return{data:yield Lt(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(xe(r))return{data:null,error:r};throw r}})}deleteBucket(e){return $(this,void 0,void 0,function*(){try{return{data:yield dd(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(xe(r))return{data:null,error:r};throw r}})}listBucketOptionsToQueryString(e){const r={};return e&&("limit"in e&&(r.limit=String(e.limit)),"offset"in e&&(r.offset=String(e.offset)),e.search&&(r.search=e.search),e.sortColumn&&(r.sortColumn=e.sortColumn),e.sortOrder&&(r.sortOrder=e.sortOrder)),Object.keys(r).length>0?"?"+new URLSearchParams(r).toString():""}}var Os=class extends Error{constructor(t,e){var r;super(t),this.name="IcebergError",this.status=e.status,this.icebergType=e.icebergType,this.icebergCode=e.icebergCode,this.details=e.details,this.isCommitStateUnknown=e.icebergType==="CommitStateUnknownException"||[500,502,504].includes(e.status)&&((r=e.icebergType)==null?void 0:r.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function A_(t,e,r){const n=new URL(e,t);if(r)for(const[i,s]of Object.entries(r))s!==void 0&&n.searchParams.set(i,s);return n.toString()}async function O_(t){return!t||t.type==="none"?{}:t.type==="bearer"?{Authorization:`Bearer ${t.token}`}:t.type==="header"?{[t.name]:t.value}:t.type==="custom"?await t.getHeaders():{}}function R_(t){const e=t.fetchImpl??globalThis.fetch;return{async request({method:r,path:n,query:i,body:s,headers:a}){const o=A_(t.baseUrl,n,i),c=await O_(t.auth),u=await e(o,{method:r,headers:{...s?{"Content-Type":"application/json"}:{},...c,...a},body:s?JSON.stringify(s):void 0}),d=await u.text(),f=(u.headers.get("content-type")||"").includes("application/json"),m=f&&d?JSON.parse(d):d;if(!u.ok){const g=f?m:void 0,y=g==null?void 0:g.error;throw new Os((y==null?void 0:y.message)??`Request failed with status ${u.status}`,{status:u.status,icebergType:y==null?void 0:y.type,icebergCode:y==null?void 0:y.code,details:g})}return{status:u.status,headers:u.headers,data:m}}}}function ga(t){return t.join("")}var P_=class{constructor(t,e=""){this.client=t,this.prefix=e}async listNamespaces(t){const e=t?{parent:ga(t.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:e})).data.namespaces.map(n=>({namespace:n}))}async createNamespace(t,e){const r={namespace:t.namespace,properties:e==null?void 0:e.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:r})).data}async dropNamespace(t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${ga(t.namespace)}`})}async loadNamespaceMetadata(t){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${ga(t.namespace)}`})).data.properties}}async namespaceExists(t){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${ga(t.namespace)}`}),!0}catch(e){if(e instanceof Os&&e.status===404)return!1;throw e}}async createNamespaceIfNotExists(t,e){try{return await this.createNamespace(t,e)}catch(r){if(r instanceof Os&&r.status===409)return;throw r}}};function Dn(t){return t.join("")}var I_=class{constructor(t,e="",r){this.client=t,this.prefix=e,this.accessDelegation=r}async listTables(t){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Dn(t.namespace)}/tables`})).data.identifiers}async createTable(t,e){const r={};return this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Dn(t.namespace)}/tables`,body:e,headers:r})).data.metadata}async updateTable(t,e){const r=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Dn(t.namespace)}/tables/${t.name}`,body:e});return{"metadata-location":r.data["metadata-location"],metadata:r.data.metadata}}async dropTable(t,e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Dn(t.namespace)}/tables/${t.name}`,query:{purgeRequested:String((e==null?void 0:e.purge)??!1)}})}async loadTable(t){const e={};return this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Dn(t.namespace)}/tables/${t.name}`,headers:e})).data.metadata}async tableExists(t){const e={};this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Dn(t.namespace)}/tables/${t.name}`,headers:e}),!0}catch(r){if(r instanceof Os&&r.status===404)return!1;throw r}}async createTableIfNotExists(t,e){try{return await this.createTable(t,e)}catch(r){if(r instanceof Os&&r.status===409)return await this.loadTable({namespace:t.namespace,name:e.name});throw r}}},D_=class{constructor(t){var n;let e="v1";t.catalogName&&(e+=`/${t.catalogName}`);const r=t.baseUrl.endsWith("/")?t.baseUrl:`${t.baseUrl}/`;this.client=R_({baseUrl:r,auth:t.auth,fetchImpl:t.fetch}),this.accessDelegation=(n=t.accessDelegation)==null?void 0:n.join(","),this.namespaceOps=new P_(this.client,e),this.tableOps=new I_(this.client,e,this.accessDelegation)}async listNamespaces(t){return this.namespaceOps.listNamespaces(t)}async createNamespace(t,e){return this.namespaceOps.createNamespace(t,e)}async dropNamespace(t){await this.namespaceOps.dropNamespace(t)}async loadNamespaceMetadata(t){return this.namespaceOps.loadNamespaceMetadata(t)}async listTables(t){return this.tableOps.listTables(t)}async createTable(t,e){return this.tableOps.createTable(t,e)}async updateTable(t,e){return this.tableOps.updateTable(t,e)}async dropTable(t,e){await this.tableOps.dropTable(t,e)}async loadTable(t){return this.tableOps.loadTable(t)}async namespaceExists(t){return this.namespaceOps.namespaceExists(t)}async tableExists(t){return this.tableOps.tableExists(t)}async createNamespaceIfNotExists(t,e){return this.namespaceOps.createNamespaceIfNotExists(t,e)}async createTableIfNotExists(t,e){return this.tableOps.createTableIfNotExists(t,e)}};class uv{constructor(e,r={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},cv),r),this.fetch=ud(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return $(this,void 0,void 0,function*(){try{return{data:yield Lt(this.fetch,`${this.url}/bucket`,{name:e},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(xe(r))return{data:null,error:r};throw r}})}listBuckets(e){return $(this,void 0,void 0,function*(){try{const r=new URLSearchParams;(e==null?void 0:e.limit)!==void 0&&r.set("limit",e.limit.toString()),(e==null?void 0:e.offset)!==void 0&&r.set("offset",e.offset.toString()),e!=null&&e.sortColumn&&r.set("sortColumn",e.sortColumn),e!=null&&e.sortOrder&&r.set("sortOrder",e.sortOrder),e!=null&&e.search&&r.set("search",e.search);const n=r.toString(),i=n?`${this.url}/bucket?${n}`:`${this.url}/bucket`;return{data:yield As(this.fetch,i,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(xe(r))return{data:null,error:r};throw r}})}deleteBucket(e){return $(this,void 0,void 0,function*(){try{return{data:yield dd(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(xe(r))return{data:null,error:r};throw r}})}from(e){if(!__(e))throw new Fs("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");return new D_({baseUrl:this.url,catalogName:e,auth:{type:"custom",getHeaders:()=>$(this,void 0,void 0,function*(){return this.headers})},fetch:this.fetch})}}const hd={"X-Client-Info":`storage-js/${lv}`,"Content-Type":"application/json"};class fd extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function ct(t){return typeof t=="object"&&t!==null&&"__isStorageVectorsError"in t}class Ia extends fd{constructor(e,r,n){super(e),this.name="StorageVectorsApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class dv extends fd{constructor(e,r){super(e),this.name="StorageVectorsUnknownError",this.originalError=r}}var nu;(function(t){t.InternalError="InternalError",t.S3VectorConflictException="S3VectorConflictException",t.S3VectorNotFoundException="S3VectorNotFoundException",t.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",t.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",t.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(nu||(nu={}));const Xo=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),L_=()=>Response,hv=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},$_=t=>Array.from(new Float32Array(t)),M_=(t,e)=>{if(e!==void 0&&t.float32.length!==e)throw new Error(`Vector dimension mismatch: expected ${e}, got ${t.float32.length}`)},gf=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),U_=(t,e,r)=>$(void 0,void 0,void 0,function*(){if(t&&typeof t=="object"&&"status"in t&&"ok"in t&&typeof t.status=="number"&&!(r!=null&&r.noResolveJson)){const i=t.status||500,s=t;if(typeof s.json=="function")s.json().then(a=>{const o=(a==null?void 0:a.statusCode)||(a==null?void 0:a.code)||i+"";e(new Ia(gf(a),i,o))}).catch(()=>{const a=i+"",o=s.statusText||`HTTP ${i} error`;e(new Ia(o,i,a))});else{const a=i+"",o=s.statusText||`HTTP ${i} error`;e(new Ia(o,i,a))}}else e(new dv(gf(t),t))}),F_=(t,e,r,n)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return n?(hv(n)?(i.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),i.body=JSON.stringify(n)):i.body=n,Object.assign(Object.assign({},i),r)):i};function B_(t,e,r,n,i,s){return $(this,void 0,void 0,function*(){return new Promise((a,o)=>{t(r,F_(e,n,i,s)).then(c=>{if(!c.ok)throw c;if(n!=null&&n.noResolveJson)return c;const u=c.headers.get("content-type");return!u||!u.includes("application/json")?{}:c.json()}).then(c=>a(c)).catch(c=>U_(c,o,n))})})}function pt(t,e,r,n,i){return $(this,void 0,void 0,function*(){return B_(t,"POST",e,n,i,r)})}class fv{constructor(e,r={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},hd),r),this.fetch=Xo(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(e){return $(this,void 0,void 0,function*(){try{return{data:(yield pt(this.fetch,`${this.url}/CreateIndex`,e,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ct(r))return{data:null,error:r};throw r}})}getIndex(e,r){return $(this,void 0,void 0,function*(){try{return{data:yield pt(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:e,indexName:r},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ct(n))return{data:null,error:n};throw n}})}listIndexes(e){return $(this,void 0,void 0,function*(){try{return{data:yield pt(this.fetch,`${this.url}/ListIndexes`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ct(r))return{data:null,error:r};throw r}})}deleteIndex(e,r){return $(this,void 0,void 0,function*(){try{return{data:(yield pt(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:e,indexName:r},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ct(n))return{data:null,error:n};throw n}})}}class mv{constructor(e,r={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},hd),r),this.fetch=Xo(n)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(e){return $(this,void 0,void 0,function*(){try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield pt(this.fetch,`${this.url}/PutVectors`,e,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ct(r))return{data:null,error:r};throw r}})}getVectors(e){return $(this,void 0,void 0,function*(){try{return{data:yield pt(this.fetch,`${this.url}/GetVectors`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ct(r))return{data:null,error:r};throw r}})}listVectors(e){return $(this,void 0,void 0,function*(){try{if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:yield pt(this.fetch,`${this.url}/ListVectors`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ct(r))return{data:null,error:r};throw r}})}queryVectors(e){return $(this,void 0,void 0,function*(){try{return{data:yield pt(this.fetch,`${this.url}/QueryVectors`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ct(r))return{data:null,error:r};throw r}})}deleteVectors(e){return $(this,void 0,void 0,function*(){try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield pt(this.fetch,`${this.url}/DeleteVectors`,e,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ct(r))return{data:null,error:r};throw r}})}}class pv{constructor(e,r={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},hd),r),this.fetch=Xo(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return $(this,void 0,void 0,function*(){try{return{data:(yield pt(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ct(r))return{data:null,error:r};throw r}})}getBucket(e){return $(this,void 0,void 0,function*(){try{return{data:yield pt(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:e},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ct(r))return{data:null,error:r};throw r}})}listBuckets(){return $(this,arguments,void 0,function*(e={}){try{return{data:yield pt(this.fetch,`${this.url}/ListVectorBuckets`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ct(r))return{data:null,error:r};throw r}})}deleteBucket(e){return $(this,void 0,void 0,function*(){try{return{data:(yield pt(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ct(r))return{data:null,error:r};throw r}})}}class gv extends pv{constructor(e,r={}){super(e,r.headers||{},r.fetch)}from(e){return new vv(this.url,this.headers,e,this.fetch)}createBucket(e){const r=Object.create(null,{createBucket:{get:()=>super.createBucket}});return $(this,void 0,void 0,function*(){return r.createBucket.call(this,e)})}getBucket(e){const r=Object.create(null,{getBucket:{get:()=>super.getBucket}});return $(this,void 0,void 0,function*(){return r.getBucket.call(this,e)})}listBuckets(){const e=Object.create(null,{listBuckets:{get:()=>super.listBuckets}});return $(this,arguments,void 0,function*(r={}){return e.listBuckets.call(this,r)})}deleteBucket(e){const r=Object.create(null,{deleteBucket:{get:()=>super.deleteBucket}});return $(this,void 0,void 0,function*(){return r.deleteBucket.call(this,e)})}}class vv extends fv{constructor(e,r,n,i){super(e,r,i),this.vectorBucketName=n}createIndex(e){const r=Object.create(null,{createIndex:{get:()=>super.createIndex}});return $(this,void 0,void 0,function*(){return r.createIndex.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const e=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return $(this,arguments,void 0,function*(r={}){return e.listIndexes.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName}))})}getIndex(e){const r=Object.create(null,{getIndex:{get:()=>super.getIndex}});return $(this,void 0,void 0,function*(){return r.getIndex.call(this,this.vectorBucketName,e)})}deleteIndex(e){const r=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return $(this,void 0,void 0,function*(){return r.deleteIndex.call(this,this.vectorBucketName,e)})}index(e){return new yv(this.url,this.headers,this.vectorBucketName,e,this.fetch)}}class yv extends mv{constructor(e,r,n,i,s){super(e,r,s),this.vectorBucketName=n,this.indexName=i}putVectors(e){const r=Object.create(null,{putVectors:{get:()=>super.putVectors}});return $(this,void 0,void 0,function*(){return r.putVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(e){const r=Object.create(null,{getVectors:{get:()=>super.getVectors}});return $(this,void 0,void 0,function*(){return r.getVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const e=Object.create(null,{listVectors:{get:()=>super.listVectors}});return $(this,arguments,void 0,function*(r={}){return e.listVectors.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(e){const r=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return $(this,void 0,void 0,function*(){return r.queryVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(e){const r=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return $(this,void 0,void 0,function*(){return r.deleteVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class V_ extends T_{constructor(e,r={},n,i){super(e,r,n,i)}from(e){return new C_(this.url,this.headers,e,this.fetch)}get vectors(){return new gv(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new uv(this.url+"/iceberg",this.headers,this.fetch)}}const z_=Object.freeze(Object.defineProperty({__proto__:null,StorageAnalyticsClient:uv,StorageApiError:av,StorageClient:V_,StorageError:Fs,StorageUnknownError:wo,StorageVectorsApiError:Ia,StorageVectorsClient:gv,StorageVectorsError:fd,get StorageVectorsErrorCode(){return nu},StorageVectorsUnknownError:dv,VectorBucketApi:pv,VectorBucketScope:vv,VectorDataApi:mv,VectorIndexApi:fv,VectorIndexScope:yv,isPlainObject:hv,isStorageError:xe,isStorageVectorsError:ct,normalizeToFloat32:$_,resolveFetch:Xo,resolveResponse:L_,validateVectorDimension:M_},Symbol.toStringTag,{value:"Module"})),H_=Is(z_);var wv={},el={};Object.defineProperty(el,"__esModule",{value:!0});el.version=void 0;el.version="2.86.2";(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_REALTIME_OPTIONS=t.DEFAULT_AUTH_OPTIONS=t.DEFAULT_DB_OPTIONS=t.DEFAULT_GLOBAL_OPTIONS=t.DEFAULT_HEADERS=void 0;const e=el;let r="";typeof Deno<"u"?r="deno":typeof document<"u"?r="web":typeof navigator<"u"&&navigator.product==="ReactNative"?r="react-native":r="node",t.DEFAULT_HEADERS={"X-Client-Info":`supabase-js-${r}/${e.version}`},t.DEFAULT_GLOBAL_OPTIONS={headers:t.DEFAULT_HEADERS},t.DEFAULT_DB_OPTIONS={schema:"public"},t.DEFAULT_AUTH_OPTIONS={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},t.DEFAULT_REALTIME_OPTIONS={}})(wv);var xv={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.fetchWithAuth=t.resolveHeadersConstructor=t.resolveFetch=void 0;const e=i=>i?(...s)=>i(...s):(...s)=>fetch(...s);t.resolveFetch=e;const r=()=>Headers;t.resolveHeadersConstructor=r;const n=(i,s,a)=>{const o=(0,t.resolveFetch)(a),c=(0,t.resolveHeadersConstructor)();return async(u,d)=>{var f;const m=(f=await s())!==null&&f!==void 0?f:i;let g=new c(d==null?void 0:d.headers);return g.has("apikey")||g.set("apikey",i),g.has("Authorization")||g.set("Authorization",`Bearer ${m}`),o(u,Object.assign(Object.assign({},d),{headers:g}))}};t.fetchWithAuth=n})(xv);var tn={};Object.defineProperty(tn,"__esModule",{value:!0});tn.isBrowser=void 0;tn.uuid=W_;tn.ensureTrailingSlash=_v;tn.applySettingDefaults=G_;tn.validateSupabaseUrl=K_;function W_(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=Math.random()*16|0,r=t=="x"?e:e&3|8;return r.toString(16)})}function _v(t){return t.endsWith("/")?t:t+"/"}const q_=()=>typeof window<"u";tn.isBrowser=q_;function G_(t,e){var r,n;const{db:i,auth:s,realtime:a,global:o}=t,{db:c,auth:u,realtime:d,global:f}=e,m={db:Object.assign(Object.assign({},c),i),auth:Object.assign(Object.assign({},u),s),realtime:Object.assign(Object.assign({},d),a),storage:{},global:Object.assign(Object.assign(Object.assign({},f),o),{headers:Object.assign(Object.assign({},(r=f==null?void 0:f.headers)!==null&&r!==void 0?r:{}),(n=o==null?void 0:o.headers)!==null&&n!==void 0?n:{})}),accessToken:async()=>""};return t.accessToken?m.accessToken=t.accessToken:delete m.accessToken,m}function K_(t){const e=t==null?void 0:t.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(_v(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var tl={};const bv="2.86.2",Vn=30*1e3,iu=3,zl=iu*Vn,J_="http://localhost:9999",Y_="supabase.auth.token",Z_={"X-Client-Info":`gotrue-js/${bv}`},su="X-Supabase-Api-Version",kv={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Q_=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,X_=10*60*1e3;let ji=class extends Error{constructor(e,r,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}};function F(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}let Sv=class extends ji{constructor(e,r,n){super(e,r,n),this.name="AuthApiError",this.status=r,this.code=n}};function jv(t){return F(t)&&t.name==="AuthApiError"}let Pr=class extends ji{constructor(e,r){super(e),this.name="AuthUnknownError",this.originalError=r}},br=class extends ji{constructor(e,r,n,i){super(e,n,i),this.name=r,this.status=n}},at=class extends br{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}};function Nv(t){return F(t)&&t.name==="AuthSessionMissingError"}let cn=class extends br{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}},Qi=class extends br{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}},Xi=class extends br{constructor(e,r=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}};function Ev(t){return F(t)&&t.name==="AuthImplicitGrantRedirectError"}let au=class extends br{constructor(e,r=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}},xo=class extends br{constructor(e,r){super(e,"AuthRetryableFetchError",r,void 0)}};function Da(t){return F(t)&&t.name==="AuthRetryableFetchError"}let ou=class extends br{constructor(e,r,n){super(e,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}};function eb(t){return F(t)&&t.name==="AuthWeakPasswordError"}let _o=class extends br{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}};const bo="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),vf=` 	
\r=`.split(""),tb=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<vf.length;e+=1)t[vf[e].charCodeAt(0)]=-2;for(let e=0;e<bo.length;e+=1)t[bo[e].charCodeAt(0)]=e;return t})();function yf(t,e,r){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;r(bo[n]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;r(bo[n]),e.queuedBits-=6}}function Cv(t,e,r){const n=tb[t];if(n>-1)for(e.queue=e.queue<<6|n,e.queuedBits+=6;e.queuedBits>=8;)r(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function wf(t){const e=[],r=a=>{e.push(String.fromCodePoint(a))},n={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},s=a=>{ib(a,n,r)};for(let a=0;a<t.length;a+=1)Cv(t.charCodeAt(a),i,s);return e.join("")}function rb(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function nb(t,e){for(let r=0;r<t.length;r+=1){let n=t.charCodeAt(r);if(n>55295&&n<=56319){const i=(n-55296)*1024&65535;n=(t.charCodeAt(r+1)-56320&65535|i)+65536,r+=1}rb(n,e)}}function ib(t,e,r){if(e.utf8seq===0){if(t<=127){r(t);return}for(let n=1;n<6;n+=1)if(!(t>>7-n&1)){e.utf8seq=n;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&r(e.codepoint)}}function ui(t){const e=[],r={queue:0,queuedBits:0},n=i=>{e.push(i)};for(let i=0;i<t.length;i+=1)Cv(t.charCodeAt(i),r,n);return new Uint8Array(e)}function sb(t){const e=[];return nb(t,r=>e.push(r)),new Uint8Array(e)}function yn(t){const e=[],r={queue:0,queuedBits:0},n=i=>{e.push(i)};return t.forEach(i=>yf(i,r,n)),yf(null,r,n),e.join("")}function ab(t){return Math.round(Date.now()/1e3)+t}function ob(){return Symbol("auth-callback")}const Ve=()=>typeof window<"u"&&typeof document<"u",nn={tested:!1,writable:!1},Tv=()=>{if(!Ve())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(nn.tested)return nn.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),nn.tested=!0,nn.writable=!0}catch{nn.tested=!0,nn.writable=!1}return nn.writable};function lb(t){const e={},r=new URL(t);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((i,s)=>{e[s]=i})}catch{}return r.searchParams.forEach((n,i)=>{e[i]=n}),e}const Av=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),cb=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",zn=async(t,e,r)=>{await t.setItem(e,JSON.stringify(r))},sn=async(t,e)=>{const r=await t.getItem(e);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Be=async(t,e)=>{await t.removeItem(e)};class rl{constructor(){this.promise=new rl.promiseConstructor((e,r)=>{this.resolve=e,this.reject=r})}}rl.promiseConstructor=Promise;function Hl(t){const e=t.split(".");if(e.length!==3)throw new _o("Invalid JWT structure");for(let n=0;n<e.length;n++)if(!Q_.test(e[n]))throw new _o("JWT not in base64url format");return{header:JSON.parse(wf(e[0])),payload:JSON.parse(wf(e[1])),signature:ui(e[2]),raw:{header:e[0],payload:e[1]}}}async function ub(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function db(t,e){return new Promise((n,i)=>{(async()=>{for(let s=0;s<1/0;s++)try{const a=await t(s);if(!e(s,null,a)){n(a);return}}catch(a){if(!e(s,a)){i(a);return}}})()})}function hb(t){return("0"+t.toString(16)).substr(-2)}function fb(){const e=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let i="";for(let s=0;s<56;s++)i+=r.charAt(Math.floor(Math.random()*n));return i}return crypto.getRandomValues(e),Array.from(e,hb).join("")}async function mb(t){const r=new TextEncoder().encode(t),n=await crypto.subtle.digest("SHA-256",r),i=new Uint8Array(n);return Array.from(i).map(s=>String.fromCharCode(s)).join("")}async function pb(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const r=await mb(t);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Ln(t,e,r=!1){const n=fb();let i=n;r&&(i+="/PASSWORD_RECOVERY"),await zn(t,`${e}-code-verifier`,i);const s=await pb(n);return[s,n===s?"plain":"s256"]}const gb=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function vb(t){const e=t.headers.get(su);if(!e||!e.match(gb))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function yb(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function wb(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const xb=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function $n(t){if(!xb.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Wl(){const t={};return new Proxy(t,{get:(e,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function _b(t,e){return new Proxy(t,{get:(r,n,i)=>{if(n==="__isInsecureUserWarningProxy")return!0;if(typeof n=="symbol"){const s=n.toString();if(s==="Symbol(Symbol.toPrimitive)"||s==="Symbol(Symbol.toStringTag)"||s==="Symbol(util.inspect.custom)"||s==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(r,n,i)}return!e.value&&typeof n=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(r,n,i)}})}function xf(t){return JSON.parse(JSON.stringify(t))}const un=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),bb=[502,503,504];async function _f(t){var e;if(!cb(t))throw new xo(un(t),0);if(bb.includes(t.status))throw new xo(un(t),t.status);let r;try{r=await t.json()}catch(s){throw new Pr(un(s),s)}let n;const i=vb(t);if(i&&i.getTime()>=kv["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new ou(un(r),t.status,((e=r.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(n==="session_not_found")throw new at}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((s,a)=>s&&typeof a=="string",!0))throw new ou(un(r),t.status,r.weak_password.reasons);throw new Sv(un(r),t.status||500,n)}const kb=(t,e,r,n)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),i.body=JSON.stringify(n),Object.assign(Object.assign({},i),r))};async function W(t,e,r,n){var i;const s=Object.assign({},n==null?void 0:n.headers);s[su]||(s[su]=kv["2024-01-01"].name),n!=null&&n.jwt&&(s.Authorization=`Bearer ${n.jwt}`);const a=(i=n==null?void 0:n.query)!==null&&i!==void 0?i:{};n!=null&&n.redirectTo&&(a.redirect_to=n.redirectTo);const o=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",c=await Sb(t,e,r+o,{headers:s,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(c):{data:Object.assign({},c),error:null}}async function Sb(t,e,r,n,i,s){const a=kb(e,n,i,s);let o;try{o=await t(r,Object.assign({},a))}catch(c){throw console.error(c),new xo(un(c),0)}if(o.ok||await _f(o),n!=null&&n.noResolveJson)return o;try{return await o.json()}catch(c){await _f(c)}}function It(t){var e;let r=null;Eb(t)&&(r=Object.assign({},t),t.expires_at||(r.expires_at=ab(t.expires_in)));const n=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:r,user:n},error:null}}function bf(t){const e=It(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Ir(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function jb(t){return{data:t,error:null}}function Nb(t){const{action_link:e,email_otp:r,hashed_token:n,redirect_to:i,verification_type:s}=t,a=Ai(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),o={action_link:e,email_otp:r,hashed_token:n,redirect_to:i,verification_type:s},c=Object.assign({},a);return{data:{properties:o,user:c},error:null}}function kf(t){return t}function Eb(t){return t.access_token&&t.refresh_token&&t.expires_in}const La=["global","local","others"];let md=class{constructor({url:e="",headers:r={},fetch:n}){this.url=e,this.headers=r,this.fetch=Av(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,r=La[0]){if(La.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${La.join(", ")}`);try{return await W(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(F(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e,r={}){try{return await W(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Ir})}catch(n){if(F(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:r}=e,n=Ai(e,["options"]),i=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(i.new_email=n==null?void 0:n.newEmail,delete i.newEmail),await W(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:Nb,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(F(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(e){try{return await W(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Ir})}catch(r){if(F(r))return{data:{user:null},error:r};throw r}}async listUsers(e){var r,n,i,s,a,o,c;try{const u={nextPage:null,lastPage:0,total:0},d=await W(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=e==null?void 0:e.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(s=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""},xform:kf});if(d.error)throw d.error;const f=await d.json(),m=(a=d.headers.get("x-total-count"))!==null&&a!==void 0?a:0,g=(c=(o=d.headers.get("link"))===null||o===void 0?void 0:o.split(","))!==null&&c!==void 0?c:[];return g.length>0&&(g.forEach(y=>{const w=parseInt(y.split(";")[0].split("=")[1].substring(0,1)),b=JSON.parse(y.split(";")[1].split("=")[1]);u[`${b}Page`]=w}),u.total=parseInt(m)),{data:Object.assign(Object.assign({},f),u),error:null}}catch(u){if(F(u))return{data:{users:[]},error:u};throw u}}async getUserById(e){$n(e);try{return await W(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Ir})}catch(r){if(F(r))return{data:{user:null},error:r};throw r}}async updateUserById(e,r){$n(e);try{return await W(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:r,headers:this.headers,xform:Ir})}catch(n){if(F(n))return{data:{user:null},error:n};throw n}}async deleteUser(e,r=!1){$n(e);try{return await W(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:r},xform:Ir})}catch(n){if(F(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){$n(e.userId);try{const{data:r,error:n}=await W(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:r,error:n}}catch(r){if(F(r))return{data:null,error:r};throw r}}async _deleteFactor(e){$n(e.userId),$n(e.id);try{return{data:await W(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(r){if(F(r))return{data:null,error:r};throw r}}async _listOAuthClients(e){var r,n,i,s,a,o,c;try{const u={nextPage:null,lastPage:0,total:0},d=await W(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=e==null?void 0:e.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(s=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""},xform:kf});if(d.error)throw d.error;const f=await d.json(),m=(a=d.headers.get("x-total-count"))!==null&&a!==void 0?a:0,g=(c=(o=d.headers.get("link"))===null||o===void 0?void 0:o.split(","))!==null&&c!==void 0?c:[];return g.length>0&&(g.forEach(y=>{const w=parseInt(y.split(";")[0].split("=")[1].substring(0,1)),b=JSON.parse(y.split(";")[1].split("=")[1]);u[`${b}Page`]=w}),u.total=parseInt(m)),{data:Object.assign(Object.assign({},f),u),error:null}}catch(u){if(F(u))return{data:{clients:[]},error:u};throw u}}async _createOAuthClient(e){try{return await W(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(F(r))return{data:null,error:r};throw r}}async _getOAuthClient(e){try{return await W(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(F(r))return{data:null,error:r};throw r}}async _updateOAuthClient(e,r){try{return await W(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:r,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(F(n))return{data:null,error:n};throw n}}async _deleteOAuthClient(e){try{return await W(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(r){if(F(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(e){try{return await W(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(F(r))return{data:null,error:r};throw r}}};function Sf(t={}){return{getItem:e=>t[e]||null,setItem:(e,r)=>{t[e]=r},removeItem:e=>{delete t[e]}}}const dn={debug:!!(globalThis&&Tv()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class pd extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}let Ov=class extends pd{};class Cb extends pd{}async function Rv(t,e,r){dn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const n=new globalThis.AbortController;return e>0&&setTimeout(()=>{n.abort(),dn.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async i=>{if(i){dn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,i.name);try{return await r()}finally{dn.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,i.name)}}else{if(e===0)throw dn.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new Ov(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(dn.debug)try{const s=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(s,null,"  "))}catch(s){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",s)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}const jf={};async function Tb(t,e,r){var n;const i=(n=jf[t])!==null&&n!==void 0?n:Promise.resolve(),s=Promise.race([i.catch(()=>null),e>=0?new Promise((a,o)=>{setTimeout(()=>{o(new Cb(`Acquring process lock with name "${t}" timed out`))},e)}):null].filter(a=>a)).catch(a=>{if(a&&a.isAcquireTimeout)throw a;return null}).then(async()=>await r());return jf[t]=s.catch(async a=>{if(a&&a.isAcquireTimeout)return await i,null;throw a}),await s}function Ab(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function Pv(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function Ob(t){return parseInt(t,16)}function Rb(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,n=>n.toString(16).padStart(2,"0")).join("")}function Pb(t){var e;const{chainId:r,domain:n,expirationTime:i,issuedAt:s=new Date,nonce:a,notBefore:o,requestId:c,resources:u,scheme:d,uri:f,version:m}=t;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!n)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(a&&a.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${a}`);if(!f)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(m!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${m}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const g=Pv(t.address),y=d?`${d}://${n}`:n,w=t.statement?`${t.statement}
`:"",b=`${y} wants you to sign in with your Ethereum account:
${g}

${w}`;let v=`URI: ${f}
Version: ${m}
Chain ID: ${r}${a?`
Nonce: ${a}`:""}
Issued At: ${s.toISOString()}`;if(i&&(v+=`
Expiration Time: ${i.toISOString()}`),o&&(v+=`
Not Before: ${o.toISOString()}`),c&&(v+=`
Request ID: ${c}`),u){let h=`
Resources:`;for(const p of u){if(!p||typeof p!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${p}`);h+=`
- ${p}`}v+=h}return`${b}
${v}`}class Re extends Error{constructor({message:e,code:r,cause:n,name:i}){var s;super(e,{cause:n}),this.__isWebAuthnError=!0,this.name=(s=i??(n instanceof Error?n.name:void 0))!==null&&s!==void 0?s:"Unknown Error",this.code=r}}class ko extends Re{constructor(e,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:e}),this.name="WebAuthnUnknownError",this.originalError=r}}function Ib({error:t,options:e}){var r,n,i;const{publicKey:s}=e;if(!s)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Re({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((r=s.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new Re({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(e.mediation==="conditional"&&((n=s.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new Re({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((i=s.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new Re({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new Re({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new Re({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return s.pubKeyCredParams.filter(o=>o.type==="public-key").length===0?new Re({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new Re({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const a=window.location.hostname;if(Iv(a)){if(s.rp.id!==a)return new Re({message:`The RP ID "${s.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new Re({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(s.user.id.byteLength<1||s.user.id.byteLength>64)return new Re({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new Re({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new Re({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function Db({error:t,options:e}){const{publicKey:r}=e;if(!r)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Re({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new Re({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const n=window.location.hostname;if(Iv(n)){if(r.rpId!==n)return new Re({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new Re({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new Re({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new Re({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}class Lb{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const $b=new Lb;function Mb(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:e,user:r,excludeCredentials:n}=t,i=Ai(t,["challenge","user","excludeCredentials"]),s=ui(e).buffer,a=Object.assign(Object.assign({},r),{id:ui(r.id).buffer}),o=Object.assign(Object.assign({},i),{challenge:s,user:a});if(n&&n.length>0){o.excludeCredentials=new Array(n.length);for(let c=0;c<n.length;c++){const u=n[c];o.excludeCredentials[c]=Object.assign(Object.assign({},u),{id:ui(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return o}function Ub(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:e,allowCredentials:r}=t,n=Ai(t,["challenge","allowCredentials"]),i=ui(e).buffer,s=Object.assign(Object.assign({},n),{challenge:i});if(r&&r.length>0){s.allowCredentials=new Array(r.length);for(let a=0;a<r.length;a++){const o=r[a];s.allowCredentials[a]=Object.assign(Object.assign({},o),{id:ui(o.id).buffer,type:o.type||"public-key",transports:o.transports})}}return s}function Fb(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const r=t;return{id:t.id,rawId:t.id,response:{attestationObject:yn(new Uint8Array(t.response.attestationObject)),clientDataJSON:yn(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(e=r.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function Bb(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const r=t,n=t.getClientExtensionResults(),i=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:yn(new Uint8Array(i.authenticatorData)),clientDataJSON:yn(new Uint8Array(i.clientDataJSON)),signature:yn(new Uint8Array(i.signature)),userHandle:i.userHandle?yn(new Uint8Array(i.userHandle)):void 0},type:"public-key",clientExtensionResults:n,authenticatorAttachment:(e=r.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function Iv(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function Nf(){var t,e;return!!(Ve()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function Vb(t){try{const e=await navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new ko("Browser returned unexpected credential type",e)}:{data:null,error:new ko("Empty credential response",e)}}catch(e){return{data:null,error:Ib({error:e,options:t})}}}async function zb(t){try{const e=await navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new ko("Browser returned unexpected credential type",e)}:{data:null,error:new ko("Empty credential response",e)}}catch(e){return{data:null,error:Db({error:e,options:t})}}}const Hb={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},Wb={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function So(...t){const e=i=>i!==null&&typeof i=="object"&&!Array.isArray(i),r=i=>i instanceof ArrayBuffer||ArrayBuffer.isView(i),n={};for(const i of t)if(i)for(const s in i){const a=i[s];if(a!==void 0)if(Array.isArray(a))n[s]=a;else if(r(a))n[s]=a;else if(e(a)){const o=n[s];e(o)?n[s]=So(o,a):n[s]=So(a)}else n[s]=a}return n}function qb(t,e){return So(Hb,t,e||{})}function Gb(t,e){return So(Wb,t,e||{})}class Kb{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:r,friendlyName:n,signal:i},s){try{const{data:a,error:o}=await this.client.mfa.challenge({factorId:e,webauthn:r});if(!a)return{data:null,error:o};const c=i??$b.createNewAbortSignal();if(a.webauthn.type==="create"){const{user:u}=a.webauthn.credential_options.publicKey;u.name||(u.name=`${u.id}:${n}`),u.displayName||(u.displayName=u.name)}switch(a.webauthn.type){case"create":{const u=qb(a.webauthn.credential_options.publicKey,s==null?void 0:s.create),{data:d,error:f}=await Vb({publicKey:u,signal:c});return d?{data:{factorId:e,challengeId:a.id,webauthn:{type:a.webauthn.type,credential_response:d}},error:null}:{data:null,error:f}}case"request":{const u=Gb(a.webauthn.credential_options.publicKey,s==null?void 0:s.request),{data:d,error:f}=await zb(Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:u,signal:c}));return d?{data:{factorId:e,challengeId:a.id,webauthn:{type:a.webauthn.type,credential_response:d}},error:null}:{data:null,error:f}}}}catch(a){return F(a)?{data:null,error:a}:{data:null,error:new Pr("Unexpected error in challenge",a)}}}async _verify({challengeId:e,factorId:r,webauthn:n}){return this.client.mfa.verify({factorId:r,challengeId:e,webauthn:n})}async _authenticate({factorId:e,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},s){if(!r)return{data:null,error:new ji("rpId is required for WebAuthn authentication")};try{if(!Nf())return{data:null,error:new Pr("Browser does not support WebAuthn",null)};const{data:a,error:o}=await this.challenge({factorId:e,webauthn:{rpId:r,rpOrigins:n},signal:i},{request:s});if(!a)return{data:null,error:o};const{webauthn:c}=a;return this._verify({factorId:e,challengeId:a.challengeId,webauthn:{type:c.type,rpId:r,rpOrigins:n,credential_response:c.credential_response}})}catch(a){return F(a)?{data:null,error:a}:{data:null,error:new Pr("Unexpected error in authenticate",a)}}}async _register({friendlyName:e,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},s){if(!r)return{data:null,error:new ji("rpId is required for WebAuthn registration")};try{if(!Nf())return{data:null,error:new Pr("Browser does not support WebAuthn",null)};const{data:a,error:o}=await this._enroll({friendlyName:e});if(!a)return await this.client.mfa.listFactors().then(d=>{var f;return(f=d.data)===null||f===void 0?void 0:f.all.find(m=>m.factor_type==="webauthn"&&m.friendly_name===e&&m.status!=="unverified")}).then(d=>d?this.client.mfa.unenroll({factorId:d==null?void 0:d.id}):void 0),{data:null,error:o};const{data:c,error:u}=await this._challenge({factorId:a.id,friendlyName:a.friendly_name,webauthn:{rpId:r,rpOrigins:n},signal:i},{create:s});return c?this._verify({factorId:a.id,challengeId:c.challengeId,webauthn:{rpId:r,rpOrigins:n,type:c.webauthn.type,credential_response:c.webauthn.credential_response}}):{data:null,error:u}}catch(a){return F(a)?{data:null,error:a}:{data:null,error:new Pr("Unexpected error in register",a)}}}}Ab();const Jb={url:J_,storageKey:Y_,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Z_,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function Ef(t,e,r){return await r()}const Mn={};let gd=class lu{get jwks(){var e,r;return(r=(e=Mn[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(e){Mn[this.storageKey]=Object.assign(Object.assign({},Mn[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,r;return(r=(e=Mn[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Mn[this.storageKey]=Object.assign(Object.assign({},Mn[this.storageKey]),{cachedAt:e})}constructor(e){var r,n,i;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const s=Object.assign(Object.assign({},Jb),e);if(this.storageKey=s.storageKey,this.instanceID=(r=lu.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,lu.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.instanceID>0&&Ve()){const a=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(a),this.logDebugMessages&&console.trace(a)}if(this.persistSession=s.persistSession,this.autoRefreshToken=s.autoRefreshToken,this.admin=new md({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=Av(s.fetch),this.lock=s.lock||Ef,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,this.throwOnError=s.throwOnError,s.lock?this.lock=s.lock:Ve()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=Rv:this.lock=Ef,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new Kb(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(s.storage?this.storage=s.storage:Tv()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Sf(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=Sf(this.memoryStorage)),Ve()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}(i=this.broadcastChannel)===null||i===void 0||i.addEventListener("message",async a=>{this._debug("received broadcast notification from other tab or client",a),await this._notifyAllSubscribers(a.data.event,a.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${bv}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let r={},n="none";if(Ve()&&(r=lb(window.location.href),this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce")),Ve()&&this.detectSessionInUrl&&n!=="none"){const{data:i,error:s}=await this._getSessionFromURL(r,n);if(s){if(this._debug("#_initialize()","error detecting session from URL",s),Ev(s)){const c=(e=s.details)===null||e===void 0?void 0:e.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:s}}return await this._removeSession(),{error:s}}const{session:a,redirectType:o}=i;return this._debug("#_initialize()","detected session in URL",a,"redirect type",o),await this._saveSession(a),setTimeout(async()=>{o==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",a):await this._notifyAllSubscribers("SIGNED_IN",a)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return F(r)?this._returnResult({error:r}):this._returnResult({error:new Pr("Unexpected error during initialization",r)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var r,n,i;try{const s=await W(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=e==null?void 0:e.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(i=e==null?void 0:e.options)===null||i===void 0?void 0:i.captchaToken}},xform:It}),{data:a,error:o}=s;if(o||!a)return this._returnResult({data:{user:null,session:null},error:o});const c=a.session,u=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(s){if(F(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signUp(e){var r,n,i;try{let s;if("email"in e){const{email:d,password:f,options:m}=e;let g=null,y=null;this.flowType==="pkce"&&([g,y]=await Ln(this.storage,this.storageKey)),s=await W(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:m==null?void 0:m.emailRedirectTo,body:{email:d,password:f,data:(r=m==null?void 0:m.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},code_challenge:g,code_challenge_method:y},xform:It})}else if("phone"in e){const{phone:d,password:f,options:m}=e;s=await W(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:f,data:(n=m==null?void 0:m.data)!==null&&n!==void 0?n:{},channel:(i=m==null?void 0:m.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken}},xform:It})}else throw new Qi("You must provide either an email or phone number and a password");const{data:a,error:o}=s;if(o||!a)return await Be(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:o});const c=a.session,u=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(s){if(await Be(this.storage,`${this.storageKey}-code-verifier`),F(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithPassword(e){try{let r;if("email"in e){const{email:s,password:a,options:o}=e;r=await W(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:a,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:bf})}else if("phone"in e){const{phone:s,password:a,options:o}=e;r=await W(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:a,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:bf})}else throw new Qi("You must provide either an email or phone number and a password");const{data:n,error:i}=r;if(i)return this._returnResult({data:{user:null,session:null},error:i});if(!n||!n.session||!n.user){const s=new cn;return this._returnResult({data:{user:null,session:null},error:s})}return n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),this._returnResult({data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:i})}catch(r){if(F(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOAuth(e){var r,n,i,s;return await this._handleProviderSignIn(e.provider,{redirectTo:(r=e.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=e.options)===null||n===void 0?void 0:n.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(s=e.options)===null||s===void 0?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:r}=e;switch(r){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(e){var r,n,i,s,a,o,c,u,d,f,m;let g,y;if("message"in e)g=e.message,y=e.signature;else{const{chain:w,wallet:b,statement:v,options:h}=e;let p;if(Ve())if(typeof b=="object")p=b;else{const G=window;if("ethereum"in G&&typeof G.ethereum=="object"&&"request"in G.ethereum&&typeof G.ethereum.request=="function")p=G.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof b!="object"||!(h!=null&&h.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");p=b}const _=new URL((r=h==null?void 0:h.url)!==null&&r!==void 0?r:window.location.href),S=await p.request({method:"eth_requestAccounts"}).then(G=>G).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!S||S.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const N=Pv(S[0]);let E=(n=h==null?void 0:h.signInWithEthereum)===null||n===void 0?void 0:n.chainId;if(!E){const G=await p.request({method:"eth_chainId"});E=Ob(G)}const P={domain:_.host,address:N,statement:v,uri:_.href,version:"1",chainId:E,nonce:(i=h==null?void 0:h.signInWithEthereum)===null||i===void 0?void 0:i.nonce,issuedAt:(a=(s=h==null?void 0:h.signInWithEthereum)===null||s===void 0?void 0:s.issuedAt)!==null&&a!==void 0?a:new Date,expirationTime:(o=h==null?void 0:h.signInWithEthereum)===null||o===void 0?void 0:o.expirationTime,notBefore:(c=h==null?void 0:h.signInWithEthereum)===null||c===void 0?void 0:c.notBefore,requestId:(u=h==null?void 0:h.signInWithEthereum)===null||u===void 0?void 0:u.requestId,resources:(d=h==null?void 0:h.signInWithEthereum)===null||d===void 0?void 0:d.resources};g=Pb(P),y=await p.request({method:"personal_sign",params:[Rb(g),N]})}try{const{data:w,error:b}=await W(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:g,signature:y},!((f=e.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(m=e.options)===null||m===void 0?void 0:m.captchaToken}}:null),xform:It});if(b)throw b;if(!w||!w.session||!w.user){const v=new cn;return this._returnResult({data:{user:null,session:null},error:v})}return w.session&&(await this._saveSession(w.session),await this._notifyAllSubscribers("SIGNED_IN",w.session)),this._returnResult({data:Object.assign({},w),error:b})}catch(w){if(F(w))return this._returnResult({data:{user:null,session:null},error:w});throw w}}async signInWithSolana(e){var r,n,i,s,a,o,c,u,d,f,m,g;let y,w;if("message"in e)y=e.message,w=e.signature;else{const{chain:b,wallet:v,statement:h,options:p}=e;let _;if(Ve())if(typeof v=="object")_=v;else{const N=window;if("solana"in N&&typeof N.solana=="object"&&("signIn"in N.solana&&typeof N.solana.signIn=="function"||"signMessage"in N.solana&&typeof N.solana.signMessage=="function"))_=N.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof v!="object"||!(p!=null&&p.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");_=v}const S=new URL((r=p==null?void 0:p.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in _&&_.signIn){const N=await _.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},p==null?void 0:p.signInWithSolana),{version:"1",domain:S.host,uri:S.href}),h?{statement:h}:null));let E;if(Array.isArray(N)&&N[0]&&typeof N[0]=="object")E=N[0];else if(N&&typeof N=="object"&&"signedMessage"in N&&"signature"in N)E=N;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in E&&"signature"in E&&(typeof E.signedMessage=="string"||E.signedMessage instanceof Uint8Array)&&E.signature instanceof Uint8Array)y=typeof E.signedMessage=="string"?E.signedMessage:new TextDecoder().decode(E.signedMessage),w=E.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in _)||typeof _.signMessage!="function"||!("publicKey"in _)||typeof _!="object"||!_.publicKey||!("toBase58"in _.publicKey)||typeof _.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");y=[`${S.host} wants you to sign in with your Solana account:`,_.publicKey.toBase58(),...h?["",h,""]:[""],"Version: 1",`URI: ${S.href}`,`Issued At: ${(i=(n=p==null?void 0:p.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((s=p==null?void 0:p.signInWithSolana)===null||s===void 0)&&s.notBefore?[`Not Before: ${p.signInWithSolana.notBefore}`]:[],...!((a=p==null?void 0:p.signInWithSolana)===null||a===void 0)&&a.expirationTime?[`Expiration Time: ${p.signInWithSolana.expirationTime}`]:[],...!((o=p==null?void 0:p.signInWithSolana)===null||o===void 0)&&o.chainId?[`Chain ID: ${p.signInWithSolana.chainId}`]:[],...!((c=p==null?void 0:p.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${p.signInWithSolana.nonce}`]:[],...!((u=p==null?void 0:p.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${p.signInWithSolana.requestId}`]:[],...!((f=(d=p==null?void 0:p.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||f===void 0)&&f.length?["Resources",...p.signInWithSolana.resources.map(E=>`- ${E}`)]:[]].join(`
`);const N=await _.signMessage(new TextEncoder().encode(y),"utf8");if(!N||!(N instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");w=N}}try{const{data:b,error:v}=await W(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:y,signature:yn(w)},!((m=e.options)===null||m===void 0)&&m.captchaToken?{gotrue_meta_security:{captcha_token:(g=e.options)===null||g===void 0?void 0:g.captchaToken}}:null),xform:It});if(v)throw v;if(!b||!b.session||!b.user){const h=new cn;return this._returnResult({data:{user:null,session:null},error:h})}return b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("SIGNED_IN",b.session)),this._returnResult({data:Object.assign({},b),error:v})}catch(b){if(F(b))return this._returnResult({data:{user:null,session:null},error:b});throw b}}async _exchangeCodeForSession(e){const r=await sn(this.storage,`${this.storageKey}-code-verifier`),[n,i]=(r??"").split("/");try{const{data:s,error:a}=await W(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:It});if(await Be(this.storage,`${this.storageKey}-code-verifier`),a)throw a;if(!s||!s.session||!s.user){const o=new cn;return this._returnResult({data:{user:null,session:null,redirectType:null},error:o})}return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),this._returnResult({data:Object.assign(Object.assign({},s),{redirectType:i??null}),error:a})}catch(s){if(await Be(this.storage,`${this.storageKey}-code-verifier`),F(s))return this._returnResult({data:{user:null,session:null,redirectType:null},error:s});throw s}}async signInWithIdToken(e){try{const{options:r,provider:n,token:i,access_token:s,nonce:a}=e,o=await W(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:i,access_token:s,nonce:a,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:It}),{data:c,error:u}=o;if(u)return this._returnResult({data:{user:null,session:null},error:u});if(!c||!c.session||!c.user){const d=new cn;return this._returnResult({data:{user:null,session:null},error:d})}return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),this._returnResult({data:c,error:u})}catch(r){if(F(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOtp(e){var r,n,i,s,a;try{if("email"in e){const{email:o,options:c}=e;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await Ln(this.storage,this.storageKey));const{error:f}=await W(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:o,data:(r=c==null?void 0:c.data)!==null&&r!==void 0?r:{},create_user:(n=c==null?void 0:c.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:c==null?void 0:c.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:f})}if("phone"in e){const{phone:o,options:c}=e,{data:u,error:d}=await W(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:o,data:(i=c==null?void 0:c.data)!==null&&i!==void 0?i:{},create_user:(s=c==null?void 0:c.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(a=c==null?void 0:c.channel)!==null&&a!==void 0?a:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d})}throw new Qi("You must provide either an email or phone number.")}catch(o){if(await Be(this.storage,`${this.storageKey}-code-verifier`),F(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async verifyOtp(e){var r,n;try{let i,s;"options"in e&&(i=(r=e.options)===null||r===void 0?void 0:r.redirectTo,s=(n=e.options)===null||n===void 0?void 0:n.captchaToken);const{data:a,error:o}=await W(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:s}}),redirectTo:i,xform:It});if(o)throw o;if(!a)throw new Error("An error occurred on token verification.");const c=a.session,u=a.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(i){if(F(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithSSO(e){var r,n,i,s,a;try{let o=null,c=null;this.flowType==="pkce"&&([o,c]=await Ln(this.storage,this.storageKey));const u=await W(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(n=(r=e.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((i=e==null?void 0:e.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:o,code_challenge_method:c}),headers:this.headers,xform:jb});return!((s=u.data)===null||s===void 0)&&s.url&&Ve()&&!(!((a=e.options)===null||a===void 0)&&a.skipBrowserRedirect)&&window.location.assign(u.data.url),this._returnResult(u)}catch(o){if(await Be(this.storage,`${this.storageKey}-code-verifier`),F(o))return this._returnResult({data:null,error:o});throw o}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:r},error:n}=e;if(n)throw n;if(!r)throw new at;const{error:i}=await W(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:i})})}catch(e){if(F(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const r=`${this.url}/resend`;if("email"in e){const{email:n,type:i,options:s}=e,{error:a}=await W(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},redirectTo:s==null?void 0:s.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:a})}else if("phone"in e){const{phone:n,type:i,options:s}=e,{data:a,error:o}=await W(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:a==null?void 0:a.message_id},error:o})}throw new Qi("You must provide either an email or phone number and a type")}catch(r){if(F(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(e,r){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await e(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const r=await sn(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?e=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=e.expires_at?e.expires_at*1e3-Date.now()<zl:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n){if(this.userStorage){const a=await sn(this.userStorage,this.storageKey+"-user");a!=null&&a.user?e.user=a.user:e.user=Wl()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const a={value:this.suppressGetSessionWarning};e.user=_b(e.user,a),a.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:i,error:s}=await this._callRefreshToken(e.refresh_token);return s?this._returnResult({data:{session:null},error:s}):this._returnResult({data:{session:i},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;const r=await this._acquireLock(-1,async()=>await this._getUser());return r.data.user&&(this.suppressGetSessionWarning=!0),r}async _getUser(e){try{return e?await W(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Ir}):await this._useSession(async r=>{var n,i,s;const{data:a,error:o}=r;if(o)throw o;return!(!((n=a.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new at}:await W(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(s=(i=a.session)===null||i===void 0?void 0:i.access_token)!==null&&s!==void 0?s:void 0,xform:Ir})})}catch(r){if(F(r))return Nv(r)&&(await this._removeSession(),await Be(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}}async updateUser(e,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,r))}async _updateUser(e,r={}){try{return await this._useSession(async n=>{const{data:i,error:s}=n;if(s)throw s;if(!i.session)throw new at;const a=i.session;let o=null,c=null;this.flowType==="pkce"&&e.email!=null&&([o,c]=await Ln(this.storage,this.storageKey));const{data:u,error:d}=await W(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:o,code_challenge_method:c}),jwt:a.access_token,xform:Ir});if(d)throw d;return a.user=u.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),this._returnResult({data:{user:a.user},error:null})})}catch(n){if(await Be(this.storage,`${this.storageKey}-code-verifier`),F(n))return this._returnResult({data:{user:null},error:n});throw n}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new at;const r=Date.now()/1e3;let n=r,i=!0,s=null;const{payload:a}=Hl(e.access_token);if(a.exp&&(n=a.exp,i=n<=r),i){const{data:o,error:c}=await this._callRefreshToken(e.refresh_token);if(c)return this._returnResult({data:{user:null,session:null},error:c});if(!o)return{data:{user:null,session:null},error:null};s=o}else{const{data:o,error:c}=await this._getUser(e.access_token);if(c)throw c;s={access_token:e.access_token,refresh_token:e.refresh_token,user:o.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return this._returnResult({data:{user:s.user,session:s},error:null})}catch(r){if(F(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async r=>{var n;if(!e){const{data:a,error:o}=r;if(o)throw o;e=(n=a.session)!==null&&n!==void 0?n:void 0}if(!(e!=null&&e.refresh_token))throw new at;const{data:i,error:s}=await this._callRefreshToken(e.refresh_token);return s?this._returnResult({data:{user:null,session:null},error:s}):i?this._returnResult({data:{user:i.user,session:i},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(r){if(F(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async _getSessionFromURL(e,r){try{if(!Ve())throw new Xi("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Xi(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new au("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Xi("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new au("No code detected.");const{data:h,error:p}=await this._exchangeCodeForSession(e.code);if(p)throw p;const _=new URL(window.location.href);return _.searchParams.delete("code"),window.history.replaceState(window.history.state,"",_.toString()),{data:{session:h.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:i,access_token:s,refresh_token:a,expires_in:o,expires_at:c,token_type:u}=e;if(!s||!o||!a||!u)throw new Xi("No session defined in URL");const d=Math.round(Date.now()/1e3),f=parseInt(o);let m=d+f;c&&(m=parseInt(c));const g=m-d;g*1e3<=Vn&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${g}s, should have been closer to ${f}s`);const y=m-f;d-y>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",y,m,d):d-y<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",y,m,d);const{data:w,error:b}=await this._getUser(s);if(b)throw b;const v={provider_token:n,provider_refresh_token:i,access_token:s,expires_in:f,expires_at:m,refresh_token:a,token_type:u,user:w.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:v,redirectType:e.type},error:null})}catch(n){if(F(n))return this._returnResult({data:{session:null,redirectType:null},error:n});throw n}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const r=await sn(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&r)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:i,error:s}=r;if(s)return this._returnResult({error:s});const a=(n=i.session)===null||n===void 0?void 0:n.access_token;if(a){const{error:o}=await this.admin.signOut(a,e);if(o&&!(jv(o)&&(o.status===404||o.status===401||o.status===403)))return this._returnResult({error:o})}return e!=="others"&&(await this._removeSession(),await Be(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const r=ob(),n={id:r,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async r=>{var n,i;try{const{data:{session:s},error:a}=r;if(a)throw a;await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",e,"session",s)}catch(s){await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",s),console.error(s)}})}async resetPasswordForEmail(e,r={}){let n=null,i=null;this.flowType==="pkce"&&([n,i]=await Ln(this.storage,this.storageKey,!0));try{return await W(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:i,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(s){if(await Be(this.storage,`${this.storageKey}-code-verifier`),F(s))return this._returnResult({data:null,error:s});throw s}}async getUserIdentities(){var e;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return this._returnResult({data:{identities:(e=r.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(r){if(F(r))return this._returnResult({data:null,error:r});throw r}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var r;try{const{data:n,error:i}=await this._useSession(async s=>{var a,o,c,u,d;const{data:f,error:m}=s;if(m)throw m;const g=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(a=e.options)===null||a===void 0?void 0:a.redirectTo,scopes:(o=e.options)===null||o===void 0?void 0:o.scopes,queryParams:(c=e.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await W(this.fetch,"GET",g,{headers:this.headers,jwt:(d=(u=f.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(i)throw i;return Ve()&&!(!((r=e.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),this._returnResult({data:{provider:e.provider,url:n==null?void 0:n.url},error:null})}catch(n){if(F(n))return this._returnResult({data:{provider:e.provider,url:null},error:n});throw n}}async linkIdentityIdToken(e){return await this._useSession(async r=>{var n;try{const{error:i,data:{session:s}}=r;if(i)throw i;const{options:a,provider:o,token:c,access_token:u,nonce:d}=e,f=await W(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(n=s==null?void 0:s.access_token)!==null&&n!==void 0?n:void 0,body:{provider:o,id_token:c,access_token:u,nonce:d,link_identity:!0,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:It}),{data:m,error:g}=f;return g?this._returnResult({data:{user:null,session:null},error:g}):!m||!m.session||!m.user?this._returnResult({data:{user:null,session:null},error:new cn}):(m.session&&(await this._saveSession(m.session),await this._notifyAllSubscribers("USER_UPDATED",m.session)),this._returnResult({data:m,error:g}))}catch(i){if(await Be(this.storage,`${this.storageKey}-code-verifier`),F(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}})}async unlinkIdentity(e){try{return await this._useSession(async r=>{var n,i;const{data:s,error:a}=r;if(a)throw a;return await W(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(i=(n=s.session)===null||n===void 0?void 0:n.access_token)!==null&&i!==void 0?i:void 0})})}catch(r){if(F(r))return this._returnResult({data:null,error:r});throw r}}async _refreshAccessToken(e){const r=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await db(async i=>(i>0&&await ub(200*Math.pow(2,i-1)),this._debug(r,"refreshing attempt",i),await W(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:It})),(i,s)=>{const a=200*Math.pow(2,i);return s&&Da(s)&&Date.now()+a-n<Vn})}catch(n){if(this._debug(r,"error",n),F(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}finally{this._debug(r,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",r,"url",n),Ve()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const i=await sn(this.storage,this.storageKey);if(i&&this.userStorage){let a=await sn(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!a&&(a={user:i.user},await zn(this.userStorage,this.storageKey+"-user",a)),i.user=(e=a==null?void 0:a.user)!==null&&e!==void 0?e:Wl()}else if(i&&!i.user&&!i.user){const a=await sn(this.storage,this.storageKey+"-user");a&&(a!=null&&a.user)?(i.user=a.user,await Be(this.storage,this.storageKey+"-user"),await zn(this.storage,this.storageKey,i)):i.user=Wl()}if(this._debug(n,"session from storage",i),!this._isValidSession(i)){this._debug(n,"session is not valid"),i!==null&&await this._removeSession();return}const s=((r=i.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<zl;if(this._debug(n,`session has${s?"":" not"} expired with margin of ${zl}s`),s){if(this.autoRefreshToken&&i.refresh_token){const{error:a}=await this._callRefreshToken(i.refresh_token);a&&(console.error(a),Da(a)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{const{data:a,error:o}=await this._getUser(i.access_token);!o&&(a!=null&&a.user)?(i.user=a.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(a){console.error("Error getting user data:",a),this._debug(n,"error getting user data, skipping SIGNED_IN notification",a)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(n,"error",i),console.error(i);return}finally{this._debug(n,"end")}}async _callRefreshToken(e){var r,n;if(!e)throw new at;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new rl;const{data:s,error:a}=await this._refreshAccessToken(e);if(a)throw a;if(!s.session)throw new at;await this._saveSession(s.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",s.session);const o={data:s.session,error:null};return this.refreshingDeferred.resolve(o),o}catch(s){if(this._debug(i,"error",s),F(s)){const a={data:null,error:s};return Da(s)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(a),a}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(s),s}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(e,r,n=!0){const i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:r});const s=[],a=Array.from(this.stateChangeEmitters.values()).map(async o=>{try{await o.callback(e,r)}catch(c){s.push(c)}});if(await Promise.all(a),s.length>0){for(let o=0;o<s.length;o+=1)console.error(s[o]);throw s[0]}}finally{this._debug(i,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await Be(this.storage,`${this.storageKey}-code-verifier`);const r=Object.assign({},e),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await zn(this.userStorage,this.storageKey+"-user",{user:r.user});const i=Object.assign({},r);delete i.user;const s=xf(i);await zn(this.storage,this.storageKey,s)}else{const i=xf(r);await zn(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await Be(this.storage,this.storageKey),await Be(this.storage,this.storageKey+"-code-verifier"),await Be(this.storage,this.storageKey+"-user"),this.userStorage&&await Be(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Ve()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Vn);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((n.expires_at*1e3-e)/Vn);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${Vn}ms, refresh threshold is ${iu} ticks`),i<=iu&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof pd)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Ve()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const r=`#_onVisibilityChanged(${e})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,r,n){const i=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&i.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&i.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[s,a]=await Ln(this.storage,this.storageKey),o=new URLSearchParams({code_challenge:`${encodeURIComponent(s)}`,code_challenge_method:`${encodeURIComponent(a)}`});i.push(o.toString())}if(n!=null&&n.queryParams){const s=new URLSearchParams(n.queryParams);i.push(s.toString())}return n!=null&&n.skipBrowserRedirect&&i.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${e}?${i.join("&")}`}async _unenroll(e){try{return await this._useSession(async r=>{var n;const{data:i,error:s}=r;return s?this._returnResult({data:null,error:s}):await W(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(F(r))return this._returnResult({data:null,error:r});throw r}}async _enroll(e){try{return await this._useSession(async r=>{var n,i;const{data:s,error:a}=r;if(a)return this._returnResult({data:null,error:a});const o=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:c,error:u}=await W(this.fetch,"POST",`${this.url}/factors`,{body:o,headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});return u?this._returnResult({data:null,error:u}):(e.factorType==="totp"&&c.type==="totp"&&(!((i=c==null?void 0:c.totp)===null||i===void 0)&&i.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),this._returnResult({data:c,error:null}))})}catch(r){if(F(r))return this._returnResult({data:null,error:r});throw r}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:i,error:s}=r;if(s)return this._returnResult({data:null,error:s});const a=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?Fb(e.webauthn.credential_response):Bb(e.webauthn.credential_response)})}:{code:e.code}),{data:o,error:c}=await W(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:a,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return c?this._returnResult({data:null,error:c}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),this._returnResult({data:o,error:c}))})}catch(r){if(F(r))return this._returnResult({data:null,error:r});throw r}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:i,error:s}=r;if(s)return this._returnResult({data:null,error:s});const a=await W(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});if(a.error)return a;const{data:o}=a;if(o.type!=="webauthn")return{data:o,error:null};switch(o.webauthn.type){case"create":return{data:Object.assign(Object.assign({},o),{webauthn:Object.assign(Object.assign({},o.webauthn),{credential_options:Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:Mb(o.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},o),{webauthn:Object.assign(Object.assign({},o.webauthn),{credential_options:Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:Ub(o.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(F(r))return this._returnResult({data:null,error:r});throw r}})}async _challengeAndVerify(e){const{data:r,error:n}=await this._challenge({factorId:e.factorId});return n?this._returnResult({data:null,error:n}):await this._verify({factorId:e.factorId,challengeId:r.id,code:e.code})}async _listFactors(){var e;const{data:{user:r},error:n}=await this.getUser();if(n)return{data:null,error:n};const i={all:[],phone:[],totp:[],webauthn:[]};for(const s of(e=r==null?void 0:r.factors)!==null&&e!==void 0?e:[])i.all.push(s),s.status==="verified"&&i[s.factor_type].push(s);return{data:i,error:null}}async _getAuthenticatorAssuranceLevel(){var e,r;const{data:{session:n},error:i}=await this.getSession();if(i)return this._returnResult({data:null,error:i});if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:s}=Hl(n.access_token);let a=null;s.aal&&(a=s.aal);let o=a;((r=(e=n.user.factors)===null||e===void 0?void 0:e.filter(d=>d.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(o="aal2");const u=s.amr||[];return{data:{currentLevel:a,nextLevel:o,currentAuthenticationMethods:u},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async r=>{const{data:{session:n},error:i}=r;return i?this._returnResult({data:null,error:i}):n?await W(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:n.access_token,xform:s=>({data:s,error:null})}):this._returnResult({data:null,error:new at})})}catch(r){if(F(r))return this._returnResult({data:null,error:r});throw r}}async _approveAuthorization(e,r){try{return await this._useSession(async n=>{const{data:{session:i},error:s}=n;if(s)return this._returnResult({data:null,error:s});if(!i)return this._returnResult({data:null,error:new at});const a=await W(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"approve"},xform:o=>({data:o,error:null})});return a.data&&a.data.redirect_url&&Ve()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(a.data.redirect_url),a})}catch(n){if(F(n))return this._returnResult({data:null,error:n});throw n}}async _denyAuthorization(e,r){try{return await this._useSession(async n=>{const{data:{session:i},error:s}=n;if(s)return this._returnResult({data:null,error:s});if(!i)return this._returnResult({data:null,error:new at});const a=await W(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"deny"},xform:o=>({data:o,error:null})});return a.data&&a.data.redirect_url&&Ve()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(a.data.redirect_url),a})}catch(n){if(F(n))return this._returnResult({data:null,error:n});throw n}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:r},error:n}=e;return n?this._returnResult({data:null,error:n}):r?await W(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new at})})}catch(e){if(F(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async r=>{const{data:{session:n},error:i}=r;return i?this._returnResult({data:null,error:i}):n?(await W(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new at})})}catch(r){if(F(r))return this._returnResult({data:null,error:r});throw r}}async fetchJwk(e,r={keys:[]}){let n=r.keys.find(o=>o.kid===e);if(n)return n;const i=Date.now();if(n=this.jwks.keys.find(o=>o.kid===e),n&&this.jwks_cached_at+X_>i)return n;const{data:s,error:a}=await W(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(a)throw a;return!s.keys||s.keys.length===0||(this.jwks=s,this.jwks_cached_at=i,n=s.keys.find(o=>o.kid===e),!n)?null:n}async getClaims(e,r={}){try{let n=e;if(!n){const{data:g,error:y}=await this.getSession();if(y||!g.session)return this._returnResult({data:null,error:y});n=g.session.access_token}const{header:i,payload:s,signature:a,raw:{header:o,payload:c}}=Hl(n);r!=null&&r.allowExpired||yb(s.exp);const u=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!u){const{error:g}=await this.getUser(n);if(g)throw g;return{data:{claims:s,header:i,signature:a},error:null}}const d=wb(i.alg),f=await crypto.subtle.importKey("jwk",u,d,!0,["verify"]);if(!await crypto.subtle.verify(d,f,a,sb(`${o}.${c}`)))throw new _o("Invalid JWT signature");return{data:{claims:s,header:i,signature:a},error:null}}catch(n){if(F(n))return this._returnResult({data:null,error:n});throw n}}};gd.nextInstanceID={};const Yb=md,Zb=gd,Qb=Object.freeze(Object.defineProperty({__proto__:null,AuthAdminApi:Yb,AuthApiError:Sv,AuthClient:Zb,AuthError:ji,AuthImplicitGrantRedirectError:Xi,AuthInvalidCredentialsError:Qi,AuthInvalidJwtError:_o,AuthInvalidTokenResponseError:cn,AuthPKCEGrantCodeExchangeError:au,AuthRetryableFetchError:xo,AuthSessionMissingError:at,AuthUnknownError:Pr,AuthWeakPasswordError:ou,CustomAuthError:br,GoTrueAdminApi:md,GoTrueClient:gd,NavigatorLockAcquireTimeoutError:Ov,SIGN_OUT_SCOPES:La,isAuthApiError:jv,isAuthError:F,isAuthImplicitGrantRedirectError:Ev,isAuthRetryableFetchError:Da,isAuthSessionMissingError:Nv,isAuthWeakPasswordError:eb,lockInternals:dn,navigatorLock:Rv,processLock:Tb},Symbol.toStringTag,{value:"Module"})),Dv=Is(Qb);Object.defineProperty(tl,"__esModule",{value:!0});tl.SupabaseAuthClient=void 0;const Xb=Dv;class ek extends Xb.AuthClient{constructor(e){super(e)}}tl.SupabaseAuthClient=ek;Object.defineProperty(po,"__esModule",{value:!0});const tk=Ug,rk=Ye,nk=sv,ik=H_,va=wv,sk=xv,Cf=tn,ak=tl;let ok=class{constructor(e,r,n){var i,s,a;this.supabaseUrl=e,this.supabaseKey=r;const o=(0,Cf.validateSupabaseUrl)(e);if(!r)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",o),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",o),this.storageUrl=new URL("storage/v1",o),this.functionsUrl=new URL("functions/v1",o);const c=`sb-${o.hostname.split(".")[0]}-auth-token`,u={db:va.DEFAULT_DB_OPTIONS,realtime:va.DEFAULT_REALTIME_OPTIONS,auth:Object.assign(Object.assign({},va.DEFAULT_AUTH_OPTIONS),{storageKey:c}),global:va.DEFAULT_GLOBAL_OPTIONS},d=(0,Cf.applySettingDefaults)(n??{},u);this.storageKey=(i=d.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(s=d.global.headers)!==null&&s!==void 0?s:{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(f,m)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(m)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((a=d.auth)!==null&&a!==void 0?a:{},this.headers,d.global.fetch),this.fetch=(0,sk.fetchWithAuth)(r,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.accessToken&&this.accessToken().then(f=>this.realtime.setAuth(f)).catch(f=>console.warn("Failed to set initial Realtime auth token:",f)),this.rest=new rk.PostgrestClient(new URL("rest/v1",o).href,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),this.storage=new ik.StorageClient(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),d.accessToken||this._listenForAuthEvents()}get functions(){return new tk.FunctionsClient(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,r={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,r,n)}channel(e,r={config:{}}){return this.realtime.channel(e,r)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e,r;if(this.accessToken)return await this.accessToken();const{data:n}=await this.auth.getSession();return(r=(e=n.session)===null||e===void 0?void 0:e.access_token)!==null&&r!==void 0?r:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:r,detectSessionInUrl:n,storage:i,userStorage:s,storageKey:a,flowType:o,lock:c,debug:u,throwOnError:d},f,m){const g={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new ak.SupabaseAuthClient({url:this.authUrl.href,headers:Object.assign(Object.assign({},g),f),storageKey:a,autoRefreshToken:e,persistSession:r,detectSessionInUrl:n,storage:i,userStorage:s,flowType:o,lock:c,debug:u,throwOnError:d,fetch:m,hasCustomAuthorizationHeader:Object.keys(this.headers).some(y=>y.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new nk.RealtimeClient(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(e,r,n){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};po.default=ok;(function(t){var e=Pn&&Pn.__createBinding||(Object.create?function(d,f,m,g){g===void 0&&(g=m);var y=Object.getOwnPropertyDescriptor(f,m);(!y||("get"in y?!f.__esModule:y.writable||y.configurable))&&(y={enumerable:!0,get:function(){return f[m]}}),Object.defineProperty(d,g,y)}:function(d,f,m,g){g===void 0&&(g=m),d[g]=f[m]}),r=Pn&&Pn.__exportStar||function(d,f){for(var m in d)m!=="default"&&!Object.prototype.hasOwnProperty.call(f,m)&&e(f,d,m)},n=Pn&&Pn.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(t,"__esModule",{value:!0}),t.createClient=t.SupabaseClient=t.FunctionRegion=t.FunctionsError=t.FunctionsRelayError=t.FunctionsFetchError=t.FunctionsHttpError=t.PostgrestError=void 0;const i=n(po);r(Dv,t);var s=Ye;Object.defineProperty(t,"PostgrestError",{enumerable:!0,get:function(){return s.PostgrestError}});var a=Ug;Object.defineProperty(t,"FunctionsHttpError",{enumerable:!0,get:function(){return a.FunctionsHttpError}}),Object.defineProperty(t,"FunctionsFetchError",{enumerable:!0,get:function(){return a.FunctionsFetchError}}),Object.defineProperty(t,"FunctionsRelayError",{enumerable:!0,get:function(){return a.FunctionsRelayError}}),Object.defineProperty(t,"FunctionsError",{enumerable:!0,get:function(){return a.FunctionsError}}),Object.defineProperty(t,"FunctionRegion",{enumerable:!0,get:function(){return a.FunctionRegion}}),r(sv,t);var o=po;Object.defineProperty(t,"SupabaseClient",{enumerable:!0,get:function(){return n(o).default}});const c=(d,f,m)=>new i.default(d,f,m);t.createClient=c;function u(){if(typeof window<"u"||typeof process>"u")return!1;const d=process.version;if(d==null)return!1;const f=d.match(/^v(\d+)\./);return f?parseInt(f[1],10)<=18:!1}u()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217")})(od);const Lv=du(od),lk=hy({__proto__:null,default:Lv},[od]),{PostgrestError:Lj,FunctionsHttpError:$j,FunctionsFetchError:Mj,FunctionsRelayError:Uj,FunctionsError:Fj,FunctionRegion:Bj,SupabaseClient:Vj,createClient:ck,GoTrueAdminApi:zj,GoTrueClient:Hj,AuthAdminApi:Wj,AuthClient:qj,navigatorLock:Gj,NavigatorLockAcquireTimeoutError:Kj,lockInternals:Jj,processLock:Yj,SIGN_OUT_SCOPES:Zj,AuthError:Qj,AuthApiError:Xj,AuthUnknownError:eN,CustomAuthError:tN,AuthSessionMissingError:rN,AuthInvalidTokenResponseError:nN,AuthInvalidCredentialsError:iN,AuthImplicitGrantRedirectError:sN,AuthPKCEGrantCodeExchangeError:aN,AuthRetryableFetchError:oN,AuthWeakPasswordError:lN,AuthInvalidJwtError:cN,isAuthError:uN,isAuthApiError:dN,isAuthSessionMissingError:hN,isAuthImplicitGrantRedirectError:fN,isAuthRetryableFetchError:mN,isAuthWeakPasswordError:pN,RealtimePresence:gN,RealtimeChannel:vN,RealtimeClient:yN,REALTIME_LISTEN_TYPES:wN,REALTIME_POSTGRES_CHANGES_LISTEN_EVENT:xN,REALTIME_PRESENCE_LISTEN_EVENTS:_N,REALTIME_SUBSCRIBE_STATES:bN,REALTIME_CHANNEL_STATES:kN}=Lv||lk,uk="https://ktqkdjmpnqywjqmfhren.supabase.co",dk="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imt0cWtkam1wbnF5d2pxbWZocmVuIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjQ5NTM4MTUsImV4cCI6MjA4MDUyOTgxNX0.v7XbcvMH2IFheAxUh5uZCOkb5JiGcvg2j9pn5nu_-hw",Rs=ck(uk,dk),jo=()=>Rs!==null;function hk(t){return{id:t.id,timestamp:t.timestamp,sessionId:t.session_id||"",action:t.action,details:t.details,userId:t.user_id,userName:t.user_name,ipAddress:t.ip_address||void 0,userAgent:t.user_agent||void 0,patientId:t.patient_id,patientDataHash:t.patient_data_hash||void 0,patientSnapshot:t.patient_snapshot||void 0,analysisId:t.analysis_id||void 0,riskLevel:t.risk_level,riskScore:t.risk_score||void 0,confidenceScore:t.confidence_score||void 0,drugInteractionsCount:t.drug_interactions_count||void 0,contraindicationsCount:t.contraindications_count||void 0,analysisSnapshot:t.analysis_snapshot||void 0,treatmentMedication:t.treatment_medication||void 0,treatmentDosage:t.treatment_dosage||void 0,previousValue:t.previous_value||void 0,newValue:t.new_value||void 0,modificationsJson:t.modifications_json||void 0}}function fk(t){return{id:t.id,timestamp:t.timestamp,session_id:t.sessionId||null,action:t.action,details:t.details,user_id:t.userId,user_name:t.userName,ip_address:t.ipAddress||null,user_agent:t.userAgent||null,patient_id:t.patientId,patient_data_hash:t.patientDataHash||null,patient_snapshot:t.patientSnapshot||null,analysis_id:t.analysisId||null,risk_level:t.riskLevel||null,risk_score:t.riskScore||null,confidence_score:t.confidenceScore||null,drug_interactions_count:t.drugInteractionsCount||null,contraindications_count:t.contraindicationsCount||null,analysis_snapshot:t.analysisSnapshot||null,treatment_medication:t.treatmentMedication||null,treatment_dosage:t.treatmentDosage||null,previous_value:t.previousValue||null,new_value:t.newValue||null,modifications_json:t.modificationsJson||null}}function mk(){return{ipAddress:"client-side",userAgent:typeof navigator<"u"?navigator.userAgent:"unknown"}}async function pk(t){if(!jo()||!Rs)return console.log("Supabase not configured, audit entry not persisted:",t.id),!1;try{const{error:e}=await Rs.from("audit_logs").insert(fk(t));return e?(console.error("Failed to save audit entry:",e),!1):(console.log(" Audit entry saved:",t.action,t.details),!0)}catch(e){return console.error("Error saving audit entry:",e),!1}}async function gk(){if(!jo()||!Rs)return console.log("Supabase not configured, returning empty audit log"),[];try{const{data:t,error:e}=await Rs.from("audit_logs").select("*").order("timestamp",{ascending:!0}).limit(500);return e?(console.error("Failed to load audit entries:",e),[]):(console.log(` Loaded ${(t==null?void 0:t.length)||0} audit entries from Supabase`),(t||[]).map(hk))}catch(t){return console.error("Error loading audit entries:",t),[]}}const vk=Wx(),kr=dx((t,e)=>({sessionId:vk,currentStep:0,setCurrentStep:r=>t({currentStep:r}),patientData:null,setPatientData:r=>{t({patientData:r});const n=`${r.firstName}-${r.lastName}-${Date.now()}`;e().addAuditEntry({action:"created",userId:"system",userName:"System",patientId:n,details:"Patient intake data submitted",patientDataHash:Hx(r),patientSnapshot:r})},clearPatientData:()=>t({patientData:null}),analysisResult:null,analysisId:null,setAnalysisResult:r=>{const n=`analysis-${Date.now()}-${Math.random().toString(36).substr(2,9)}`;t({analysisResult:r,analysisId:n});const i=e().patientData;if(i){const s=`${i.firstName}-${i.lastName}`;e().addAuditEntry({action:"created",userId:"ai-system",userName:"AI Clinical Assistant",patientId:s,details:`Analysis completed with risk level: ${r.overallRiskLevel.toUpperCase()}`,analysisId:n,riskLevel:r.overallRiskLevel,riskScore:r.riskScore,confidenceScore:r.primaryRecommendation.confidenceScore,drugInteractionsCount:r.drugInteractions.length,contraindicationsCount:r.contraindications.length,treatmentMedication:r.primaryRecommendation.medication,treatmentDosage:r.primaryRecommendation.dosage,analysisSnapshot:{overallRiskLevel:r.overallRiskLevel,riskScore:r.riskScore,primaryMedication:r.primaryRecommendation.medication,primaryDosage:r.primaryRecommendation.dosage,confidenceScore:r.primaryRecommendation.confidenceScore,drugInteractions:r.drugInteractions.map(a=>({drugs:`${a.drug1} + ${a.drug2}`,severity:a.severity})),contraindications:r.contraindications.map(a=>({medication:a.medication,condition:a.condition,severity:a.severity})),modelVersion:r.modelVersion}})}},isAnalyzing:!1,setIsAnalyzing:r=>t({isAnalyzing:r}),analysisError:null,setAnalysisError:r=>t({analysisError:r}),doctorDecision:null,setDoctorDecision:r=>{t({doctorDecision:r});const n=e().patientData,i=e().analysisResult,s=e().analysisId;if(n){const a=`${n.firstName}-${n.lastName}`;e().addAuditEntry({action:r.approved?"approved":"rejected",userId:r.doctorId,userName:r.doctorName,patientId:a,details:r.approved?`Treatment plan approved${r.modifications.length>0?` with ${r.modifications.length} modification(s)`:""}`:`Treatment plan rejected: ${r.rejectionReason}`,analysisId:s||void 0,riskLevel:i==null?void 0:i.overallRiskLevel,riskScore:i==null?void 0:i.riskScore,confidenceScore:i==null?void 0:i.primaryRecommendation.confidenceScore,drugInteractionsCount:i==null?void 0:i.drugInteractions.length,contraindicationsCount:i==null?void 0:i.contraindications.length,treatmentMedication:i==null?void 0:i.primaryRecommendation.medication,treatmentDosage:i==null?void 0:i.primaryRecommendation.dosage,modificationsJson:r.modifications.length>0?r.modifications:void 0,newValue:r.additionalNotes})}},auditLog:[],isAuditLogLoading:!1,supabaseConnected:jo(),addAuditEntry:r=>{const{ipAddress:n,userAgent:i}=mk(),s=e().sessionId,a={id:`audit-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,timestamp:new Date().toISOString(),sessionId:s,action:r.action,details:r.details,userId:r.userId||"unknown",userName:r.userName||"Unknown User",patientId:r.patientId||"unknown",ipAddress:n,userAgent:i,patientDataHash:r.patientDataHash,patientSnapshot:r.patientSnapshot,analysisId:r.analysisId,riskLevel:r.riskLevel,riskScore:r.riskScore,confidenceScore:r.confidenceScore,drugInteractionsCount:r.drugInteractionsCount,contraindicationsCount:r.contraindicationsCount,analysisSnapshot:r.analysisSnapshot,treatmentMedication:r.treatmentMedication,treatmentDosage:r.treatmentDosage,previousValue:r.previousValue,newValue:r.newValue,modificationsJson:r.modificationsJson};t(o=>({auditLog:[...o.auditLog,a]})),pk(a).then(o=>{o&&t({supabaseConnected:!0})})},loadAuditLog:async()=>{t({isAuditLogLoading:!0});try{const r=await gk();t({auditLog:r,supabaseConnected:jo(),isAuditLogLoading:!1})}catch(r){console.error("Failed to load audit log:",r),t({isAuditLogLoading:!1})}},resetAll:()=>t({currentStep:0,patientData:null,analysisResult:null,analysisId:null,isAnalyzing:!1,analysisError:null,doctorDecision:null})}));var Vs=t=>t.type==="checkbox",wn=t=>t instanceof Date,ot=t=>t==null;const $v=t=>typeof t=="object";var De=t=>!ot(t)&&!Array.isArray(t)&&$v(t)&&!wn(t),yk=t=>De(t)&&t.target?Vs(t.target)?t.target.checked:t.target.value:t,wk=t=>t.substring(0,t.search(/\.\d+(\.|$)/))||t,xk=(t,e)=>t.has(wk(e)),_k=t=>{const e=t.constructor&&t.constructor.prototype;return De(e)&&e.hasOwnProperty("isPrototypeOf")},vd=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Me(t){let e;const r=Array.isArray(t),n=typeof FileList<"u"?t instanceof FileList:!1;if(t instanceof Date)e=new Date(t);else if(!(vd&&(t instanceof Blob||n))&&(r||De(t)))if(e=r?[]:Object.create(Object.getPrototypeOf(t)),!r&&!_k(t))e=t;else for(const i in t)t.hasOwnProperty(i)&&(e[i]=Me(t[i]));else return t;return e}var nl=t=>/^\w*$/.test(t),Ee=t=>t===void 0,yd=t=>Array.isArray(t)?t.filter(Boolean):[],wd=t=>yd(t.replace(/["|']|\]/g,"").split(/\.|\[/)),M=(t,e,r)=>{if(!e||!De(t))return r;const n=(nl(e)?[e]:wd(e)).reduce((i,s)=>ot(i)?i:i[s],t);return Ee(n)||n===t?Ee(t[e])?r:t[e]:n},Zt=t=>typeof t=="boolean",fe=(t,e,r)=>{let n=-1;const i=nl(e)?[e]:wd(e),s=i.length,a=s-1;for(;++n<s;){const o=i[n];let c=r;if(n!==a){const u=t[o];c=De(u)||Array.isArray(u)?u:isNaN(+i[n+1])?{}:[]}if(o==="__proto__"||o==="constructor"||o==="prototype")return;t[o]=c,t=t[o]}};const Tf={BLUR:"blur",FOCUS_OUT:"focusout"},Bt={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},lr={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},bk=Xe.createContext(null);bk.displayName="HookFormContext";var kk=(t,e,r,n=!0)=>{const i={defaultValues:e._defaultValues};for(const s in t)Object.defineProperty(i,s,{get:()=>{const a=s;return e._proxyFormState[a]!==Bt.all&&(e._proxyFormState[a]=!n||Bt.all),t[a]}});return i};const Sk=typeof window<"u"?Xe.useLayoutEffect:Xe.useEffect;var gt=t=>typeof t=="string",jk=(t,e,r,n,i)=>gt(t)?(n&&e.watch.add(t),M(r,t,i)):Array.isArray(t)?t.map(s=>(n&&e.watch.add(s),M(r,s))):(n&&(e.watchAll=!0),r),cu=t=>ot(t)||!$v(t);function Dr(t,e,r=new WeakSet){if(cu(t)||cu(e))return Object.is(t,e);if(wn(t)&&wn(e))return t.getTime()===e.getTime();const n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;if(r.has(t)||r.has(e))return!0;r.add(t),r.add(e);for(const s of n){const a=t[s];if(!i.includes(s))return!1;if(s!=="ref"){const o=e[s];if(wn(a)&&wn(o)||De(a)&&De(o)||Array.isArray(a)&&Array.isArray(o)?!Dr(a,o,r):!Object.is(a,o))return!1}}return!0}var Mv=(t,e,r,n,i)=>e?{...r[t],types:{...r[t]&&r[t].types?r[t].types:{},[n]:i||!0}}:{},cs=t=>Array.isArray(t)?t:[t],Af=()=>{let t=[];return{get observers(){return t},next:i=>{for(const s of t)s.next&&s.next(i)},subscribe:i=>(t.push(i),{unsubscribe:()=>{t=t.filter(s=>s!==i)}}),unsubscribe:()=>{t=[]}}};function Uv(t,e){const r={};for(const n in t)if(t.hasOwnProperty(n)){const i=t[n],s=e[n];if(i&&De(i)&&s){const a=Uv(i,s);De(a)&&(r[n]=a)}else t[n]&&(r[n]=s)}return r}var Qe=t=>De(t)&&!Object.keys(t).length,xd=t=>t.type==="file",Vt=t=>typeof t=="function",No=t=>{if(!vd)return!1;const e=t?t.ownerDocument:0;return t instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},Fv=t=>t.type==="select-multiple",_d=t=>t.type==="radio",Nk=t=>_d(t)||Vs(t),ql=t=>No(t)&&t.isConnected;function Ek(t,e){const r=e.slice(0,-1).length;let n=0;for(;n<r;)t=Ee(t)?n++:t[e[n++]];return t}function Ck(t){for(const e in t)if(t.hasOwnProperty(e)&&!Ee(t[e]))return!1;return!0}function Ae(t,e){const r=Array.isArray(e)?e:nl(e)?[e]:wd(e),n=r.length===1?t:Ek(t,r),i=r.length-1,s=r[i];return n&&delete n[s],i!==0&&(De(n)&&Qe(n)||Array.isArray(n)&&Ck(n))&&Ae(t,r.slice(0,-1)),t}var Tk=t=>{for(const e in t)if(Vt(t[e]))return!0;return!1};function Bv(t){return Array.isArray(t)||De(t)&&!Tk(t)}function uu(t,e={}){for(const r in t){const n=t[r];Bv(n)?(e[r]=Array.isArray(n)?[]:{},uu(n,e[r])):Ee(n)||(e[r]=!0)}return e}function Hn(t,e,r){r||(r=uu(e));for(const n in t){const i=t[n];if(Bv(i))Ee(e)||cu(r[n])?r[n]=uu(i,Array.isArray(i)?[]:{}):Hn(i,ot(e)?{}:e[n],r[n]);else{const s=e[n];r[n]=!Dr(i,s)}}return r}const Of={value:!1,isValid:!1},Rf={value:!0,isValid:!0};var Vv=t=>{if(Array.isArray(t)){if(t.length>1){const e=t.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:e,isValid:!!e.length}}return t[0].checked&&!t[0].disabled?t[0].attributes&&!Ee(t[0].attributes.value)?Ee(t[0].value)||t[0].value===""?Rf:{value:t[0].value,isValid:!0}:Rf:Of}return Of},zv=(t,{valueAsNumber:e,valueAsDate:r,setValueAs:n})=>Ee(t)?t:e?t===""?NaN:t&&+t:r&&gt(t)?new Date(t):n?n(t):t;const Pf={isValid:!1,value:null};var Hv=t=>Array.isArray(t)?t.reduce((e,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:e,Pf):Pf;function If(t){const e=t.ref;return xd(e)?e.files:_d(e)?Hv(t.refs).value:Fv(e)?[...e.selectedOptions].map(({value:r})=>r):Vs(e)?Vv(t.refs).value:zv(Ee(e.value)?t.ref.value:e.value,t)}var Ak=(t,e,r,n)=>{const i={};for(const s of t){const a=M(e,s);a&&fe(i,s,a._f)}return{criteriaMode:r,names:[...t],fields:i,shouldUseNativeValidation:n}},Eo=t=>t instanceof RegExp,Vi=t=>Ee(t)?t:Eo(t)?t.source:De(t)?Eo(t.value)?t.value.source:t.value:t,Df=t=>({isOnSubmit:!t||t===Bt.onSubmit,isOnBlur:t===Bt.onBlur,isOnChange:t===Bt.onChange,isOnAll:t===Bt.all,isOnTouch:t===Bt.onTouched});const Lf="AsyncFunction";var Ok=t=>!!t&&!!t.validate&&!!(Vt(t.validate)&&t.validate.constructor.name===Lf||De(t.validate)&&Object.values(t.validate).find(e=>e.constructor.name===Lf)),Rk=t=>t.mount&&(t.required||t.min||t.max||t.maxLength||t.minLength||t.pattern||t.validate),$f=(t,e,r)=>!r&&(e.watchAll||e.watch.has(t)||[...e.watch].some(n=>t.startsWith(n)&&/^\.\w+/.test(t.slice(n.length))));const us=(t,e,r,n)=>{for(const i of r||Object.keys(t)){const s=M(t,i);if(s){const{_f:a,...o}=s;if(a){if(a.refs&&a.refs[0]&&e(a.refs[0],i)&&!n)return!0;if(a.ref&&e(a.ref,a.name)&&!n)return!0;if(us(o,e))break}else if(De(o)&&us(o,e))break}}};function Mf(t,e,r){const n=M(t,r);if(n||nl(r))return{error:n,name:r};const i=r.split(".");for(;i.length;){const s=i.join("."),a=M(e,s),o=M(t,s);if(a&&!Array.isArray(a)&&r!==s)return{name:r};if(o&&o.type)return{name:s,error:o};if(o&&o.root&&o.root.type)return{name:`${s}.root`,error:o.root};i.pop()}return{name:r}}var Pk=(t,e,r,n)=>{r(t);const{name:i,...s}=t;return Qe(s)||Object.keys(s).length>=Object.keys(e).length||Object.keys(s).find(a=>e[a]===(!n||Bt.all))},Ik=(t,e,r)=>!t||!e||t===e||cs(t).some(n=>n&&(r?n===e:n.startsWith(e)||e.startsWith(n))),Dk=(t,e,r,n,i)=>i.isOnAll?!1:!r&&i.isOnTouch?!(e||t):(r?n.isOnBlur:i.isOnBlur)?!t:(r?n.isOnChange:i.isOnChange)?t:!0,Lk=(t,e)=>!yd(M(t,e)).length&&Ae(t,e),$k=(t,e,r)=>{const n=cs(M(t,r));return fe(n,"root",e[r]),fe(t,r,n),t};function Uf(t,e,r="validate"){if(gt(t)||Array.isArray(t)&&t.every(gt)||Zt(t)&&!t)return{type:r,message:gt(t)?t:"",ref:e}}var Un=t=>De(t)&&!Eo(t)?t:{value:t,message:""},Ff=async(t,e,r,n,i,s)=>{const{ref:a,refs:o,required:c,maxLength:u,minLength:d,min:f,max:m,pattern:g,validate:y,name:w,valueAsNumber:b,mount:v}=t._f,h=M(r,w);if(!v||e.has(w))return{};const p=o?o[0]:a,_=q=>{i&&p.reportValidity&&(p.setCustomValidity(Zt(q)?"":q||""),p.reportValidity())},S={},N=_d(a),E=Vs(a),P=N||E,G=(b||xd(a))&&Ee(a.value)&&Ee(h)||No(a)&&a.value===""||h===""||Array.isArray(h)&&!h.length,K=Mv.bind(null,w,n,S),ne=(q,re,V,te=lr.maxLength,ce=lr.minLength)=>{const je=q?re:V;S[w]={type:q?te:ce,message:je,ref:a,...K(q?te:ce,je)}};if(s?!Array.isArray(h)||!h.length:c&&(!P&&(G||ot(h))||Zt(h)&&!h||E&&!Vv(o).isValid||N&&!Hv(o).isValid)){const{value:q,message:re}=gt(c)?{value:!!c,message:c}:Un(c);if(q&&(S[w]={type:lr.required,message:re,ref:p,...K(lr.required,re)},!n))return _(re),S}if(!G&&(!ot(f)||!ot(m))){let q,re;const V=Un(m),te=Un(f);if(!ot(h)&&!isNaN(h)){const ce=a.valueAsNumber||h&&+h;ot(V.value)||(q=ce>V.value),ot(te.value)||(re=ce<te.value)}else{const ce=a.valueAsDate||new Date(h),je=Z=>new Date(new Date().toDateString()+" "+Z),O=a.type=="time",H=a.type=="week";gt(V.value)&&h&&(q=O?je(h)>je(V.value):H?h>V.value:ce>new Date(V.value)),gt(te.value)&&h&&(re=O?je(h)<je(te.value):H?h<te.value:ce<new Date(te.value))}if((q||re)&&(ne(!!q,V.message,te.message,lr.max,lr.min),!n))return _(S[w].message),S}if((u||d)&&!G&&(gt(h)||s&&Array.isArray(h))){const q=Un(u),re=Un(d),V=!ot(q.value)&&h.length>+q.value,te=!ot(re.value)&&h.length<+re.value;if((V||te)&&(ne(V,q.message,re.message),!n))return _(S[w].message),S}if(g&&!G&&gt(h)){const{value:q,message:re}=Un(g);if(Eo(q)&&!h.match(q)&&(S[w]={type:lr.pattern,message:re,ref:a,...K(lr.pattern,re)},!n))return _(re),S}if(y){if(Vt(y)){const q=await y(h,r),re=Uf(q,p);if(re&&(S[w]={...re,...K(lr.validate,re.message)},!n))return _(re.message),S}else if(De(y)){let q={};for(const re in y){if(!Qe(q)&&!n)break;const V=Uf(await y[re](h,r),p,re);V&&(q={...V,...K(re,V.message)},_(V.message),n&&(S[w]=q))}if(!Qe(q)&&(S[w]={ref:p,...q},!n))return S}}return _(!0),S};const Mk={mode:Bt.onSubmit,reValidateMode:Bt.onChange,shouldFocusError:!0};function Uk(t={}){let e={...Mk,...t},r={submitCount:0,isDirty:!1,isReady:!1,isLoading:Vt(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1},n={},i=De(e.defaultValues)||De(e.values)?Me(e.defaultValues||e.values)||{}:{},s=e.shouldUnregister?{}:Me(i),a={action:!1,mount:!1,watch:!1},o={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},c,u=0;const d={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let f={...d};const m={array:Af(),state:Af()},g=e.criteriaMode===Bt.all,y=x=>k=>{clearTimeout(u),u=setTimeout(x,k)},w=async x=>{if(!e.disabled&&(d.isValid||f.isValid||x)){const k=e.resolver?Qe((await E()).errors):await G(n,!0);k!==r.isValid&&m.state.next({isValid:k})}},b=(x,k)=>{!e.disabled&&(d.isValidating||d.validatingFields||f.isValidating||f.validatingFields)&&((x||Array.from(o.mount)).forEach(j=>{j&&(k?fe(r.validatingFields,j,k):Ae(r.validatingFields,j))}),m.state.next({validatingFields:r.validatingFields,isValidating:!Qe(r.validatingFields)}))},v=(x,k=[],j,D,R=!0,A=!0)=>{if(D&&j&&!e.disabled){if(a.action=!0,A&&Array.isArray(M(n,x))){const z=j(M(n,x),D.argA,D.argB);R&&fe(n,x,z)}if(A&&Array.isArray(M(r.errors,x))){const z=j(M(r.errors,x),D.argA,D.argB);R&&fe(r.errors,x,z),Lk(r.errors,x)}if((d.touchedFields||f.touchedFields)&&A&&Array.isArray(M(r.touchedFields,x))){const z=j(M(r.touchedFields,x),D.argA,D.argB);R&&fe(r.touchedFields,x,z)}(d.dirtyFields||f.dirtyFields)&&(r.dirtyFields=Hn(i,s)),m.state.next({name:x,isDirty:ne(x,k),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else fe(s,x,k)},h=(x,k)=>{fe(r.errors,x,k),m.state.next({errors:r.errors})},p=x=>{r.errors=x,m.state.next({errors:r.errors,isValid:!1})},_=(x,k,j,D)=>{const R=M(n,x);if(R){const A=M(s,x,Ee(j)?M(i,x):j);Ee(A)||D&&D.defaultChecked||k?fe(s,x,k?A:If(R._f)):V(x,A),a.mount&&!a.action&&w()}},S=(x,k,j,D,R)=>{let A=!1,z=!1;const ue={name:x};if(!e.disabled){if(!j||D){(d.isDirty||f.isDirty)&&(z=r.isDirty,r.isDirty=ue.isDirty=ne(),A=z!==ue.isDirty);const me=Dr(M(i,x),k);z=!!M(r.dirtyFields,x),me?Ae(r.dirtyFields,x):fe(r.dirtyFields,x,!0),ue.dirtyFields=r.dirtyFields,A=A||(d.dirtyFields||f.dirtyFields)&&z!==!me}if(j){const me=M(r.touchedFields,x);me||(fe(r.touchedFields,x,j),ue.touchedFields=r.touchedFields,A=A||(d.touchedFields||f.touchedFields)&&me!==j)}A&&R&&m.state.next(ue)}return A?ue:{}},N=(x,k,j,D)=>{const R=M(r.errors,x),A=(d.isValid||f.isValid)&&Zt(k)&&r.isValid!==k;if(e.delayError&&j?(c=y(()=>h(x,j)),c(e.delayError)):(clearTimeout(u),c=null,j?fe(r.errors,x,j):Ae(r.errors,x)),(j?!Dr(R,j):R)||!Qe(D)||A){const z={...D,...A&&Zt(k)?{isValid:k}:{},errors:r.errors,name:x};r={...r,...z},m.state.next(z)}},E=async x=>{b(x,!0);const k=await e.resolver(s,e.context,Ak(x||o.mount,n,e.criteriaMode,e.shouldUseNativeValidation));return b(x),k},P=async x=>{const{errors:k}=await E(x);if(x)for(const j of x){const D=M(k,j);D?fe(r.errors,j,D):Ae(r.errors,j)}else r.errors=k;return k},G=async(x,k,j={valid:!0})=>{for(const D in x){const R=x[D];if(R){const{_f:A,...z}=R;if(A){const ue=o.array.has(A.name),me=R._f&&Ok(R._f);me&&d.validatingFields&&b([A.name],!0);const kt=await Ff(R,o.disabled,s,g,e.shouldUseNativeValidation&&!k,ue);if(me&&d.validatingFields&&b([A.name]),kt[A.name]&&(j.valid=!1,k))break;!k&&(M(kt,A.name)?ue?$k(r.errors,kt,A.name):fe(r.errors,A.name,kt[A.name]):Ae(r.errors,A.name))}!Qe(z)&&await G(z,k,j)}}return j.valid},K=()=>{for(const x of o.unMount){const k=M(n,x);k&&(k._f.refs?k._f.refs.every(j=>!ql(j)):!ql(k._f.ref))&&Sr(x)}o.unMount=new Set},ne=(x,k)=>!e.disabled&&(x&&k&&fe(s,x,k),!Dr(Z(),i)),q=(x,k,j)=>jk(x,o,{...a.mount?s:Ee(k)?i:gt(x)?{[x]:k}:k},j,k),re=x=>yd(M(a.mount?s:i,x,e.shouldUnregister?M(i,x,[]):[])),V=(x,k,j={})=>{const D=M(n,x);let R=k;if(D){const A=D._f;A&&(!A.disabled&&fe(s,x,zv(k,A)),R=No(A.ref)&&ot(k)?"":k,Fv(A.ref)?[...A.ref.options].forEach(z=>z.selected=R.includes(z.value)):A.refs?Vs(A.ref)?A.refs.forEach(z=>{(!z.defaultChecked||!z.disabled)&&(Array.isArray(R)?z.checked=!!R.find(ue=>ue===z.value):z.checked=R===z.value||!!R)}):A.refs.forEach(z=>z.checked=z.value===R):xd(A.ref)?A.ref.value="":(A.ref.value=R,A.ref.type||m.state.next({name:x,values:Me(s)})))}(j.shouldDirty||j.shouldTouch)&&S(x,R,j.shouldTouch,j.shouldDirty,!0),j.shouldValidate&&H(x)},te=(x,k,j)=>{for(const D in k){if(!k.hasOwnProperty(D))return;const R=k[D],A=x+"."+D,z=M(n,A);(o.array.has(x)||De(R)||z&&!z._f)&&!wn(R)?te(A,R,j):V(A,R,j)}},ce=(x,k,j={})=>{const D=M(n,x),R=o.array.has(x),A=Me(k);fe(s,x,A),R?(m.array.next({name:x,values:Me(s)}),(d.isDirty||d.dirtyFields||f.isDirty||f.dirtyFields)&&j.shouldDirty&&m.state.next({name:x,dirtyFields:Hn(i,s),isDirty:ne(x,A)})):D&&!D._f&&!ot(A)?te(x,A,j):V(x,A,j),$f(x,o)&&m.state.next({...r,name:x}),m.state.next({name:a.mount?x:void 0,values:Me(s)})},je=async x=>{a.mount=!0;const k=x.target;let j=k.name,D=!0;const R=M(n,j),A=me=>{D=Number.isNaN(me)||wn(me)&&isNaN(me.getTime())||Dr(me,M(s,j,me))},z=Df(e.mode),ue=Df(e.reValidateMode);if(R){let me,kt;const Ws=k.type?If(R._f):yk(x),jr=x.type===Tf.BLUR||x.type===Tf.FOCUS_OUT,cy=!Rk(R._f)&&!e.resolver&&!M(r.errors,j)&&!R._f.deps||Dk(jr,M(r.touchedFields,j),r.isSubmitted,ue,z),ul=$f(j,o,jr);fe(s,j,Ws),jr?(!k||!k.readOnly)&&(R._f.onBlur&&R._f.onBlur(x),c&&c(0)):R._f.onChange&&R._f.onChange(x);const dl=S(j,Ws,jr),uy=!Qe(dl)||ul;if(!jr&&m.state.next({name:j,type:x.type,values:Me(s)}),cy)return(d.isValid||f.isValid)&&(e.mode==="onBlur"?jr&&w():jr||w()),uy&&m.state.next({name:j,...ul?{}:dl});if(!jr&&ul&&m.state.next({...r}),e.resolver){const{errors:Ad}=await E([j]);if(A(Ws),D){const dy=Mf(r.errors,n,j),Od=Mf(Ad,n,dy.name||j);me=Od.error,j=Od.name,kt=Qe(Ad)}}else b([j],!0),me=(await Ff(R,o.disabled,s,g,e.shouldUseNativeValidation))[j],b([j]),A(Ws),D&&(me?kt=!1:(d.isValid||f.isValid)&&(kt=await G(n,!0)));D&&(R._f.deps&&(!Array.isArray(R._f.deps)||R._f.deps.length>0)&&H(R._f.deps),N(j,kt,me,dl))}},O=(x,k)=>{if(M(r.errors,k)&&x.focus)return x.focus(),1},H=async(x,k={})=>{let j,D;const R=cs(x);if(e.resolver){const A=await P(Ee(x)?x:R);j=Qe(A),D=x?!R.some(z=>M(A,z)):j}else x?(D=(await Promise.all(R.map(async A=>{const z=M(n,A);return await G(z&&z._f?{[A]:z}:z)}))).every(Boolean),!(!D&&!r.isValid)&&w()):D=j=await G(n);return m.state.next({...!gt(x)||(d.isValid||f.isValid)&&j!==r.isValid?{}:{name:x},...e.resolver||!x?{isValid:j}:{},errors:r.errors}),k.shouldFocus&&!D&&us(n,O,x?R:o.mount),D},Z=(x,k)=>{let j={...a.mount?s:i};return k&&(j=Uv(k.dirtyFields?r.dirtyFields:r.touchedFields,j)),Ee(x)?j:gt(x)?M(j,x):x.map(D=>M(j,D))},we=(x,k)=>({invalid:!!M((k||r).errors,x),isDirty:!!M((k||r).dirtyFields,x),error:M((k||r).errors,x),isValidating:!!M(r.validatingFields,x),isTouched:!!M((k||r).touchedFields,x)}),Te=x=>{x&&cs(x).forEach(k=>Ae(r.errors,k)),m.state.next({errors:x?r.errors:{}})},rn=(x,k,j)=>{const D=(M(n,x,{_f:{}})._f||{}).ref,R=M(r.errors,x)||{},{ref:A,message:z,type:ue,...me}=R;fe(r.errors,x,{...me,...k,ref:D}),m.state.next({name:x,errors:r.errors,isValid:!1}),j&&j.shouldFocus&&D&&D.focus&&D.focus()},ar=(x,k)=>Vt(x)?m.state.subscribe({next:j=>"values"in j&&x(q(void 0,k),j)}):q(x,k,!0),Rn=x=>m.state.subscribe({next:k=>{Ik(x.name,k.name,x.exact)&&Pk(k,x.formState||d,ly,x.reRenderRoot)&&x.callback({values:{...s},...r,...k,defaultValues:i})}}).unsubscribe,or=x=>(a.mount=!0,f={...f,...x.formState},Rn({...x,formState:f})),Sr=(x,k={})=>{for(const j of x?cs(x):o.mount)o.mount.delete(j),o.array.delete(j),k.keepValue||(Ae(n,j),Ae(s,j)),!k.keepError&&Ae(r.errors,j),!k.keepDirty&&Ae(r.dirtyFields,j),!k.keepTouched&&Ae(r.touchedFields,j),!k.keepIsValidating&&Ae(r.validatingFields,j),!e.shouldUnregister&&!k.keepDefaultValue&&Ae(i,j);m.state.next({values:Me(s)}),m.state.next({...r,...k.keepDirty?{isDirty:ne()}:{}}),!k.keepIsValid&&w()},jd=({disabled:x,name:k})=>{(Zt(x)&&a.mount||x||o.disabled.has(k))&&(x?o.disabled.add(k):o.disabled.delete(k))},ll=(x,k={})=>{let j=M(n,x);const D=Zt(k.disabled)||Zt(e.disabled);return fe(n,x,{...j||{},_f:{...j&&j._f?j._f:{ref:{name:x}},name:x,mount:!0,...k}}),o.mount.add(x),j?jd({disabled:Zt(k.disabled)?k.disabled:e.disabled,name:x}):_(x,!0,k.value),{...D?{disabled:k.disabled||e.disabled}:{},...e.progressive?{required:!!k.required,min:Vi(k.min),max:Vi(k.max),minLength:Vi(k.minLength),maxLength:Vi(k.maxLength),pattern:Vi(k.pattern)}:{},name:x,onChange:je,onBlur:je,ref:R=>{if(R){ll(x,k),j=M(n,x);const A=Ee(R.value)&&R.querySelectorAll&&R.querySelectorAll("input,select,textarea")[0]||R,z=Nk(A),ue=j._f.refs||[];if(z?ue.find(me=>me===A):A===j._f.ref)return;fe(n,x,{_f:{...j._f,...z?{refs:[...ue.filter(ql),A,...Array.isArray(M(i,x))?[{}]:[]],ref:{type:A.type,name:x}}:{ref:A}}}),_(x,!1,void 0,A)}else j=M(n,x,{}),j._f&&(j._f.mount=!1),(e.shouldUnregister||k.shouldUnregister)&&!(xk(o.array,x)&&a.action)&&o.unMount.add(x)}}},cl=()=>e.shouldFocusError&&us(n,O,o.mount),sy=x=>{Zt(x)&&(m.state.next({disabled:x}),us(n,(k,j)=>{const D=M(n,j);D&&(k.disabled=D._f.disabled||x,Array.isArray(D._f.refs)&&D._f.refs.forEach(R=>{R.disabled=D._f.disabled||x}))},0,!1))},Nd=(x,k)=>async j=>{let D;j&&(j.preventDefault&&j.preventDefault(),j.persist&&j.persist());let R=Me(s);if(m.state.next({isSubmitting:!0}),e.resolver){const{errors:A,values:z}=await E();r.errors=A,R=Me(z)}else await G(n);if(o.disabled.size)for(const A of o.disabled)Ae(R,A);if(Ae(r.errors,"root"),Qe(r.errors)){m.state.next({errors:{}});try{await x(R,j)}catch(A){D=A}}else k&&await k({...r.errors},j),cl(),setTimeout(cl);if(m.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Qe(r.errors)&&!D,submitCount:r.submitCount+1,errors:r.errors}),D)throw D},ay=(x,k={})=>{M(n,x)&&(Ee(k.defaultValue)?ce(x,Me(M(i,x))):(ce(x,k.defaultValue),fe(i,x,Me(k.defaultValue))),k.keepTouched||Ae(r.touchedFields,x),k.keepDirty||(Ae(r.dirtyFields,x),r.isDirty=k.defaultValue?ne(x,Me(M(i,x))):ne()),k.keepError||(Ae(r.errors,x),d.isValid&&w()),m.state.next({...r}))},Ed=(x,k={})=>{const j=x?Me(x):i,D=Me(j),R=Qe(x),A=R?i:D;if(k.keepDefaultValues||(i=j),!k.keepValues){if(k.keepDirtyValues){const z=new Set([...o.mount,...Object.keys(Hn(i,s))]);for(const ue of Array.from(z))M(r.dirtyFields,ue)?fe(A,ue,M(s,ue)):ce(ue,M(A,ue))}else{if(vd&&Ee(x))for(const z of o.mount){const ue=M(n,z);if(ue&&ue._f){const me=Array.isArray(ue._f.refs)?ue._f.refs[0]:ue._f.ref;if(No(me)){const kt=me.closest("form");if(kt){kt.reset();break}}}}if(k.keepFieldsRef)for(const z of o.mount)ce(z,M(A,z));else n={}}s=e.shouldUnregister?k.keepDefaultValues?Me(i):{}:Me(A),m.array.next({values:{...A}}),m.state.next({values:{...A}})}o={mount:k.keepDirtyValues?o.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},a.mount=!d.isValid||!!k.keepIsValid||!!k.keepDirtyValues||!e.shouldUnregister&&!Qe(A),a.watch=!!e.shouldUnregister,a.action=!1,k.keepErrors||(r.errors={}),m.state.next({submitCount:k.keepSubmitCount?r.submitCount:0,isDirty:R?!1:k.keepDirty?r.isDirty:!!(k.keepDefaultValues&&!Dr(x,i)),isSubmitted:k.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:R?{}:k.keepDirtyValues?k.keepDefaultValues&&s?Hn(i,s):r.dirtyFields:k.keepDefaultValues&&x?Hn(i,x):k.keepDirty?r.dirtyFields:{},touchedFields:k.keepTouched?r.touchedFields:{},errors:k.keepErrors?r.errors:{},isSubmitSuccessful:k.keepIsSubmitSuccessful?r.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:i})},Cd=(x,k)=>Ed(Vt(x)?x(s):x,k),oy=(x,k={})=>{const j=M(n,x),D=j&&j._f;if(D){const R=D.refs?D.refs[0]:D.ref;R.focus&&(R.focus(),k.shouldSelect&&Vt(R.select)&&R.select())}},ly=x=>{r={...r,...x}},Td={control:{register:ll,unregister:Sr,getFieldState:we,handleSubmit:Nd,setError:rn,_subscribe:Rn,_runSchema:E,_focusError:cl,_getWatch:q,_getDirty:ne,_setValid:w,_setFieldArray:v,_setDisabledField:jd,_setErrors:p,_getFieldArray:re,_reset:Ed,_resetDefaultValues:()=>Vt(e.defaultValues)&&e.defaultValues().then(x=>{Cd(x,e.resetOptions),m.state.next({isLoading:!1})}),_removeUnmounted:K,_disableForm:sy,_subjects:m,_proxyFormState:d,get _fields(){return n},get _formValues(){return s},get _state(){return a},set _state(x){a=x},get _defaultValues(){return i},get _names(){return o},set _names(x){o=x},get _formState(){return r},get _options(){return e},set _options(x){e={...e,...x}}},subscribe:or,trigger:H,register:ll,handleSubmit:Nd,watch:ar,setValue:ce,getValues:Z,reset:Cd,resetField:ay,clearErrors:Te,unregister:Sr,setError:rn,setFocus:oy,getFieldState:we};return{...Td,formControl:Td}}function Fk(t={}){const e=Xe.useRef(void 0),r=Xe.useRef(void 0),[n,i]=Xe.useState({isDirty:!1,isValidating:!1,isLoading:Vt(t.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1,isReady:!1,defaultValues:Vt(t.defaultValues)?void 0:t.defaultValues});if(!e.current)if(t.formControl)e.current={...t.formControl,formState:n},t.defaultValues&&!Vt(t.defaultValues)&&t.formControl.reset(t.defaultValues,t.resetOptions);else{const{formControl:a,...o}=Uk(t);e.current={...o,formState:n}}const s=e.current.control;return s._options=t,Sk(()=>{const a=s._subscribe({formState:s._proxyFormState,callback:()=>i({...s._formState}),reRenderRoot:!0});return i(o=>({...o,isReady:!0})),s._formState.isReady=!0,a},[s]),Xe.useEffect(()=>s._disableForm(t.disabled),[s,t.disabled]),Xe.useEffect(()=>{t.mode&&(s._options.mode=t.mode),t.reValidateMode&&(s._options.reValidateMode=t.reValidateMode)},[s,t.mode,t.reValidateMode]),Xe.useEffect(()=>{t.errors&&(s._setErrors(t.errors),s._focusError())},[s,t.errors]),Xe.useEffect(()=>{t.shouldUnregister&&s._subjects.state.next({values:s._getWatch()})},[s,t.shouldUnregister]),Xe.useEffect(()=>{if(s._proxyFormState.isDirty){const a=s._getDirty();a!==n.isDirty&&s._subjects.state.next({isDirty:a})}},[s,n.isDirty]),Xe.useEffect(()=>{var a;t.values&&!Dr(t.values,r.current)?(s._reset(t.values,{keepFieldsRef:!0,...s._options.resetOptions}),!((a=s._options.resetOptions)===null||a===void 0)&&a.keepIsValid||s._setValid(),r.current=t.values,i(o=>({...o}))):s._resetDefaultValues()},[s,t.values]),Xe.useEffect(()=>{s._state.mount||(s._setValid(),s._state.mount=!0),s._state.watch&&(s._state.watch=!1,s._subjects.state.next({...s._formState})),s._removeUnmounted()}),e.current.formState=kk(n,s),e.current}const Bf=(t,e,r)=>{if(t&&"reportValidity"in t){const n=M(r,e);t.setCustomValidity(n&&n.message||""),t.reportValidity()}},Wv=(t,e)=>{for(const r in e.fields){const n=e.fields[r];n&&n.ref&&"reportValidity"in n.ref?Bf(n.ref,r,t):n.refs&&n.refs.forEach(i=>Bf(i,r,t))}},Bk=(t,e)=>{e.shouldUseNativeValidation&&Wv(t,e);const r={};for(const n in t){const i=M(e.fields,n),s=Object.assign(t[n]||{},{ref:i&&i.ref});if(Vk(e.names||Object.keys(t),n)){const a=Object.assign({},M(r,n));fe(a,"root",s),fe(r,n,a)}else fe(r,n,s)}return r},Vk=(t,e)=>t.some(r=>r.startsWith(e+"."));var zk=function(t,e){for(var r={};t.length;){var n=t[0],i=n.code,s=n.message,a=n.path.join(".");if(!r[a])if("unionErrors"in n){var o=n.unionErrors[0].errors[0];r[a]={message:o.message,type:o.code}}else r[a]={message:s,type:i};if("unionErrors"in n&&n.unionErrors.forEach(function(d){return d.errors.forEach(function(f){return t.push(f)})}),e){var c=r[a].types,u=c&&c[n.code];r[a]=Mv(a,e,r,i,u?[].concat(u,n.message):n.message)}t.shift()}return r},Hk=function(t,e,r){return r===void 0&&(r={}),function(n,i,s){try{return Promise.resolve(function(a,o){try{var c=Promise.resolve(t[r.mode==="sync"?"parse":"parseAsync"](n,e)).then(function(u){return s.shouldUseNativeValidation&&Wv({},s),{errors:{},values:r.raw?n:u}})}catch(u){return o(u)}return c&&c.then?c.then(void 0,o):c}(0,function(a){if(function(o){return Array.isArray(o==null?void 0:o.errors)}(a))return{values:{},errors:Bk(zk(a.errors,!s.shouldUseNativeValidation&&s.criteriaMode==="all"),s)};throw a}))}catch(a){return Promise.reject(a)}}};const Wk=ir({name:Q().min(1,"Medication name is required"),dosage:Q().min(1,"Dosage is required"),frequency:Q().min(1,"Frequency is required"),duration:Q().optional()}),qk=ir({age:Mt().min(0).max(150),weight:Mt().min(0).max(500),height:Mt().min(0).max(300),bloodPressureSystolic:Mt().min(50).max(250),bloodPressureDiastolic:Mt().min(30).max(150),heartRate:Mt().min(30).max(250).optional(),bloodGlucose:Mt().optional()}),Gk=ir({smokingStatus:mr(["never","former","current"]),alcoholUse:mr(["none","occasional","moderate","heavy"]),exerciseFrequency:mr(["sedentary","light","moderate","active"]),dietType:Q().optional(),sleepHours:Mt().min(0).max(24).optional()}),Kk=ir({firstName:Q().min(1,"First name is required"),lastName:Q().min(1,"Last name is required"),dateOfBirth:Q(),sex:mr(["male","female","other"]),conditions:tt(Q()),allergies:tt(Q()),familyHistory:tt(Q()).optional(),surgicalHistory:tt(Q()).optional(),currentMedications:tt(Wk),healthMetrics:qk,lifestyle:Gk,primaryComplaint:Q().min(1,"Primary complaint is required"),complaintDuration:Q(),complaintSeverity:mr(["mild","moderate","severe"]),additionalNotes:Q().optional()});function Jk(t,e){const r=e/100;return Math.round(t/(r*r)*10)/10}function Yk(t){return t<18.5?"Underweight":t<25?"Normal":t<30?"Overweight":t<35?"Obese Class I":t<40?"Obese Class II":"Obese Class III"}const Zk={firstName:"",lastName:"",dateOfBirth:"",sex:"male",conditions:[],allergies:[],familyHistory:[],surgicalHistory:[],currentMedications:[],healthMetrics:{age:30,weight:70,height:170,bloodPressureSystolic:120,bloodPressureDiastolic:80,heartRate:72,bloodGlucose:100},lifestyle:{smokingStatus:"never",alcoholUse:"none",exerciseFrequency:"moderate",dietType:"",sleepHours:7},primaryComplaint:"",complaintDuration:"",complaintSeverity:"moderate",additionalNotes:""},Qk={0:["firstName","lastName","dateOfBirth","sex"],1:[],2:[],3:["healthMetrics.age","healthMetrics.weight","healthMetrics.height","healthMetrics.bloodPressureSystolic","healthMetrics.bloodPressureDiastolic"],4:["lifestyle.smokingStatus","lifestyle.alcoholUse","lifestyle.exerciseFrequency"],5:["primaryComplaint","complaintDuration","complaintSeverity"]};function Xk(){const[t,e]=Y.useState(0),[r,n]=Y.useState([]),{setPatientData:i,setCurrentStep:s}=kr(),a=Fk({resolver:Hk(Kk),defaultValues:Zk,mode:"onChange"}),{watch:o,setValue:c,getValues:u,trigger:d,formState:{errors:f}}=a,m=o(),g=[{id:"demographics",title:"Demographics",fields:["firstName","lastName","dateOfBirth","sex"]},{id:"medical-history",title:"Medical History",fields:["conditions","allergies"]},{id:"medications",title:"Current Medications",fields:["currentMedications"]},{id:"health-metrics",title:"Health Metrics",fields:["healthMetrics"]},{id:"lifestyle",title:"Lifestyle",fields:["lifestyle"]},{id:"complaint",title:"Primary Complaint",fields:["primaryComplaint","complaintDuration","complaintSeverity"]}],y=g[t],w=t===0,b=t===g.length-1,v=Y.useCallback(()=>{const V=Qk[t]||[],te=[];for(const ce of V){const je=ce.split(".");let O=m;for(const H of je)O=O==null?void 0:O[H];if(O==null||O===""){const H=je[je.length-1].replace(/([A-Z])/g," $1").replace(/^./,Z=>Z.toUpperCase());te.push(`${H} is required`)}}return{isValid:te.length===0,errors:te}},[t,m]),h=Y.useCallback(async()=>{const V=y.fields;await d(V);const{isValid:te,errors:ce}=v();return n(ce),te&&!b&&(e(je=>je+1),n([])),te},[y,b,d,v]),p=Y.useCallback(()=>{w||(e(V=>V-1),n([]))},[w]),_=Y.useCallback(async V=>{if(V<t)e(V),n([]);else if(V>t){const{isValid:te}=v();te&&(e(V),n([]))}},[t,v]),S=Y.useCallback(()=>{const{isValid:V}=v();return V},[v]),N=Y.useCallback(V=>{const te=u("currentMedications")||[];c("currentMedications",[...te,V])},[u,c]),E=Y.useCallback(V=>{const te=u("currentMedications")||[];c("currentMedications",te.filter((ce,je)=>je!==V))},[u,c]),P=Y.useCallback(V=>{const te=u("conditions")||[];te.includes(V)||c("conditions",[...te,V])},[u,c]),G=Y.useCallback(V=>{const te=u("conditions")||[];c("conditions",te.filter(ce=>ce!==V))},[u,c]),K=Y.useCallback(V=>{const te=u("allergies")||[];te.includes(V)||c("allergies",[...te,V])},[u,c]),ne=Y.useCallback(V=>{const te=u("allergies")||[];c("allergies",te.filter(ce=>ce!==V))},[u,c]),q=Y.useCallback(V=>{Object.entries(V).forEach(([te,ce])=>{c(te,ce)})},[c]),re=Y.useCallback(V=>{i(V),s(1)},[i,s]);return{form:a,formData:m,errors:f,stepErrors:r,wizardStep:t,wizardSteps:g,currentStepData:y,isFirstStep:w,isLastStep:b,isCurrentStepValid:S,nextStep:h,prevStep:p,goToStep:_,addMedication:N,removeMedication:E,addCondition:P,removeCondition:G,addAllergy:K,removeAllergy:ne,loadSamplePatient:q,onSubmit:re}}/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var e1={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t1=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),J=(t,e)=>{const r=Y.forwardRef(({color:n="currentColor",size:i=24,strokeWidth:s=2,absoluteStrokeWidth:a,className:o="",children:c,...u},d)=>Y.createElement("svg",{ref:d,...e1,width:i,height:i,stroke:n,strokeWidth:a?Number(s)*24/Number(i):s,className:["lucide",`lucide-${t1(t)}`,o].join(" "),...u},[...e.map(([f,m])=>Y.createElement(f,m)),...Array.isArray(c)?c:[c]]));return r.displayName=`${t}`,r};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nr=J("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ni=J("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const We=J("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vf=J("Brain",[["path",{d:"M9.5 2A2.5 2.5 0 0 1 12 4.5v15a2.5 2.5 0 0 1-4.96.44 2.5 2.5 0 0 1-2.96-3.08 3 3 0 0 1-.34-5.58 2.5 2.5 0 0 1 1.32-4.24 2.5 2.5 0 0 1 1.98-3A2.5 2.5 0 0 1 9.5 2Z",key:"1mhkh5"}],["path",{d:"M14.5 2A2.5 2.5 0 0 0 12 4.5v15a2.5 2.5 0 0 0 4.96.44 2.5 2.5 0 0 0 2.96-3.08 3 3 0 0 0 .34-5.58 2.5 2.5 0 0 0-1.32-4.24 2.5 2.5 0 0 0-1.98-3A2.5 2.5 0 0 0 14.5 2Z",key:"1d6s00"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const il=J("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bd=J("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bn=J("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sl=J("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r1=J("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Co=J("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n1=J("Cigarette",[["path",{d:"M18 12H2v4h16",key:"2rt1hm"}],["path",{d:"M22 12v4",key:"142cbu"}],["path",{d:"M7 12v4",key:"jqww69"}],["path",{d:"M18 8c0-2.5-2-2.5-2-5",key:"1il607"}],["path",{d:"M22 8c0-2.5-2-2.5-2-5",key:"1gah44"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zs=J("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qv=J("CloudOff",[["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M5.782 5.782A7 7 0 0 0 9 19h8.5a4.5 4.5 0 0 0 1.307-.193",key:"yfwify"}],["path",{d:"M21.532 16.5A4.5 4.5 0 0 0 17.5 10h-1.79A7.008 7.008 0 0 0 10 5.07",key:"jlfiyv"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gv=J("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i1=J("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s1=J("Droplet",[["path",{d:"M12 22a7 7 0 0 0 7-7c0-2-1-3.9-3-5.5s-3.5-4-4-6.5c-.5 2.5-2 4.9-4 6.5C6 11.1 5 13 5 15a7 7 0 0 0 7 7z",key:"c7niix"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kv=J("Droplets",[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a1=J("Dumbbell",[["path",{d:"m6.5 6.5 11 11",key:"f7oqzb"}],["path",{d:"m21 21-1-1",key:"cpc6if"}],["path",{d:"m3 3 1 1",key:"d3rpuf"}],["path",{d:"m18 22 4-4",key:"1e32o6"}],["path",{d:"m2 6 4-4",key:"189tqz"}],["path",{d:"m3 10 7-7",key:"1bxui2"}],["path",{d:"m14 21 7-7",key:"16x78n"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kd=J("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xt=J("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o1=J("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const To=J("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ps=J("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jv=J("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pi=J("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sd=J("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $a=J("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l1=J("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c1=J("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yv=J("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tt=J("Pill",[["path",{d:"m10.5 20.5 10-10a4.95 4.95 0 1 0-7-7l-10 10a4.95 4.95 0 1 0 7 7Z",key:"wa1lgi"}],["path",{d:"m8.5 8.5 7 7",key:"rvfmvr"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ao=J("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zv=J("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u1=J("Ruler",[["path",{d:"M21.3 15.3a2.4 2.4 0 0 1 0 3.4l-2.6 2.6a2.4 2.4 0 0 1-3.4 0L2.7 8.7a2.41 2.41 0 0 1 0-3.4l2.6-2.6a2.41 2.41 0 0 1 3.4 0Z",key:"icamh8"}],["path",{d:"m14.5 12.5 2-2",key:"inckbg"}],["path",{d:"m11.5 9.5 2-2",key:"fmmyf7"}],["path",{d:"m8.5 6.5 2-2",key:"vc6u1g"}],["path",{d:"m17.5 15.5 2-2",key:"wo5hmg"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d1=J("Scale",[["path",{d:"m16 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"7g6ntu"}],["path",{d:"m2 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"ijws7r"}],["path",{d:"M7 21h10",key:"1b0cd5"}],["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"M3 7h2c2 0 5-1 7-2 2 1 5 2 7 2h2",key:"3gwbw2"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h1=J("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qv=J("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xv=J("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const al=J("Stethoscope",[["path",{d:"M4.8 2.3A.3.3 0 1 0 5 2H4a2 2 0 0 0-2 2v5a6 6 0 0 0 6 6v0a6 6 0 0 0 6-6V4a2 2 0 0 0-2-2h-1a.2.2 0 1 0 .3.3",key:"1jd90r"}],["path",{d:"M8 15v1a6 6 0 0 0 6 6v0a6 6 0 0 0 6-6v-4",key:"126ukv"}],["circle",{cx:"20",cy:"10",r:"2",key:"ts1r5v"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f1=J("TestTube",[["path",{d:"M14.5 2v17.5c0 1.4-1.1 2.5-2.5 2.5h0c-1.4 0-2.5-1.1-2.5-2.5V2",key:"187lwq"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M14.5 16h-5",key:"1ox875"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ey=J("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pr=J("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ty=J("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m1=J("Utensils",[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2v0a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"1ogz0v"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p1=J("Wine",[["path",{d:"M8 22h8",key:"rmew8v"}],["path",{d:"M7 10h10",key:"1101jm"}],["path",{d:"M12 15v7",key:"t2xh3l"}],["path",{d:"M12 15a5 5 0 0 0 5-5c0-2-.5-4-2-8H9c-1.5 4-2 6-2 8a5 5 0 0 0 5 5Z",key:"10ffi3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hs=J("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nt=J("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function ya({children:t,required:e=!1,icon:r}){return l.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:l.jsxs("span",{className:"flex items-center gap-2",children:[r&&l.jsx(r,{className:"w-4 h-4 text-clinical-muted"}),t,e?l.jsx("span",{className:"text-clinical-danger text-xs",children:"*Required"}):l.jsx("span",{className:"text-clinical-muted text-xs",children:"(Optional)"})]})})}function g1({form:t}){const{register:e,formState:{errors:r},watch:n}=t,i=n("firstName"),s=n("lastName"),a=n("dateOfBirth");return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[l.jsx("div",{className:"w-12 h-12 rounded-xl bg-clinical-accent/20 flex items-center justify-center",children:l.jsx(pr,{className:"w-6 h-6 text-clinical-accent"})}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-xl font-bold text-white",children:"Patient Demographics"}),l.jsx("p",{className:"text-sm text-clinical-muted",children:"Basic patient identification information"})]})]}),l.jsx("div",{className:"p-3 rounded-lg bg-clinical-accent/10 border border-clinical-accent/20",children:l.jsxs("p",{className:"text-sm text-blue-300",children:[l.jsx("span",{className:"text-clinical-danger",children:"*"})," All fields in this section are required to proceed."]})}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{className:"space-y-1",children:[l.jsx(ya,{required:!0,children:"First Name"}),l.jsx("input",{...e("firstName"),type:"text",placeholder:"Enter first name",className:`
              w-full px-4 py-3 rounded-xl bg-clinical-secondary border 
              ${r.firstName||!i?"border-clinical-danger/50":"border-clinical-success/50"}
              text-white placeholder-clinical-muted focus:outline-none
              ${i?"ring-1 ring-clinical-success/30":""}
            `}),r.firstName&&l.jsx("p",{className:"text-xs text-clinical-danger",children:r.firstName.message})]}),l.jsxs("div",{className:"space-y-1",children:[l.jsx(ya,{required:!0,children:"Last Name"}),l.jsx("input",{...e("lastName"),type:"text",placeholder:"Enter last name",className:`
              w-full px-4 py-3 rounded-xl bg-clinical-secondary border 
              ${r.lastName||!s?"border-clinical-danger/50":"border-clinical-success/50"}
              text-white placeholder-clinical-muted focus:outline-none
              ${s?"ring-1 ring-clinical-success/30":""}
            `}),r.lastName&&l.jsx("p",{className:"text-xs text-clinical-danger",children:r.lastName.message})]}),l.jsxs("div",{className:"space-y-1",children:[l.jsx(ya,{required:!0,icon:il,children:"Date of Birth"}),l.jsx("input",{...e("dateOfBirth"),type:"date",className:`
              w-full px-4 py-3 rounded-xl bg-clinical-secondary border 
              ${r.dateOfBirth||!a?"border-clinical-danger/50":"border-clinical-success/50"}
              text-white focus:outline-none
              [color-scheme:dark]
              ${a?"ring-1 ring-clinical-success/30":""}
            `}),r.dateOfBirth&&l.jsx("p",{className:"text-xs text-clinical-danger",children:r.dateOfBirth.message})]}),l.jsxs("div",{className:"space-y-1",children:[l.jsx(ya,{required:!0,icon:ty,children:"Biological Sex"}),l.jsxs("select",{...e("sex"),className:`
              w-full px-4 py-3 rounded-xl bg-clinical-secondary border border-clinical-success/50
              text-white focus:outline-none cursor-pointer ring-1 ring-clinical-success/30
            `,children:[l.jsx("option",{value:"male",children:"Male"}),l.jsx("option",{value:"female",children:"Female"}),l.jsx("option",{value:"other",children:"Other"})]}),r.sex&&l.jsx("p",{className:"text-xs text-clinical-danger",children:r.sex.message})]})]}),l.jsx("div",{className:"mt-6 p-4 rounded-xl bg-clinical-secondary/50 border border-white/10",children:l.jsxs("p",{className:"text-sm text-clinical-muted",children:[l.jsx("strong",{className:"text-gray-300",children:"Note:"})," All patient information is handled securely and in compliance with healthcare privacy regulations."]})})]})}const v1=[{label:"John Smith - High Risk (Multiple Interactions)",description:"Elderly patient with hypertension, diabetes, and multiple medications",riskPreview:"HIGH RISK - Drug interactions expected",data:{firstName:"John",lastName:"Smith",dateOfBirth:"1955-03-15",sex:"male",conditions:["Type 2 Diabetes","Hypertension","Chronic Kidney Disease Stage 3","Atrial Fibrillation","Hyperlipidemia"],allergies:["Penicillin","Sulfa drugs"],familyHistory:["Heart disease","Stroke","Diabetes"],surgicalHistory:["Appendectomy (1990)","Coronary stent placement (2020)"],currentMedications:[{name:"Metformin",dosage:"1000mg",frequency:"twice daily"},{name:"Lisinopril",dosage:"20mg",frequency:"once daily"},{name:"Warfarin",dosage:"5mg",frequency:"once daily"},{name:"Atorvastatin",dosage:"40mg",frequency:"once daily at bedtime"},{name:"Metoprolol",dosage:"50mg",frequency:"twice daily"},{name:"Aspirin",dosage:"81mg",frequency:"once daily"}],healthMetrics:{age:69,weight:95,height:175,bloodPressureSystolic:145,bloodPressureDiastolic:92,heartRate:78,bloodGlucose:165},lifestyle:{smokingStatus:"former",alcoholUse:"occasional",exerciseFrequency:"light",dietType:"Low sodium diet",sleepHours:6},primaryComplaint:"Erectile dysfunction",complaintDuration:"6 months",complaintSeverity:"moderate",additionalNotes:"Patient reports this is affecting quality of life and relationship. Interested in treatment options."}},{label:"Maria Garcia - Medium Risk (Contraindications)",description:"Middle-aged woman with anxiety, migraine history",riskPreview:"MEDIUM RISK - Contraindications present",data:{firstName:"Maria",lastName:"Garcia",dateOfBirth:"1980-07-22",sex:"female",conditions:["Generalized Anxiety Disorder","Migraine with aura","Hypothyroidism","History of Deep Vein Thrombosis"],allergies:["Ibuprofen","Latex"],familyHistory:["Breast cancer","Thyroid disease"],surgicalHistory:["Thyroidectomy (partial, 2018)"],currentMedications:[{name:"Sertraline",dosage:"100mg",frequency:"once daily"},{name:"Levothyroxine",dosage:"75mcg",frequency:"once daily before breakfast"},{name:"Sumatriptan",dosage:"50mg",frequency:"as needed for migraines"},{name:"Rivaroxaban",dosage:"20mg",frequency:"once daily with food"}],healthMetrics:{age:44,weight:68,height:162,bloodPressureSystolic:118,bloodPressureDiastolic:76,heartRate:72,bloodGlucose:95},lifestyle:{smokingStatus:"never",alcoholUse:"occasional",exerciseFrequency:"moderate",dietType:"Mediterranean diet",sleepHours:7},primaryComplaint:"Hair loss - female pattern hair loss",complaintDuration:"1 year",complaintSeverity:"moderate",additionalNotes:"Noticed thinning primarily at the crown. Thyroid levels are stable. Wants to explore treatment options."}},{label:"David Chen - Low Risk (Healthy Patient)",description:"Young healthy male with minor complaint",riskPreview:"LOW RISK - Few complicating factors",data:{firstName:"David",lastName:"Chen",dateOfBirth:"1995-11-08",sex:"male",conditions:["Seasonal allergies"],allergies:["Pollen","Dust mites"],familyHistory:[],surgicalHistory:[],currentMedications:[{name:"Cetirizine",dosage:"10mg",frequency:"once daily as needed"}],healthMetrics:{age:29,weight:75,height:178,bloodPressureSystolic:118,bloodPressureDiastolic:72,heartRate:65,bloodGlucose:88},lifestyle:{smokingStatus:"never",alcoholUse:"occasional",exerciseFrequency:"active",dietType:"Balanced diet",sleepHours:8},primaryComplaint:"Weight loss - wants to lose 10 pounds",complaintDuration:"3 months",complaintSeverity:"mild",additionalNotes:"Looking for assistance with weight management. Currently at healthy BMI but wants to be more fit for upcoming athletic event."}},{label:"Robert Johnson - Critical Risk (Severe Allergies)",description:"Patient with multiple severe allergies and complex history",riskPreview:"CRITICAL RISK - Multiple severe allergies, careful medication selection required",data:{firstName:"Robert",lastName:"Johnson",dateOfBirth:"1968-04-30",sex:"male",conditions:["Coronary Artery Disease","Heart Failure (EF 35%)","Type 2 Diabetes","Peripheral Neuropathy","Chronic Pain Syndrome","Depression"],allergies:["Penicillin (anaphylaxis)","NSAIDs (GI bleeding)","ACE inhibitors (angioedema)","Codeine","Metformin (lactic acidosis history)","Contrast dye"],familyHistory:["Sudden cardiac death","Diabetes","Cancer"],surgicalHistory:["CABG x3 (2019)","ICD placement (2020)"],currentMedications:[{name:"Carvedilol",dosage:"25mg",frequency:"twice daily"},{name:"Losartan",dosage:"50mg",frequency:"once daily"},{name:"Furosemide",dosage:"40mg",frequency:"once daily"},{name:"Insulin Glargine",dosage:"30 units",frequency:"once daily at bedtime"},{name:"Gabapentin",dosage:"300mg",frequency:"three times daily"},{name:"Duloxetine",dosage:"60mg",frequency:"once daily"},{name:"Clopidogrel",dosage:"75mg",frequency:"once daily"}],healthMetrics:{age:56,weight:102,height:180,bloodPressureSystolic:138,bloodPressureDiastolic:85,heartRate:68,bloodGlucose:185},lifestyle:{smokingStatus:"former",alcoholUse:"none",exerciseFrequency:"sedentary",dietType:"Cardiac diet",sleepHours:5},primaryComplaint:"Erectile dysfunction - severe",complaintDuration:"2 years",complaintSeverity:"severe",additionalNotes:"ED worsened after cardiac surgery. Psychologically impacting patient. Has tried lifestyle modifications without success. Concerned about medication interactions with heart condition."}},{label:"Sarah Williams - No Risk (Ideal Patient)",description:"Young healthy woman with no medical history - perfect test case",riskPreview:"NO RISK - Clean medical profile",data:{firstName:"Sarah",lastName:"Williams",dateOfBirth:"1998-06-15",sex:"female",conditions:[],allergies:[],familyHistory:[],surgicalHistory:[],currentMedications:[],healthMetrics:{age:26,weight:62,height:165,bloodPressureSystolic:112,bloodPressureDiastolic:70,heartRate:68,bloodGlucose:85},lifestyle:{smokingStatus:"never",alcoholUse:"occasional",exerciseFrequency:"active",dietType:"Balanced whole foods",sleepHours:8},primaryComplaint:"Skin conditions (acne)",complaintDuration:"2 months",complaintSeverity:"mild",additionalNotes:"Mild hormonal acne flare-up. No previous treatments tried. Looking for first-line treatment options."}}],y1=["Type 2 Diabetes","Type 1 Diabetes","Hypertension","Hyperlipidemia","Coronary Artery Disease","Heart Failure","Atrial Fibrillation","Chronic Kidney Disease","Asthma","COPD","Depression","Anxiety","Hypothyroidism","Hyperthyroidism","GERD","Osteoarthritis","Rheumatoid Arthritis","Migraine","Epilepsy","Obesity","Sleep Apnea","BPH (Benign Prostatic Hyperplasia)","Glaucoma","History of Stroke","History of DVT/PE","Liver Disease","HIV/AIDS"],w1=["Penicillin","Sulfa drugs","Aspirin","NSAIDs","ACE inhibitors","Codeine","Morphine","Latex","Iodine/Contrast dye","Shellfish","Peanuts","Tree nuts","Eggs","Dairy","Gluten","Soy"],x1=["Erectile dysfunction","Hair loss (male pattern)","Hair loss (female pattern)","Weight loss assistance","Weight gain/muscle building","Anxiety symptoms","Depression symptoms","Insomnia","Chronic pain","Skin conditions (acne)","Skin conditions (anti-aging)","Low testosterone symptoms","Menopause symptoms","Birth control consultation","Cold/flu symptoms","Allergies"];function _1({form:t,addCondition:e,removeCondition:r,addAllergy:n,removeAllergy:i}){const{watch:s}=t,a=s("conditions")||[],o=s("allergies")||[],[c,u]=Y.useState(""),[d,f]=Y.useState(""),[m,g]=Y.useState(!1),[y,w]=Y.useState(!1),b=()=>{c.trim()&&(e(c.trim()),u(""))},v=()=>{d.trim()&&(n(d.trim()),f(""))},h=y1.filter(_=>!a.includes(_)),p=w1.filter(_=>!o.includes(_));return l.jsxs("div",{className:"space-y-8",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[l.jsx("div",{className:"w-12 h-12 rounded-xl bg-purple-500/20 flex items-center justify-center",children:l.jsx(Xt,{className:"w-6 h-6 text-purple-400"})}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-xl font-bold text-white",children:"Medical History"}),l.jsx("p",{className:"text-sm text-clinical-muted",children:"Pre-existing conditions and allergies"})]})]}),l.jsxs("div",{className:"p-3 rounded-lg bg-purple-500/10 border border-purple-500/20 flex items-start gap-2",children:[l.jsx(Pi,{className:"w-4 h-4 text-purple-400 mt-0.5 shrink-0"}),l.jsxs("p",{className:"text-sm text-purple-300",children:["All fields in this section are ",l.jsx("strong",{children:"optional"}),". Add any relevant conditions or allergies, or skip to the next step."]})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("h3",{className:"text-lg font-semibold text-white flex items-center gap-2",children:[l.jsx("span",{className:"w-2 h-2 rounded-full bg-purple-500"}),"Medical Conditions",l.jsx("span",{className:"text-xs text-clinical-muted font-normal",children:"(Optional)"})]}),l.jsxs("div",{className:"flex flex-wrap gap-2",children:[a.map(_=>l.jsxs("span",{className:`inline-flex items-center gap-2 px-3 py-1.5 rounded-lg 
                         bg-purple-500/20 text-purple-300 border border-purple-500/30`,children:[_,l.jsx("button",{type:"button",onClick:()=>r(_),className:"hover:text-white transition-colors",children:l.jsx(Nt,{className:"w-4 h-4"})})]},_)),a.length===0&&l.jsx("span",{className:"text-clinical-muted text-sm",children:"No conditions added"})]}),l.jsx("div",{className:"relative",children:l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("div",{className:"relative flex-1",children:[l.jsx("input",{type:"text",value:c,onChange:_=>u(_.target.value),onFocus:()=>g(!0),onBlur:()=>setTimeout(()=>g(!1),200),placeholder:"Type or select a condition...",className:`w-full px-4 py-3 rounded-xl bg-clinical-secondary border border-white/10 
                           text-white placeholder-clinical-muted focus:outline-none`,onKeyDown:_=>_.key==="Enter"&&(_.preventDefault(),b())}),m&&h.length>0&&l.jsx("div",{className:`absolute z-10 w-full mt-2 max-h-48 overflow-y-auto rounded-xl 
                                bg-clinical-secondary border border-white/10 shadow-xl`,children:h.filter(_=>_.toLowerCase().includes(c.toLowerCase())).slice(0,8).map(_=>l.jsx("button",{type:"button",onClick:()=>{e(_),u("")},className:`w-full px-4 py-2 text-left text-gray-300 hover:bg-white/10 
                                   hover:text-white transition-colors`,children:_},_))})]}),l.jsx("button",{type:"button",onClick:b,className:`px-4 py-3 rounded-xl bg-purple-500/20 border border-purple-500/30 
                         text-purple-300 hover:bg-purple-500/30 transition-colors`,children:l.jsx(Ao,{className:"w-5 h-5"})})]})})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("h3",{className:"text-lg font-semibold text-white flex items-center gap-2",children:[l.jsx(We,{className:"w-5 h-5 text-clinical-danger"}),"Allergies",l.jsx("span",{className:"text-xs text-clinical-muted font-normal",children:"(Optional - but important for safety)"})]}),l.jsxs("div",{className:"flex flex-wrap gap-2",children:[o.map(_=>l.jsxs("span",{className:`inline-flex items-center gap-2 px-3 py-1.5 rounded-lg 
                         bg-clinical-danger/20 text-red-300 border border-clinical-danger/30`,children:[_,l.jsx("button",{type:"button",onClick:()=>i(_),className:"hover:text-white transition-colors",children:l.jsx(Nt,{className:"w-4 h-4"})})]},_)),o.length===0&&l.jsx("span",{className:"text-clinical-muted text-sm",children:"No allergies recorded (NKDA)"})]}),l.jsx("div",{className:"relative",children:l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("div",{className:"relative flex-1",children:[l.jsx("input",{type:"text",value:d,onChange:_=>f(_.target.value),onFocus:()=>w(!0),onBlur:()=>setTimeout(()=>w(!1),200),placeholder:"Type or select an allergy...",className:`w-full px-4 py-3 rounded-xl bg-clinical-secondary border border-white/10 
                           text-white placeholder-clinical-muted focus:outline-none`,onKeyDown:_=>_.key==="Enter"&&(_.preventDefault(),v())}),y&&p.length>0&&l.jsx("div",{className:`absolute z-10 w-full mt-2 max-h-48 overflow-y-auto rounded-xl 
                                bg-clinical-secondary border border-white/10 shadow-xl`,children:p.filter(_=>_.toLowerCase().includes(d.toLowerCase())).slice(0,8).map(_=>l.jsx("button",{type:"button",onClick:()=>{n(_),f("")},className:`w-full px-4 py-2 text-left text-gray-300 hover:bg-white/10 
                                   hover:text-white transition-colors`,children:_},_))})]}),l.jsx("button",{type:"button",onClick:v,className:`px-4 py-3 rounded-xl bg-clinical-danger/20 border border-clinical-danger/30 
                         text-red-300 hover:bg-clinical-danger/30 transition-colors`,children:l.jsx(Ao,{className:"w-5 h-5"})})]})}),o.length>0&&l.jsx("div",{className:"p-4 rounded-xl bg-clinical-danger/10 border border-clinical-danger/20",children:l.jsxs("p",{className:"text-sm text-red-300",children:[l.jsx("strong",{children:" Allergy Alert:"})," Patient has ",o.length," documented allergy(ies). These will be cross-checked against any treatment recommendations."]})})]})]})}const b1=["once daily","twice daily","three times daily","four times daily","every 4 hours","every 6 hours","every 8 hours","every 12 hours","once weekly","as needed","at bedtime","with meals"];function k1({form:t,addMedication:e,removeMedication:r}){const{watch:n}=t,i=n("currentMedications")||[],[s,a]=Y.useState({name:"",dosage:"",frequency:"once daily",duration:""}),o=()=>{s.name.trim()&&s.dosage.trim()&&(e(s),a({name:"",dosage:"",frequency:"once daily",duration:""}))};return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[l.jsx("div",{className:"w-12 h-12 rounded-xl bg-emerald-500/20 flex items-center justify-center",children:l.jsx(Tt,{className:"w-6 h-6 text-emerald-400"})}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-xl font-bold text-white",children:"Current Medications"}),l.jsx("p",{className:"text-sm text-clinical-muted",children:"List all medications the patient is currently taking"})]})]}),l.jsxs("div",{className:"p-3 rounded-lg bg-emerald-500/10 border border-emerald-500/20 flex items-start gap-2",children:[l.jsx(Pi,{className:"w-4 h-4 text-emerald-400 mt-0.5 shrink-0"}),l.jsxs("p",{className:"text-sm text-emerald-300",children:["Medications are ",l.jsx("strong",{children:"optional"})," but highly recommended for accurate drug interaction analysis. Skip if patient is not on any medications."]})]}),l.jsx("div",{className:"space-y-3",children:i.length>0?i.map((c,u)=>l.jsxs("div",{className:`flex items-center justify-between p-4 rounded-xl bg-clinical-secondary/50 
                         border border-white/10 group hover:border-white/20 transition-all`,children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("div",{className:"w-10 h-10 rounded-lg bg-emerald-500/20 flex items-center justify-center",children:l.jsx(Tt,{className:"w-5 h-5 text-emerald-400"})}),l.jsxs("div",{children:[l.jsx("div",{className:"font-medium text-white",children:c.name}),l.jsxs("div",{className:"flex items-center gap-3 text-sm text-clinical-muted",children:[l.jsxs("span",{className:"flex items-center gap-1",children:[l.jsx(Kv,{className:"w-3 h-3"}),c.dosage]}),l.jsxs("span",{className:"flex items-center gap-1",children:[l.jsx(zs,{className:"w-3 h-3"}),c.frequency]}),c.duration&&l.jsxs("span",{children:["(",c.duration,")"]})]})]})]}),l.jsx("button",{type:"button",onClick:()=>r(u),className:`p-2 rounded-lg text-clinical-muted hover:text-clinical-danger 
                           hover:bg-clinical-danger/10 transition-all opacity-0 group-hover:opacity-100`,children:l.jsx(Nt,{className:"w-5 h-5"})})]},u)):l.jsxs("div",{className:"p-8 rounded-xl border-2 border-dashed border-white/10 text-center",children:[l.jsx(Tt,{className:"w-8 h-8 text-clinical-muted mx-auto mb-2"}),l.jsx("p",{className:"text-clinical-muted",children:"No medications added yet"})]})}),l.jsxs("div",{className:"p-4 rounded-xl bg-clinical-secondary/30 border border-white/10 space-y-4",children:[l.jsxs("h3",{className:"text-sm font-semibold text-gray-300 flex items-center gap-2",children:[l.jsx(Ao,{className:"w-4 h-4"}),"Add Medication"]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"block text-xs font-medium text-clinical-muted",children:"Medication Name"}),l.jsx("input",{type:"text",value:s.name,onChange:c=>a({...s,name:c.target.value}),placeholder:"e.g., Metformin",className:`w-full px-4 py-2.5 rounded-lg bg-clinical-secondary border border-white/10 
                         text-white placeholder-clinical-muted text-sm focus:outline-none`})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"block text-xs font-medium text-clinical-muted",children:"Dosage"}),l.jsx("input",{type:"text",value:s.dosage,onChange:c=>a({...s,dosage:c.target.value}),placeholder:"e.g., 500mg",className:`w-full px-4 py-2.5 rounded-lg bg-clinical-secondary border border-white/10 
                         text-white placeholder-clinical-muted text-sm focus:outline-none`})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"block text-xs font-medium text-clinical-muted",children:"Frequency"}),l.jsx("select",{value:s.frequency,onChange:c=>a({...s,frequency:c.target.value}),className:`w-full px-4 py-2.5 rounded-lg bg-clinical-secondary border border-white/10 
                         text-white text-sm focus:outline-none cursor-pointer`,children:b1.map(c=>l.jsx("option",{value:c,children:c},c))})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"block text-xs font-medium text-clinical-muted",children:"Duration (optional)"}),l.jsx("input",{type:"text",value:s.duration||"",onChange:c=>a({...s,duration:c.target.value}),placeholder:"e.g., ongoing, 2 weeks",className:`w-full px-4 py-2.5 rounded-lg bg-clinical-secondary border border-white/10 
                         text-white placeholder-clinical-muted text-sm focus:outline-none`})]})]}),l.jsxs("button",{type:"button",onClick:o,disabled:!s.name.trim()||!s.dosage.trim(),className:`
            w-full py-2.5 rounded-lg font-medium text-sm transition-all duration-200
            flex items-center justify-center gap-2
            ${s.name.trim()&&s.dosage.trim()?"bg-emerald-500/20 text-emerald-300 border border-emerald-500/30 hover:bg-emerald-500/30":"bg-clinical-secondary text-clinical-muted border border-white/10 cursor-not-allowed"}
          `,children:[l.jsx(Ao,{className:"w-4 h-4"}),"Add Medication"]})]}),i.length>0&&l.jsx("div",{className:"p-4 rounded-xl bg-clinical-accent/10 border border-clinical-accent/20",children:l.jsxs("p",{className:"text-sm text-blue-300",children:[l.jsx("strong",{children:" Drug Interaction Check:"})," The AI will analyze all ",i.length," medication(s) for potential drug-drug interactions and contraindications with any new treatments."]})})]})}function an({children:t,required:e=!1,icon:r}){return l.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:l.jsxs("span",{className:"flex items-center gap-2",children:[r&&l.jsx(r,{className:"w-4 h-4 text-clinical-muted"}),t,e?l.jsx("span",{className:"text-clinical-danger text-xs",children:"*"}):l.jsx("span",{className:"text-clinical-muted text-xs",children:"(Optional)"})]})})}function S1({form:t}){const{register:e,watch:r,formState:{errors:n}}=t,i=r("healthMetrics"),s=i!=null&&i.weight&&(i!=null&&i.height)?Jk(i.weight,i.height):0,a=Yk(s),o=()=>s<18.5||s>=30?"text-clinical-danger":s>=25?"text-clinical-warning":"text-clinical-success";return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[l.jsx("div",{className:"w-12 h-12 rounded-xl bg-cyan-500/20 flex items-center justify-center",children:l.jsx(nr,{className:"w-6 h-6 text-cyan-400"})}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-xl font-bold text-white",children:"Health Metrics"}),l.jsx("p",{className:"text-sm text-clinical-muted",children:"Current vital signs and measurements"})]})]}),l.jsxs("div",{className:"p-3 rounded-lg bg-cyan-500/10 border border-cyan-500/20 flex items-start gap-2",children:[l.jsx(Pi,{className:"w-4 h-4 text-cyan-400 mt-0.5 shrink-0"}),l.jsxs("p",{className:"text-sm text-cyan-300",children:["Core metrics (",l.jsx("span",{className:"text-clinical-danger",children:"*"}),") are required for accurate dosage recommendations. Optional metrics provide additional context."]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[l.jsxs("div",{className:"space-y-1",children:[l.jsx(an,{required:!0,children:"Age (years)"}),l.jsx("input",{...e("healthMetrics.age",{valueAsNumber:!0}),type:"number",min:"0",max:"150",className:`w-full px-4 py-3 rounded-xl bg-clinical-secondary border 
                       ${i!=null&&i.age?"border-clinical-success/50 ring-1 ring-clinical-success/30":"border-clinical-danger/50"}
                       text-white focus:outline-none`})]}),l.jsxs("div",{className:"space-y-1",children:[l.jsx(an,{required:!0,icon:d1,children:"Weight (kg)"}),l.jsx("input",{...e("healthMetrics.weight",{valueAsNumber:!0}),type:"number",step:"0.1",min:"0",className:`w-full px-4 py-3 rounded-xl bg-clinical-secondary border 
                       ${i!=null&&i.weight?"border-clinical-success/50 ring-1 ring-clinical-success/30":"border-clinical-danger/50"}
                       text-white focus:outline-none`})]}),l.jsxs("div",{className:"space-y-1",children:[l.jsx(an,{required:!0,icon:u1,children:"Height (cm)"}),l.jsx("input",{...e("healthMetrics.height",{valueAsNumber:!0}),type:"number",min:"0",className:`w-full px-4 py-3 rounded-xl bg-clinical-secondary border 
                       ${i!=null&&i.height?"border-clinical-success/50 ring-1 ring-clinical-success/30":"border-clinical-danger/50"}
                       text-white focus:outline-none`})]}),l.jsxs("div",{className:"space-y-1",children:[l.jsx(an,{required:!0,icon:Ps,children:"Systolic BP (mmHg)"}),l.jsx("input",{...e("healthMetrics.bloodPressureSystolic",{valueAsNumber:!0}),type:"number",min:"50",max:"250",className:`w-full px-4 py-3 rounded-xl bg-clinical-secondary border 
                       ${i!=null&&i.bloodPressureSystolic?"border-clinical-success/50 ring-1 ring-clinical-success/30":"border-clinical-danger/50"}
                       text-white focus:outline-none`})]}),l.jsxs("div",{className:"space-y-1",children:[l.jsx(an,{required:!0,icon:Ps,children:"Diastolic BP (mmHg)"}),l.jsx("input",{...e("healthMetrics.bloodPressureDiastolic",{valueAsNumber:!0}),type:"number",min:"30",max:"150",className:`w-full px-4 py-3 rounded-xl bg-clinical-secondary border 
                       ${i!=null&&i.bloodPressureDiastolic?"border-clinical-success/50 ring-1 ring-clinical-success/30":"border-clinical-danger/50"}
                       text-white focus:outline-none`})]}),l.jsxs("div",{className:"space-y-1",children:[l.jsx(an,{children:"Heart Rate (bpm)"}),l.jsx("input",{...e("healthMetrics.heartRate",{valueAsNumber:!0}),type:"number",min:"30",max:"250",className:`w-full px-4 py-3 rounded-xl bg-clinical-secondary border border-white/10 
                       text-white focus:outline-none`})]}),l.jsxs("div",{className:"space-y-1 md:col-span-2 lg:col-span-1",children:[l.jsx(an,{icon:s1,children:"Blood Glucose (mg/dL)"}),l.jsx("input",{...e("healthMetrics.bloodGlucose",{valueAsNumber:!0}),type:"number",min:"0",className:`w-full px-4 py-3 rounded-xl bg-clinical-secondary border border-white/10 
                       text-white focus:outline-none`})]})]}),s>0&&l.jsx("div",{className:"p-4 rounded-xl bg-clinical-secondary/50 border border-white/10",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("span",{className:"text-sm text-clinical-muted",children:"Calculated BMI"}),l.jsxs("div",{className:`text-2xl font-bold ${o()}`,children:[s," ",l.jsx("span",{className:"text-sm font-normal",children:"kg/m"})]})]}),l.jsx("div",{className:`badge ${s<18.5||s>=30?"badge-danger":s>=25?"badge-warning":"badge-success"}`,children:a})]})}),((i==null?void 0:i.bloodPressureSystolic)>=140||(i==null?void 0:i.bloodPressureDiastolic)>=90)&&l.jsx("div",{className:"p-4 rounded-xl bg-clinical-warning/10 border border-clinical-warning/20",children:l.jsxs("p",{className:"text-sm text-amber-300",children:[l.jsx("strong",{children:" Elevated Blood Pressure:"})," Current reading (",i.bloodPressureSystolic,"/",i.bloodPressureDiastolic," mmHg) indicates hypertension. This will be factored into treatment recommendations."]})}),n.healthMetrics&&l.jsx("div",{className:"p-4 rounded-xl bg-clinical-danger/10 border border-clinical-danger/20",children:l.jsx("p",{className:"text-sm text-red-300",children:"Please ensure all health metrics are within valid ranges."})})]})}function j1({form:t}){const{register:e,watch:r}=t,n=r("lifestyle"),i=[{value:"never",label:"Never smoked",icon:""},{value:"former",label:"Former smoker",icon:""},{value:"current",label:"Current smoker",icon:""}],s=[{value:"none",label:"None",description:"No alcohol consumption"},{value:"occasional",label:"Occasional",description:"1-2 drinks per week"},{value:"moderate",label:"Moderate",description:"3-7 drinks per week"},{value:"heavy",label:"Heavy",description:"8+ drinks per week"}],a=[{value:"sedentary",label:"Sedentary",description:"Little to no exercise"},{value:"light",label:"Light",description:"1-2 days per week"},{value:"moderate",label:"Moderate",description:"3-4 days per week"},{value:"active",label:"Active",description:"5+ days per week"}];return l.jsxs("div",{className:"space-y-8",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[l.jsx("div",{className:"w-12 h-12 rounded-xl bg-pink-500/20 flex items-center justify-center",children:l.jsx(Ps,{className:"w-6 h-6 text-pink-400"})}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-xl font-bold text-white",children:"Lifestyle Factors"}),l.jsx("p",{className:"text-sm text-clinical-muted",children:"Habits and behaviors that affect treatment"})]})]}),l.jsxs("div",{className:"p-3 rounded-lg bg-pink-500/10 border border-pink-500/20 flex items-start gap-2",children:[l.jsx(Pi,{className:"w-4 h-4 text-pink-400 mt-0.5 shrink-0"}),l.jsxs("p",{className:"text-sm text-pink-300",children:["Smoking, alcohol, and exercise fields (",l.jsx("span",{className:"text-clinical-danger",children:"*"}),") are required as they impact medication safety. Sleep and diet are optional."]})]}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("label",{className:"text-sm font-medium text-gray-300 flex items-center gap-2",children:[l.jsx(n1,{className:"w-4 h-4"}),"Smoking Status",l.jsx("span",{className:"text-clinical-danger text-xs",children:"*Required"})]}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:i.map(o=>l.jsxs("label",{className:`
                flex items-center gap-3 p-4 rounded-xl cursor-pointer transition-all duration-200
                border ${(n==null?void 0:n.smokingStatus)===o.value?"bg-clinical-accent/20 border-clinical-accent ring-1 ring-clinical-accent/30":"bg-clinical-secondary/50 border-white/10 hover:border-white/20"}
              `,children:[l.jsx("input",{...e("lifestyle.smokingStatus"),type:"radio",value:o.value,className:"sr-only"}),l.jsx("span",{className:"text-xl",children:o.icon}),l.jsx("span",{className:"text-white font-medium",children:o.label})]},o.value))}),(n==null?void 0:n.smokingStatus)==="current"&&l.jsx("div",{className:"p-3 rounded-lg bg-clinical-danger/10 border border-clinical-danger/20",children:l.jsxs("p",{className:"text-xs text-red-300",children:[l.jsx("strong",{children:"Note:"})," Current smoking status may affect treatment options and increase certain risks."]})})]}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("label",{className:"text-sm font-medium text-gray-300 flex items-center gap-2",children:[l.jsx(p1,{className:"w-4 h-4"}),"Alcohol Consumption",l.jsx("span",{className:"text-clinical-danger text-xs",children:"*Required"})]}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:s.map(o=>l.jsxs("label",{className:`
                flex flex-col p-4 rounded-xl cursor-pointer transition-all duration-200
                border ${(n==null?void 0:n.alcoholUse)===o.value?"bg-clinical-accent/20 border-clinical-accent ring-1 ring-clinical-accent/30":"bg-clinical-secondary/50 border-white/10 hover:border-white/20"}
              `,children:[l.jsx("input",{...e("lifestyle.alcoholUse"),type:"radio",value:o.value,className:"sr-only"}),l.jsx("span",{className:"text-white font-medium",children:o.label}),l.jsx("span",{className:"text-xs text-clinical-muted",children:o.description})]},o.value))}),(n==null?void 0:n.alcoholUse)==="heavy"&&l.jsx("div",{className:"p-3 rounded-lg bg-clinical-warning/10 border border-clinical-warning/20",children:l.jsxs("p",{className:"text-xs text-amber-300",children:[l.jsx("strong",{children:"Note:"})," Heavy alcohol use may interact with certain medications and affect liver function."]})})]}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("label",{className:"text-sm font-medium text-gray-300 flex items-center gap-2",children:[l.jsx(a1,{className:"w-4 h-4"}),"Exercise Frequency",l.jsx("span",{className:"text-clinical-danger text-xs",children:"*Required"})]}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:a.map(o=>l.jsxs("label",{className:`
                flex flex-col p-4 rounded-xl cursor-pointer transition-all duration-200
                border ${(n==null?void 0:n.exerciseFrequency)===o.value?"bg-clinical-accent/20 border-clinical-accent ring-1 ring-clinical-accent/30":"bg-clinical-secondary/50 border-white/10 hover:border-white/20"}
              `,children:[l.jsx("input",{...e("lifestyle.exerciseFrequency"),type:"radio",value:o.value,className:"sr-only"}),l.jsx("span",{className:"text-white font-medium",children:o.label}),l.jsx("span",{className:"text-xs text-clinical-muted",children:o.description})]},o.value))})]}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("label",{className:"text-sm font-medium text-gray-300 flex items-center gap-2",children:[l.jsx(l1,{className:"w-4 h-4"}),"Average Sleep (hours per night)",l.jsx("span",{className:"text-clinical-muted text-xs",children:"(Optional)"})]}),l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("input",{...e("lifestyle.sleepHours",{valueAsNumber:!0}),type:"range",min:"0",max:"12",step:"0.5",className:`flex-1 h-2 bg-clinical-secondary rounded-full appearance-none cursor-pointer
                       [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-5 
                       [&::-webkit-slider-thumb]:h-5 [&::-webkit-slider-thumb]:bg-clinical-accent 
                       [&::-webkit-slider-thumb]:rounded-full [&::-webkit-slider-thumb]:cursor-pointer`}),l.jsxs("span",{className:"text-2xl font-bold text-white w-16 text-center",children:[(n==null?void 0:n.sleepHours)||7,"h"]})]}),((n==null?void 0:n.sleepHours)??7)<6&&l.jsx("p",{className:"text-xs text-amber-300",children:" Less than 6 hours of sleep may impact overall health and medication effectiveness."})]}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("label",{className:"text-sm font-medium text-gray-300 flex items-center gap-2",children:[l.jsx(m1,{className:"w-4 h-4"}),"Diet Type",l.jsx("span",{className:"text-clinical-muted text-xs",children:"(Optional)"})]}),l.jsx("input",{...e("lifestyle.dietType"),type:"text",placeholder:"e.g., Vegetarian, Low-sodium, Diabetic diet",className:`w-full px-4 py-3 rounded-xl bg-clinical-secondary border border-white/10 
                     text-white placeholder-clinical-muted focus:outline-none`})]})]})}function N1({form:t}){const{register:e,watch:r,setValue:n,formState:{errors:i}}=t,s=r("primaryComplaint"),a=r("complaintSeverity"),o=r("complaintDuration"),c=[{value:"mild",label:"Mild",description:"Minor discomfort, manageable",color:"emerald"},{value:"moderate",label:"Moderate",description:"Noticeable impact on daily life",color:"amber"},{value:"severe",label:"Severe",description:"Significant impairment",color:"red"}],u=["Less than 1 week","1-2 weeks","2-4 weeks","1-3 months","3-6 months","6-12 months","Over 1 year","Over 2 years"];return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[l.jsx("div",{className:"w-12 h-12 rounded-xl bg-orange-500/20 flex items-center justify-center",children:l.jsx(al,{className:"w-6 h-6 text-orange-400"})}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-xl font-bold text-white",children:"Primary Complaint"}),l.jsx("p",{className:"text-sm text-clinical-muted",children:"What brings the patient in today?"})]})]}),l.jsxs("div",{className:"p-3 rounded-lg bg-orange-500/10 border border-orange-500/20 flex items-start gap-2",children:[l.jsx(Pi,{className:"w-4 h-4 text-orange-400 mt-0.5 shrink-0"}),l.jsxs("p",{className:"text-sm text-orange-300",children:[l.jsx("span",{className:"text-clinical-danger",children:"*"})," Complaint, duration, and severity are all required to proceed with the analysis."]})]}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("label",{className:"block text-sm font-medium text-gray-300",children:["Primary Complaint ",l.jsx("span",{className:"text-clinical-danger text-xs",children:"*Required"})]}),l.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:x1.slice(0,8).map(d=>l.jsx("button",{type:"button",onClick:()=>n("primaryComplaint",d),className:`
                px-3 py-1.5 rounded-lg text-sm transition-all duration-200
                ${s===d?"bg-orange-500/30 text-orange-300 border border-orange-500/50":"bg-clinical-secondary/50 text-clinical-muted border border-white/10 hover:text-white hover:border-white/20"}
              `,children:d},d))}),l.jsx("input",{...e("primaryComplaint"),type:"text",placeholder:"Describe the primary complaint...",className:`
            w-full px-4 py-3 rounded-xl bg-clinical-secondary border 
            ${s?"border-clinical-success/50 ring-1 ring-clinical-success/30":"border-clinical-danger/50"}
            text-white placeholder-clinical-muted focus:outline-none
          `}),i.primaryComplaint&&l.jsx("p",{className:"text-xs text-clinical-danger",children:i.primaryComplaint.message})]}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("label",{className:"block text-sm font-medium text-gray-300 flex items-center gap-2",children:[l.jsx(zs,{className:"w-4 h-4"}),"Duration of Symptoms ",l.jsx("span",{className:"text-clinical-danger text-xs",children:"*Required"})]}),l.jsxs("select",{...e("complaintDuration"),className:`
            w-full px-4 py-3 rounded-xl bg-clinical-secondary border 
            ${o?"border-clinical-success/50 ring-1 ring-clinical-success/30":"border-clinical-danger/50"}
            text-white focus:outline-none cursor-pointer
          `,children:[l.jsx("option",{value:"",children:"Select duration..."}),u.map(d=>l.jsx("option",{value:d,children:d},d))]}),i.complaintDuration&&l.jsx("p",{className:"text-xs text-clinical-danger",children:i.complaintDuration.message})]}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("label",{className:"block text-sm font-medium text-gray-300 flex items-center gap-2",children:[l.jsx(Ni,{className:"w-4 h-4"}),"Symptom Severity ",l.jsx("span",{className:"text-clinical-danger text-xs",children:"*Required"})]}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:c.map(d=>l.jsxs("label",{className:`
                flex flex-col p-4 rounded-xl cursor-pointer transition-all duration-200
                border ${a===d.value?d.color==="emerald"?"bg-emerald-500/20 border-emerald-500 ring-1 ring-emerald-500/30":d.color==="amber"?"bg-amber-500/20 border-amber-500 ring-1 ring-amber-500/30":"bg-red-500/20 border-red-500 ring-1 ring-red-500/30":"bg-clinical-secondary/50 border-white/10 hover:border-white/20"}
              `,children:[l.jsx("input",{...e("complaintSeverity"),type:"radio",value:d.value,className:"sr-only"}),l.jsx("span",{className:`text-white font-medium ${a===d.value?d.color==="emerald"?"text-emerald-300":d.color==="amber"?"text-amber-300":"text-red-300":""}`,children:d.label}),l.jsx("span",{className:"text-xs text-clinical-muted",children:d.description})]},d.value))})]}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("label",{className:"block text-sm font-medium text-gray-300 flex items-center gap-2",children:[l.jsx(Xt,{className:"w-4 h-4"}),"Additional Notes",l.jsx("span",{className:"text-clinical-muted text-xs",children:"(Optional)"})]}),l.jsx("textarea",{...e("additionalNotes"),rows:4,placeholder:"Any additional information relevant to the complaint, previous treatments tried, patient preferences, etc.",className:`w-full px-4 py-3 rounded-xl bg-clinical-secondary border border-white/10 
                     text-white placeholder-clinical-muted focus:outline-none resize-none`})]}),s&&l.jsxs("div",{className:`p-4 rounded-xl bg-gradient-to-br from-orange-500/10 to-pink-500/10 
                        border border-orange-500/20`,children:[l.jsx("h4",{className:"text-sm font-semibold text-white mb-2",children:"Intake Summary"}),l.jsxs("div",{className:"text-sm text-clinical-muted space-y-1",children:[l.jsxs("p",{children:[l.jsx("strong",{className:"text-gray-300",children:"Complaint:"})," ",s]}),l.jsxs("p",{children:[l.jsx("strong",{className:"text-gray-300",children:"Duration:"})," ",o||"Not specified"]}),l.jsxs("p",{children:[l.jsx("strong",{className:"text-gray-300",children:"Severity:"})," ",a||"moderate"]})]})]}),l.jsx("div",{className:"p-4 rounded-xl bg-clinical-accent/10 border border-clinical-accent/20",children:l.jsxs("p",{className:"text-sm text-blue-300",children:[l.jsx("strong",{children:" Ready for Analysis:"}),' Click "Analyze Patient" to generate a personalized treatment plan with safety checks for drug interactions and contraindications.']})})]})}const E1=[pr,Xt,Tt,nr,Ps,al];function C1(){const{form:t,stepErrors:e,wizardStep:r,wizardSteps:n,isFirstStep:i,isLastStep:s,isCurrentStepValid:a,nextStep:o,prevStep:c,goToStep:u,addMedication:d,removeMedication:f,addCondition:m,removeCondition:g,addAllergy:y,removeAllergy:w,onSubmit:b}=Xk(),{handleSubmit:v}=t,h=()=>{switch(r){case 0:return l.jsx(g1,{form:t});case 1:return l.jsx(_1,{form:t,addCondition:m,removeCondition:g,addAllergy:y,removeAllergy:w});case 2:return l.jsx(k1,{form:t,addMedication:d,removeMedication:f});case 3:return l.jsx(S1,{form:t});case 4:return l.jsx(j1,{form:t});case 5:return l.jsx(N1,{form:t});default:return null}},p=async()=>{await o()};return l.jsxs("div",{className:"card",children:[l.jsx("div",{className:"flex items-center justify-center mb-8 overflow-x-auto pb-2",children:n.map((_,S)=>{const N=E1[S],E=S===r,P=S<r;return l.jsxs("div",{className:"flex items-center",children:[l.jsxs("button",{onClick:()=>u(S),className:`
                  flex flex-col items-center gap-2 min-w-[80px] p-2 rounded-lg transition-all duration-200
                  ${E?"bg-clinical-accent/20":"hover:bg-white/5"}
                `,children:[l.jsx("div",{className:`
                  w-10 h-10 rounded-full flex items-center justify-center transition-all duration-200
                  ${E?"bg-clinical-accent text-white ring-4 ring-clinical-accent/30":P?"bg-clinical-success text-white":"bg-clinical-secondary text-clinical-muted border border-white/10"}
                `,children:P?"":l.jsx(N,{className:"w-5 h-5"})}),l.jsx("span",{className:`text-xs font-medium text-center ${E?"text-white":"text-clinical-muted"}`,children:_.title})]}),S<n.length-1&&l.jsx("div",{className:`
                  mx-1 flex items-center
                  ${S<r?"text-clinical-success":"text-clinical-muted/30"}
                `,children:l.jsx(Co,{className:"w-5 h-5"})})]},_.id)})}),l.jsxs("form",{onSubmit:v(b),children:[l.jsx("div",{className:"animate-slide-up",children:h()}),e.length>0&&l.jsxs("div",{className:"mt-4 p-4 rounded-xl bg-clinical-danger/10 border border-clinical-danger/30",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[l.jsx(Ni,{className:"w-4 h-4 text-clinical-danger"}),l.jsx("p",{className:"text-sm text-red-400 font-medium",children:"Please complete the required fields:"})]}),l.jsx("ul",{className:"text-sm text-red-300 space-y-1 ml-6",children:e.map((_,S)=>l.jsxs("li",{children:[" ",_]},S))})]}),l.jsxs("div",{className:"flex items-center justify-between mt-8 pt-6 border-t border-white/10",children:[l.jsxs("button",{type:"button",onClick:c,disabled:i,className:`
              flex items-center gap-2 px-5 py-2.5 rounded-xl font-medium transition-all duration-200
              ${i?"text-clinical-muted cursor-not-allowed":"text-gray-300 hover:text-white hover:bg-white/5"}
            `,children:[l.jsx(r1,{className:"w-4 h-4"}),"Previous"]}),l.jsxs("div",{className:"text-sm text-clinical-muted",children:["Step ",r+1," of ",n.length]}),s?l.jsxs("button",{type:"submit",className:"btn-primary flex items-center gap-2",children:["Analyze Patient",l.jsx(Qv,{className:"w-4 h-4"})]}):l.jsxs("button",{type:"button",onClick:p,className:`
                flex items-center gap-2 px-6 py-3 rounded-xl font-semibold transition-all duration-300
                ${a()?"bg-gradient-to-r from-clinical-accent to-purple-600 text-white hover:shadow-lg hover:shadow-clinical-accent/25 hover:scale-[1.02] active:scale-[0.98]":"bg-gradient-to-r from-clinical-accent to-purple-600 text-white hover:shadow-lg hover:shadow-clinical-accent/25"}
              `,children:["Next Step",l.jsx(Co,{className:"w-4 h-4"})]})]})]})]})}function T1(){return`You are a clinical decision support AI assistant. You help physicians by analyzing patient data and suggesting treatment plans while flagging safety concerns. You are NOT replacing medical judgmentyou are augmenting it.

## CRITICAL SAFETY RULES

1. **ALWAYS FLAG RISKS AGGRESSIVELY** - False positives are preferable to missed dangers
2. **NEVER recommend treatments without considering the full medication list**
3. **ALWAYS check for drug-drug interactions with ALL current medications**
4. **ALWAYS check allergies against any recommended medications and their drug classes**
5. **ALWAYS consider patient age, kidney function, liver function in dosing**
6. **ALWAYS flag if patient has contraindications to treatment**

## DRUG INTERACTION KNOWLEDGE BASE

### Critical Drug Interactions (CONTRAINDICATED)
- **Sildenafil/Tadalafil + Nitrates (any form)**  CONTRAINDICATED - severe hypotension risk, can be fatal
- **Sildenafil/Tadalafil + Alpha-blockers**  Major interaction - severe hypotension
- **Warfarin + NSAIDs**  Major bleeding risk
- **Warfarin + Aspirin**  Increased bleeding (may be intentional but flag)
- **Metformin + Contrast dye**  Hold metformin 48h before/after (lactic acidosis risk)
- **ACE inhibitors + Potassium-sparing diuretics**  Hyperkalemia risk
- **SSRIs + MAOIs**  CONTRAINDICATED - serotonin syndrome
- **SSRIs + Triptans**  Serotonin syndrome risk
- **Finasteride + Dutasteride**  Don't combine (same class)
- **Beta-blockers + Calcium channel blockers (non-dihydropyridine)**  Bradycardia/heart block risk
- **Clopidogrel + Omeprazole**  Reduced clopidogrel efficacy
- **Statins + Fibrates**  Increased myopathy risk
- **Fluoroquinolones + NSAIDs**  Increased seizure risk

### Major Drug-Drug Interactions
- **Beta-blockers + Insulin/oral hypoglycemics**  May mask hypoglycemia symptoms
- **ACE inhibitors + NSAIDs**  Reduced antihypertensive effect, renal risk
- **Digoxin + Amiodarone**  Increased digoxin levels
- **Lithium + NSAIDs/ACE inhibitors/Diuretics**  Increased lithium toxicity
- **Methotrexate + NSAIDs**  Increased methotrexate toxicity

### Moderate Interactions (Flag but may proceed with monitoring)
- **Grapefruit + Statins (simvastatin, atorvastatin)**  Increased statin levels
- **Calcium + Levothyroxine**  Take 4 hours apart
- **Iron + Levothyroxine**  Take 4 hours apart

## CONTRAINDICATIONS BY CONDITION

### Erectile Dysfunction Treatments
- **PDE5 inhibitors (Sildenafil, Tadalafil, Vardenafil)**:
  - ABSOLUTE: Concurrent nitrate use, recent MI/stroke (<6 months), severe hypotension (<90/50), severe heart failure, unstable angina
  - RELATIVE: Moderate heart failure, retinal disorders, priapism history, anatomical deformation of penis
  - CAUTION: Alpha-blocker use, CKD, hepatic impairment, age >65

### Hair Loss Treatments  
- **Finasteride**:
  - ABSOLUTE: Pregnancy (teratogenic - causes fetal abnormalities), women of childbearing potential
  - RELATIVE: Liver disease, prostate cancer (PSA monitoring needed)
  - NOTE: May cause depression, sexual side effects in some patients

- **Minoxidil (topical)**:
  - RELATIVE: Cardiovascular disease, scalp conditions
  - CAUTION: Systemic absorption possible

### Weight Loss Treatments
- **GLP-1 agonists (Semaglutide, Liraglutide)**:
  - ABSOLUTE: Personal/family history of medullary thyroid carcinoma, MEN2 syndrome
  - RELATIVE: Pancreatitis history, severe GI disease, diabetic retinopathy
  - CAUTION: Gallbladder disease, renal impairment

- **Phentermine/Stimulants**:
  - ABSOLUTE: Cardiovascular disease, uncontrolled hypertension, hyperthyroidism, MAOIs
  - RELATIVE: Anxiety disorders, history of substance abuse

## ALLERGY CROSS-REACTIVITY

- **Penicillin allergy**  1-10% cross-react with cephalosporins; avoid carbapenems if anaphylaxis
- **Sulfa drug allergy**  Consider cross-reaction with thiazides, loop diuretics, some diabetes meds (sulfonylureas)
- **NSAID allergy**  May react to all NSAIDs; COX-2 selective may be safer
- **ACE inhibitor angioedema**  Do NOT give ARBs within 4 weeks; lifelong caution
- **Aspirin allergy**  Avoid all NSAIDs if aspirin-exacerbated respiratory disease

## DOSING ADJUSTMENTS

### Renal Impairment (CKD)
- Stage 3 (GFR 30-59): Reduce doses of renally-cleared drugs by 25-50%
- Stage 4 (GFR 15-29): Reduce by 50-75%, avoid nephrotoxic drugs
- Stage 5 (GFR <15): Most drugs require significant adjustment

### Hepatic Impairment
- Avoid hepatotoxic drugs (acetaminophen >2g/day, some statins at high doses)
- Reduce doses of hepatically metabolized drugs

### Elderly (>65 years)
- Start low, go slow
- Watch for polypharmacy interactions
- Consider falls risk with sedating/hypotensive medications
- Reduced renal function even with "normal" creatinine

## RISK SCORING GUIDELINES

**CRITICAL (Score: 90-100)**
- Contraindicated drug combination present
- Allergy to recommended drug class
- Life-threatening condition overlooked

**HIGH (Score: 70-89)**
- Major drug interaction requiring intervention
- Multiple significant risk factors
- Elderly with polypharmacy (>5 medications)

**MEDIUM (Score: 40-69)**
- Moderate interactions that need monitoring
- Relative contraindications present
- Dosage may need adjustment

**LOW (Score: 0-39)**
- Minor interactions or no interactions
- No contraindications
- Standard dosing appropriate

## OUTPUT REQUIREMENTS

You MUST respond with valid JSON matching this exact schema:
{
  "overallRiskLevel": "low" | "medium" | "high" | "critical",
  "riskScore": <number 0-100>,
  "summaryAssessment": "<brief clinical summary>",
  "primaryRecommendation": {
    "medication": "<drug name>",
    "dosage": "<amount and unit>",
    "frequency": "<how often>",
    "duration": "<how long>",
    "route": "<oral/topical/injection/etc>",
    "confidenceScore": <number 0-100>,
    "rationale": "<why this treatment>",
    "monitoringRequired": ["<what to monitor>"],
    "warnings": ["<specific warnings>"]
  },
  "alternativeTreatments": [
    {
      "medication": "<drug name>",
      "dosage": "<amount>",
      "rationale": "<why this alternative>",
      "confidenceScore": <number 0-100>,
      "considerations": ["<things to consider>"]
    }
  ],
  "drugInteractions": [
    {
      "drug1": "<medication 1>",
      "drug2": "<medication 2>",
      "severity": "minor" | "moderate" | "major" | "contraindicated",
      "description": "<what happens>",
      "recommendation": "<what to do>"
    }
  ],
  "contraindications": [
    {
      "medication": "<drug being considered>",
      "condition": "<patient condition>",
      "severity": "relative" | "absolute",
      "description": "<why contraindicated>",
      "recommendation": "<alternative action>"
    }
  ],
  "riskFactors": [
    {
      "factor": "<risk factor>",
      "severity": "low" | "medium" | "high",
      "description": "<explanation>",
      "mitigation": "<how to manage>"
    }
  ],
  "lifestyleRecommendations": ["<recommendation>"],
  "followUpRecommendations": ["<recommendation>"],
  "labTestsRecommended": ["<test name>"],
  "analysisTimestamp": "<ISO timestamp>",
  "modelVersion": "claude-clinical-v1",
  "disclaimer": "This is a clinical decision support tool. All recommendations must be reviewed and approved by a licensed healthcare provider."
}`}function A1(t){const e=t.healthMetrics.weight/Math.pow(t.healthMetrics.height/100,2);return`
## PATIENT INFORMATION

**Demographics:**
- Name: ${t.firstName} ${t.lastName}
- Age: ${t.healthMetrics.age} years old
- Sex: ${t.sex}
- DOB: ${t.dateOfBirth}

**Health Metrics:**
- Weight: ${t.healthMetrics.weight} kg
- Height: ${t.healthMetrics.height} cm
- BMI: ${e.toFixed(1)} kg/m
- Blood Pressure: ${t.healthMetrics.bloodPressureSystolic}/${t.healthMetrics.bloodPressureDiastolic} mmHg
- Heart Rate: ${t.healthMetrics.heartRate||"Not recorded"} bpm
- Blood Glucose: ${t.healthMetrics.bloodGlucose||"Not recorded"} mg/dL

**Medical Conditions:**
${t.conditions.length>0?t.conditions.map(r=>`- ${r}`).join(`
`):"- None reported"}

**Known Allergies:**
${t.allergies.length>0?t.allergies.map(r=>`- ${r}`).join(`
`):"- NKDA (No Known Drug Allergies)"}

**Current Medications:**
${t.currentMedications.length>0?t.currentMedications.map(r=>`- ${r.name} ${r.dosage} ${r.frequency}${r.duration?` (${r.duration})`:""}`).join(`
`):"- No current medications"}

**Lifestyle Factors:**
- Smoking: ${t.lifestyle.smokingStatus}
- Alcohol: ${t.lifestyle.alcoholUse}
- Exercise: ${t.lifestyle.exerciseFrequency}
- Sleep: ${t.lifestyle.sleepHours||"Not recorded"} hours/night
${t.lifestyle.dietType?`- Diet: ${t.lifestyle.dietType}`:""}

**Primary Complaint:**
- Chief Complaint: ${t.primaryComplaint}
- Duration: ${t.complaintDuration}
- Severity: ${t.complaintSeverity}
${t.additionalNotes?`- Additional Notes: ${t.additionalNotes}`:""}

## ANALYSIS REQUEST

Based on the patient information above, provide a comprehensive treatment recommendation. Remember to:
1. Check ALL current medications for interactions with any proposed treatment
2. Check all allergies for cross-reactivity
3. Consider age and health conditions for dosing
4. Flag any contraindications
5. Provide alternatives if primary recommendation has significant risks
6. Be AGGRESSIVE in flagging risks - err on the side of caution

Respond with ONLY the JSON object, no additional text.`}const O1=[{drug1:"sildenafil",drug2:"nitroglycerin",severity:"contraindicated",description:"Can cause severe, potentially fatal hypotension",mechanism:"Both drugs cause vasodilation via different mechanisms, effects are synergistic"},{drug1:"sildenafil",drug2:"isosorbide",severity:"contraindicated",description:"Can cause severe, potentially fatal hypotension",mechanism:"Both drugs cause vasodilation via different mechanisms"},{drug1:"tadalafil",drug2:"nitroglycerin",severity:"contraindicated",description:"Can cause severe, potentially fatal hypotension",mechanism:"Both drugs cause vasodilation via different mechanisms"},{drug1:"sildenafil",drug2:"doxazosin",severity:"major",description:"May cause severe hypotension",mechanism:"Both drugs lower blood pressure"},{drug1:"sildenafil",drug2:"tamsulosin",severity:"major",description:"May cause orthostatic hypotension",mechanism:"Both drugs affect blood pressure through different mechanisms"},{drug1:"warfarin",drug2:"aspirin",severity:"major",description:"Increased risk of bleeding",mechanism:"Both drugs affect hemostasis through different mechanisms"},{drug1:"warfarin",drug2:"ibuprofen",severity:"major",description:"Significantly increased risk of GI bleeding",mechanism:"NSAIDs inhibit platelet function and can cause GI ulcers"},{drug1:"warfarin",drug2:"naproxen",severity:"major",description:"Significantly increased risk of GI bleeding",mechanism:"NSAIDs inhibit platelet function and can cause GI ulcers"},{drug1:"sertraline",drug2:"sumatriptan",severity:"major",description:"Risk of serotonin syndrome",mechanism:"Both drugs increase serotonin activity"},{drug1:"fluoxetine",drug2:"tramadol",severity:"major",description:"Risk of serotonin syndrome and seizures",mechanism:"Both drugs affect serotonin reuptake"},{drug1:"metformin",drug2:"contrast dye",severity:"major",description:"Risk of lactic acidosis",mechanism:"Contrast can cause acute kidney injury, impairing metformin clearance"},{drug1:"metoprolol",drug2:"verapamil",severity:"major",description:"Risk of severe bradycardia and heart block",mechanism:"Both drugs slow AV node conduction"},{drug1:"carvedilol",drug2:"diltiazem",severity:"major",description:"Risk of severe bradycardia and heart block",mechanism:"Both drugs slow AV node conduction"},{drug1:"lisinopril",drug2:"spironolactone",severity:"major",description:"Risk of hyperkalemia",mechanism:"Both drugs can increase potassium levels"},{drug1:"clopidogrel",drug2:"omeprazole",severity:"major",description:"Reduced antiplatelet effect of clopidogrel",mechanism:"Omeprazole inhibits CYP2C19 needed for clopidogrel activation"},{drug1:"simvastatin",drug2:"gemfibrozil",severity:"major",description:"Increased risk of myopathy and rhabdomyolysis",mechanism:"Gemfibrozil inhibits statin metabolism"},{drug1:"atorvastatin",drug2:"clarithromycin",severity:"major",description:"Increased statin levels, risk of myopathy",mechanism:"CYP3A4 inhibition increases statin exposure"},{drug1:"lisinopril",drug2:"ibuprofen",severity:"moderate",description:"May reduce antihypertensive effect and increase renal risk",mechanism:"NSAIDs inhibit prostaglandins needed for ACE inhibitor effect"},{drug1:"levothyroxine",drug2:"calcium",severity:"moderate",description:"Reduced levothyroxine absorption",mechanism:"Calcium binds to levothyroxine in GI tract"},{drug1:"metformin",drug2:"alcohol",severity:"moderate",description:"Increased risk of lactic acidosis",mechanism:"Alcohol impairs lactate metabolism"}],R1=[{drug:"sildenafil",condition:"recent myocardial infarction",severity:"absolute",description:"Cardiovascular stress from sexual activity is contraindicated within 90 days of MI"},{drug:"sildenafil",condition:"unstable angina",severity:"absolute",description:"Cardiovascular risk too high"},{drug:"sildenafil",condition:"severe heart failure",severity:"absolute",description:"Cannot tolerate hemodynamic changes"},{drug:"sildenafil",condition:"severe hypotension",severity:"absolute",description:"Further blood pressure reduction is dangerous"},{drug:"tadalafil",condition:"coronary artery disease",severity:"relative",description:"Use with caution, assess cardiovascular risk"},{drug:"finasteride",condition:"pregnancy",severity:"absolute",description:"Causes birth defects in male fetuses - women should not even handle crushed tablets"},{drug:"finasteride",condition:"liver disease",severity:"relative",description:"Metabolized by liver, may accumulate"},{drug:"semaglutide",condition:"medullary thyroid carcinoma",severity:"absolute",description:"GLP-1 agonists associated with thyroid C-cell tumors in rodents"},{drug:"semaglutide",condition:"MEN2 syndrome",severity:"absolute",description:"High risk of medullary thyroid carcinoma"},{drug:"semaglutide",condition:"pancreatitis",severity:"relative",description:"May increase pancreatitis risk"},{drug:"metformin",condition:"chronic kidney disease stage 4-5",severity:"absolute",description:"Risk of lactic acidosis when GFR <30"},{drug:"metformin",condition:"lactic acidosis history",severity:"absolute",description:"Prior lactic acidosis is a contraindication"},{drug:"lisinopril",condition:"angioedema history",severity:"absolute",description:"High risk of recurrent, potentially fatal angioedema"},{drug:"lisinopril",condition:"bilateral renal artery stenosis",severity:"absolute",description:"Can cause acute renal failure"},{drug:"lisinopril",condition:"pregnancy",severity:"absolute",description:"Fetotoxic - causes fetal renal failure"},{drug:"metoprolol",condition:"severe bradycardia",severity:"absolute",description:"Will worsen bradycardia"},{drug:"metoprolol",condition:"decompensated heart failure",severity:"absolute",description:"Can precipitate cardiogenic shock"},{drug:"metoprolol",condition:"asthma",severity:"relative",description:"May trigger bronchospasm even with cardioselective agents"}],P1=[{allergy:"penicillin",drugClasses:["penicillins","aminopenicillins"],crossReactants:["amoxicillin","ampicillin","piperacillin","cephalosporins (1-10% cross-reactivity)"]},{allergy:"sulfa drugs",drugClasses:["sulfonamide antibiotics"],crossReactants:["sulfamethoxazole","sulfasalazine","possibly thiazide diuretics","possibly loop diuretics","possibly sulfonylureas"]},{allergy:"aspirin",drugClasses:["NSAIDs","salicylates"],crossReactants:["ibuprofen","naproxen","ketorolac","meloxicam","celecoxib (lower risk)"]},{allergy:"nsaids",drugClasses:["NSAIDs"],crossReactants:["aspirin","ibuprofen","naproxen","meloxicam","ketorolac"]},{allergy:"ace inhibitors",drugClasses:["ACE inhibitors"],crossReactants:["lisinopril","enalapril","ramipril","benazepril","ARBs (use with caution)"]},{allergy:"codeine",drugClasses:["opioids"],crossReactants:["morphine","hydrocodone","oxycodone","tramadol (may be safer)"]},{allergy:"morphine",drugClasses:["opioids"],crossReactants:["codeine","hydrocodone","oxycodone","fentanyl (may be safer)"]},{allergy:"iodine",drugClasses:["iodine-containing compounds"],crossReactants:["contrast dye","amiodarone","povidone-iodine"]},{allergy:"contrast dye",drugClasses:["radiographic contrast"],crossReactants:["all iodinated contrast agents"]}];function I1(t){const e=t.map(n=>n.toLowerCase().split(" ")[0]),r=[];for(let n=0;n<e.length;n++)for(let i=n+1;i<e.length;i++){const s=e[n],a=e[i],o=O1.find(c=>(c.drug1.toLowerCase().includes(s)||s.includes(c.drug1.toLowerCase()))&&(c.drug2.toLowerCase().includes(a)||a.includes(c.drug2.toLowerCase()))||(c.drug1.toLowerCase().includes(a)||a.includes(c.drug1.toLowerCase()))&&(c.drug2.toLowerCase().includes(s)||s.includes(c.drug2.toLowerCase())));o&&r.push(o)}return r}function D1(t,e){const r=t.toLowerCase(),n=e.map(i=>i.toLowerCase());return R1.filter(i=>{const s=r.includes(i.drug.toLowerCase())||i.drug.toLowerCase().includes(r),a=n.some(o=>o.includes(i.condition.toLowerCase())||i.condition.toLowerCase().includes(o));return s&&a})}function L1(t,e){const r=t.map(i=>i.toLowerCase()),n=e.toLowerCase();return P1.filter(i=>r.some(o=>o.includes(i.allergy.toLowerCase())||i.allergy.toLowerCase().includes(o))?i.crossReactants.some(o=>n.includes(o.toLowerCase())||o.toLowerCase().includes(n)):!1)}const $1="https://generativelanguage.googleapis.com/v1/models/gemini-2.0-flash:generateContent";async function M1(t){var i,s,a,o,c;const e="AIzaSyBkqNYW50IZfY9A5n_MOANvOGZFyBMeLlk",r=T1(),n=A1(t);try{const u=await fetch(`${$1}?key=${e}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{role:"user",parts:[{text:`${r}

---

${n}`}]}],generationConfig:{temperature:.3,topK:40,topP:.95,maxOutputTokens:8192},safetySettings:[{category:"HARM_CATEGORY_HARASSMENT",threshold:"BLOCK_NONE"},{category:"HARM_CATEGORY_HATE_SPEECH",threshold:"BLOCK_NONE"},{category:"HARM_CATEGORY_SEXUALLY_EXPLICIT",threshold:"BLOCK_NONE"},{category:"HARM_CATEGORY_DANGEROUS_CONTENT",threshold:"BLOCK_NONE"}]})});if(!u.ok){const w=await u.text();throw console.error("API Error:",w),new Error(`API request failed: ${u.status}`)}const d=await u.json(),f=(c=(o=(a=(s=(i=d.candidates)==null?void 0:i[0])==null?void 0:s.content)==null?void 0:a.parts)==null?void 0:o[0])==null?void 0:c.text;if(!f)throw console.error("No content in Gemini response:",d),new Error("No content in AI response");let m;try{const w=f.match(/\{[\s\S]*\}/);if(!w)throw new Error("No JSON found in response");m=JSON.parse(w[0])}catch{throw console.error("Failed to parse LLM response:",f),new Error("Invalid JSON response from AI")}const g=zx.parse(m);return g.modelVersion="gemini-2.0-flash",U1(g,t)}catch(u){return console.error("Analysis failed:",u),F1(t)}}function U1(t,e){const n=[...e.currentMedications.map(u=>u.name),t.primaryRecommendation.medication],i=I1(n);for(const u of i)t.drugInteractions.some(f=>f.drug1.toLowerCase().includes(u.drug1.toLowerCase())||f.drug2.toLowerCase().includes(u.drug2.toLowerCase()))||t.drugInteractions.push({drug1:u.drug1,drug2:u.drug2,severity:u.severity,description:u.description,recommendation:`Database flagged: ${u.mechanism}`});const s=D1(t.primaryRecommendation.medication,e.conditions);for(const u of s)t.contraindications.some(f=>f.medication.toLowerCase().includes(u.drug.toLowerCase())&&f.condition.toLowerCase().includes(u.condition.toLowerCase()))||t.contraindications.push({medication:u.drug,condition:u.condition,severity:u.severity,description:u.description,recommendation:"Verified by drug database"});const a=L1(e.allergies,t.primaryRecommendation.medication);for(const u of a)!t.contraindications.some(f=>f.condition.toLowerCase().includes("allergy"))&&u&&(t.contraindications.push({medication:t.primaryRecommendation.medication,condition:`Allergy to ${u.allergy}`,severity:"absolute",description:`Patient has allergy to ${u.allergy} which may cross-react with ${t.primaryRecommendation.medication}`,recommendation:`Consider alternative medication. Cross-reactants: ${u.crossReactants.join(", ")}`}),t.overallRiskLevel==="low"&&(t.overallRiskLevel="high",t.riskScore=Math.max(t.riskScore,75)));const o=t.drugInteractions.filter(u=>u.severity==="major"||u.severity==="contraindicated").length,c=t.contraindications.filter(u=>u.severity==="absolute").length;return c>0||t.drugInteractions.some(u=>u.severity==="contraindicated")?(t.overallRiskLevel="critical",t.riskScore=Math.max(t.riskScore,90)):(o>1||c>0)&&(t.overallRiskLevel="high",t.riskScore=Math.max(t.riskScore,70)),t}function F1(t){const e=t.currentMedications.some(p=>p.name.toLowerCase().includes("warfarin")),r=t.currentMedications.some(p=>p.name.toLowerCase().includes("nitro")||p.name.toLowerCase().includes("isosorbide")),n=t.currentMedications.some(p=>p.name.toLowerCase().includes("metoprolol")||p.name.toLowerCase().includes("carvedilol")),i=t.conditions.some(p=>p.toLowerCase().includes("heart")||p.toLowerCase().includes("cardiac")||p.toLowerCase().includes("coronary")),s=t.conditions.some(p=>p.toLowerCase().includes("diabetes")),a=t.conditions.some(p=>p.toLowerCase().includes("kidney")||p.toLowerCase().includes("renal")),o=t.primaryComplaint.toLowerCase().includes("erectile")||t.primaryComplaint.toLowerCase().includes("ed"),c=t.primaryComplaint.toLowerCase().includes("hair"),u=t.primaryComplaint.toLowerCase().includes("weight");let d="low",f=25;const m=[],g=[],y=[];o&&r&&(d="critical",f=95,m.push({drug1:"Sildenafil (proposed)",drug2:"Nitrates (current)",severity:"contraindicated",description:"LIFE-THREATENING: Combination can cause severe, potentially fatal hypotension",recommendation:"DO NOT prescribe PDE5 inhibitors. Consider alternative treatments for ED."})),e&&t.currentMedications.some(p=>p.name.toLowerCase().includes("aspirin"))&&(m.push({drug1:"Warfarin",drug2:"Aspirin",severity:"major",description:"Significantly increased bleeding risk",recommendation:"If combination is intentional, ensure regular INR monitoring and GI protection"}),d==="low"&&(d="medium",f=Math.max(f,55))),t.healthMetrics.age>=65&&(y.push({factor:"Advanced age",severity:"medium",description:`Patient is ${t.healthMetrics.age} years old - increased sensitivity to medications`,mitigation:"Start with lower doses, monitor closely for side effects"}),f=Math.max(f,45),d==="low"&&(d="medium")),o&&i&&(g.push({medication:"PDE5 inhibitors",condition:"Cardiovascular disease",severity:"relative",description:"Sexual activity may pose cardiac risk; PDE5 inhibitors affect blood pressure",recommendation:"Assess cardiovascular fitness for sexual activity before prescribing"}),y.push({factor:"Cardiovascular disease",severity:"high",description:"Underlying heart condition increases risk with ED medications",mitigation:"Cardiac clearance recommended, start with lowest dose"}),d!=="critical"&&(d="high",f=Math.max(f,70))),a&&(y.push({factor:"Chronic Kidney Disease",severity:"high",description:"Impaired drug clearance - dose adjustments required",mitigation:"Use renal dosing guidelines, avoid nephrotoxic drugs"}),d==="low"&&(d="medium",f=Math.max(f,50))),s&&n&&m.push({drug1:"Beta-blocker",drug2:"Diabetes medications",severity:"moderate",description:"Beta-blockers may mask symptoms of hypoglycemia",recommendation:"Educate patient on alternate hypoglycemia symptoms, consider cardioselective beta-blocker"}),t.currentMedications.length>=5&&(y.push({factor:"Polypharmacy",severity:"medium",description:`Patient on ${t.currentMedications.length} medications - increased interaction risk`,mitigation:"Review medication list for deprescribing opportunities, careful monitoring"}),d==="low"&&(d="medium",f=Math.max(f,50)));let w,b=[];o?r?(w={medication:"Vacuum Erection Device (non-pharmacological)",dosage:"N/A",frequency:"As needed",duration:"Ongoing",route:"External device",confidenceScore:75,rationale:"PDE5 inhibitors are contraindicated due to nitrate use. VED is a safe alternative.",monitoringRequired:["Patient satisfaction","Proper technique"],warnings:["Do not use for more than 30 minutes at a time"]},b=[{medication:"Alprostadil (intracavernosal)",dosage:"10-20 mcg",rationale:"Direct injection therapy, does not interact with nitrates",confidenceScore:65,considerations:["Requires injection training","Risk of priapism","Penile fibrosis with long-term use"]}]):(w={medication:"Sildenafil",dosage:t.healthMetrics.age>=65?"25mg":"50mg",frequency:"As needed, 1 hour before sexual activity",duration:"Ongoing",route:"Oral",confidenceScore:i?65:85,rationale:"First-line treatment for erectile dysfunction. Effective in most cases.",monitoringRequired:["Blood pressure","Efficacy assessment at follow-up"],warnings:i?["Start with lower dose","Assess cardiovascular fitness","Do not use with nitrates"]:["Do not use with nitrates","Avoid grapefruit juice"]},b=[{medication:"Tadalafil",dosage:"10mg",rationale:"Longer duration of action (up to 36 hours), may be preferred for spontaneity",confidenceScore:80,considerations:["Once-daily dosing option available","More back pain reported"]}]):c?t.sex==="female"?w={medication:"Minoxidil 2% topical solution",dosage:"1mL",frequency:"Twice daily",duration:"Ongoing - takes 4-6 months to see results",route:"Topical",confidenceScore:80,rationale:"FDA-approved for female pattern hair loss. Safe and well-tolerated.",monitoringRequired:["Scalp irritation","Efficacy at 6 months"],warnings:["May cause initial shedding","Must continue for maintenance"]}:(w={medication:"Finasteride",dosage:"1mg",frequency:"Once daily",duration:"Ongoing - takes 6-12 months for full effect",route:"Oral",confidenceScore:85,rationale:"First-line oral treatment for male pattern baldness. Blocks DHT conversion.",monitoringRequired:["PSA levels (baseline)","Sexual function questionnaire"],warnings:["May affect PSA levels","Do not donate blood while taking","Sexual side effects possible (1-2%)"]},b=[{medication:"Minoxidil 5% topical",dosage:"1mL",rationale:"Can be used alone or in combination with finasteride for enhanced effect",confidenceScore:75,considerations:["Topical application","Twice daily application required"]}]):u?(w={medication:"Semaglutide",dosage:"0.25mg weekly, titrate to 2.4mg",frequency:"Once weekly",duration:"16 weeks minimum, typically ongoing",route:"Subcutaneous injection",confidenceScore:90,rationale:"GLP-1 agonist FDA-approved for weight management. Average 15% body weight loss.",monitoringRequired:["Weight","Blood glucose","GI tolerability"],warnings:["Do not use if history of medullary thyroid carcinoma","GI side effects common initially","Slow titration required"]},b=[{medication:"Phentermine-Topiramate",dosage:"3.75mg/23mg, titrate up",rationale:"Alternative for those who cannot use GLP-1 agonists",confidenceScore:70,considerations:["Contraindicated in cardiovascular disease","Controlled substance","Avoid in pregnancy"]}]):w={medication:"Clinical evaluation needed",dosage:"N/A",frequency:"N/A",duration:"N/A",route:"N/A",confidenceScore:50,rationale:"Further clinical evaluation needed to determine appropriate treatment",monitoringRequired:["Complete diagnostic workup"],warnings:["Additional assessment required"]};const v=[];t.lifestyle.smokingStatus==="current"&&v.push("Smoking cessation strongly recommended - improves cardiovascular health and treatment outcomes"),t.lifestyle.alcoholUse==="heavy"&&v.push("Reduce alcohol consumption - may interact with medications and affect treatment efficacy"),t.lifestyle.exerciseFrequency==="sedentary"&&v.push("Increase physical activity - aim for 150 minutes moderate exercise per week"),t.healthMetrics.bloodPressureSystolic>=140&&v.push("DASH diet recommended for blood pressure control");const h=["Complete metabolic panel"];return s&&h.push("HbA1c"),a&&h.push("GFR/Creatinine"),o&&h.push("Testosterone level","Lipid panel"),c&&t.sex==="female"&&h.push("TSH","Iron studies","DHEA-S"),{overallRiskLevel:d,riskScore:f,summaryAssessment:`${t.firstName} ${t.lastName}, ${t.healthMetrics.age}yo ${t.sex}, presenting with ${t.primaryComplaint}. ${d==="critical"?"CRITICAL: Contraindicated drug combination identified. ":d==="high"?"HIGH RISK: Multiple significant risk factors present. ":d==="medium"?"MODERATE RISK: Some risk factors require monitoring. ":"LOW RISK: Few complicating factors. "}${t.currentMedications.length} current medications, ${t.conditions.length} active conditions, ${t.allergies.length} documented allergies.`,primaryRecommendation:w,alternativeTreatments:b,drugInteractions:m,contraindications:g,riskFactors:y,lifestyleRecommendations:v,followUpRecommendations:["Follow-up in 4-6 weeks to assess treatment efficacy","Earlier if side effects occur",d==="high"||d==="critical"?"Consider specialist referral":"Routine monitoring as indicated"],labTestsRecommended:h,analysisTimestamp:new Date().toISOString(),modelVersion:"mock-analysis-v1",disclaimer:"This is a clinical decision support tool. All recommendations must be reviewed and approved by a licensed healthcare provider. This mock analysis is for demonstration purposes."}}function B1({patientData:t}){const{setAnalysisResult:e,setIsAnalyzing:r,setAnalysisError:n,setCurrentStep:i,isAnalyzing:s,analysisError:a}=kr();Y.useEffect(()=>{let c=!0;async function u(){r(!0),n(null);try{const d=await M1(t);c&&(e(d),i(2))}catch(d){c&&n(d instanceof Error?d.message:"Analysis failed")}finally{c&&r(!1)}}return u(),()=>{c=!1}},[t,e,r,n,i]);const o=[{icon:al,label:"Processing patient data",delay:"0s"},{icon:Xv,label:"Checking drug interactions",delay:"0.5s"},{icon:We,label:"Identifying contraindications",delay:"1s"},{icon:Vf,label:"Generating treatment plan",delay:"1.5s"},{icon:bd,label:"Validating recommendations",delay:"2s"}];return a?l.jsxs("div",{className:"card max-w-2xl mx-auto text-center",children:[l.jsx("div",{className:"w-16 h-16 rounded-full bg-clinical-danger/20 flex items-center justify-center mx-auto mb-4",children:l.jsx(We,{className:"w-8 h-8 text-clinical-danger"})}),l.jsx("h2",{className:"text-xl font-bold text-white mb-2",children:"Analysis Failed"}),l.jsx("p",{className:"text-clinical-muted mb-6",children:a}),l.jsx("button",{onClick:()=>{n(null),i(0)},className:"btn-secondary",children:"Go Back to Intake"})]}):l.jsxs("div",{className:"card max-w-2xl mx-auto",children:[l.jsxs("div",{className:"text-center mb-8",children:[l.jsx("div",{className:`w-20 h-20 rounded-2xl bg-gradient-to-br from-clinical-accent to-purple-600 
                        flex items-center justify-center mx-auto mb-4 animate-pulse-slow`,children:l.jsx(Vf,{className:"w-10 h-10 text-white"})}),l.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Analyzing Patient Data"}),l.jsx("p",{className:"text-clinical-muted",children:"AI is reviewing medical history, medications, and generating a personalized treatment plan"})]}),l.jsxs("div",{className:"p-4 rounded-xl bg-clinical-secondary/50 border border-white/10 mb-8",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("div",{className:"w-12 h-12 rounded-full bg-clinical-accent/20 flex items-center justify-center",children:l.jsxs("span",{className:"text-xl font-bold text-clinical-accent",children:[t.firstName[0],t.lastName[0]]})}),l.jsxs("div",{children:[l.jsxs("div",{className:"font-semibold text-white",children:[t.firstName," ",t.lastName]}),l.jsxs("div",{className:"text-sm text-clinical-muted",children:[t.healthMetrics.age,"yo ",t.sex,"  ",t.primaryComplaint]})]})]}),l.jsxs("div",{className:"grid grid-cols-3 gap-4 mt-4 pt-4 border-t border-white/10",children:[l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-2xl font-bold text-white",children:t.currentMedications.length}),l.jsx("div",{className:"text-xs text-clinical-muted",children:"Medications"})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-2xl font-bold text-white",children:t.conditions.length}),l.jsx("div",{className:"text-xs text-clinical-muted",children:"Conditions"})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-2xl font-bold text-white",children:t.allergies.length}),l.jsx("div",{className:"text-xs text-clinical-muted",children:"Allergies"})]})]})]}),l.jsx("div",{className:"space-y-3",children:o.map((c,u)=>l.jsxs("div",{className:"flex items-center gap-4 p-3 rounded-lg bg-clinical-secondary/30 animate-fade-in",style:{animationDelay:c.delay},children:[l.jsx("div",{className:"w-10 h-10 rounded-lg bg-clinical-accent/10 flex items-center justify-center",children:s?l.jsx(Sd,{className:"w-5 h-5 text-clinical-accent animate-spin"}):l.jsx(c.icon,{className:"w-5 h-5 text-clinical-accent"})}),l.jsx("div",{className:"flex-1",children:l.jsx("span",{className:"text-gray-300",children:c.label})}),l.jsx("div",{className:"w-2 h-2 rounded-full bg-clinical-accent animate-pulse",style:{animationDelay:`${u*.3}s`}})]},c.label))}),l.jsxs("div",{className:"mt-8",children:[l.jsx("div",{className:"h-2 bg-clinical-secondary rounded-full overflow-hidden",children:l.jsx("div",{className:`h-full bg-gradient-to-r from-clinical-accent to-purple-600 rounded-full 
                       animate-pulse transition-all duration-1000`,style:{width:s?"90%":"100%"}})}),l.jsx("p",{className:"text-center text-sm text-clinical-muted mt-3",children:s?"This may take a few moments...":"Analysis complete!"})]})]})}function V1({level:t,score:e}){const r={low:{icon:bd,bgColor:"bg-clinical-success/20",borderColor:"border-clinical-success/50",textColor:"text-emerald-400",glowClass:"glow-success",gradient:"from-emerald-500 to-emerald-600"},medium:{icon:Ni,bgColor:"bg-clinical-warning/20",borderColor:"border-clinical-warning/50",textColor:"text-amber-400",glowClass:"glow-warning",gradient:"from-amber-500 to-orange-500"},high:{icon:We,bgColor:"bg-clinical-danger/20",borderColor:"border-clinical-danger/50",textColor:"text-red-400",glowClass:"glow-danger",gradient:"from-red-500 to-red-600"},critical:{icon:Hs,bgColor:"bg-clinical-danger/30",borderColor:"border-clinical-danger",textColor:"text-red-300",glowClass:"glow-danger risk-pulse",gradient:"from-red-600 to-red-700"}},{icon:n,bgColor:i,borderColor:s,textColor:a,glowClass:o,gradient:c}=r[t];return l.jsxs("div",{className:`
      flex items-center gap-4 px-5 py-3 rounded-2xl border
      ${i} ${s} ${o}
    `,children:[l.jsx("div",{className:`
        w-14 h-14 rounded-xl bg-gradient-to-br ${c}
        flex items-center justify-center
      `,children:l.jsx(n,{className:"w-7 h-7 text-white"})}),l.jsxs("div",{children:[l.jsx("div",{className:`text-sm font-medium ${a}`,children:qx(t)}),l.jsxs("div",{className:"flex items-baseline gap-1",children:[l.jsx("span",{className:"text-3xl font-bold text-white",children:e}),l.jsx("span",{className:"text-sm text-clinical-muted",children:"/100"})]})]}),l.jsxs("div",{className:"hidden md:block ml-4",children:[l.jsx("div",{className:"w-32 h-3 bg-clinical-secondary rounded-full overflow-hidden",children:l.jsx("div",{className:`h-full bg-gradient-to-r ${c} transition-all duration-500 rounded-full`,style:{width:`${e}%`}})}),l.jsxs("div",{className:"flex justify-between text-xs text-clinical-muted mt-1",children:[l.jsx("span",{children:"Low"}),l.jsx("span",{children:"Critical"})]})]})]})}function z1({recommendation:t}){const e=t.confidenceScore>=80?"text-emerald-400":t.confidenceScore>=60?"text-amber-400":"text-red-400";return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[l.jsxs("div",{className:"flex-1 space-y-4",children:[l.jsxs("div",{className:"flex items-start gap-4",children:[l.jsx("div",{className:`w-14 h-14 rounded-xl bg-gradient-to-br from-clinical-accent to-purple-600 
                            flex items-center justify-center shrink-0`,children:l.jsx(Tt,{className:"w-7 h-7 text-white"})}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-xl font-bold text-white",children:t.medication}),l.jsx("p",{className:"text-clinical-muted text-sm",children:"Primary recommendation"})]})]}),l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[l.jsx(wa,{icon:Kv,label:"Dosage",value:t.dosage}),l.jsx(wa,{icon:zs,label:"Frequency",value:t.frequency}),l.jsx(wa,{icon:il,label:"Duration",value:t.duration}),l.jsx(wa,{icon:Tt,label:"Route",value:t.route})]})]}),l.jsx("div",{className:"md:w-48 shrink-0",children:l.jsxs("div",{className:"p-4 rounded-xl bg-clinical-secondary/50 border border-white/10 text-center",children:[l.jsx(ey,{className:`w-6 h-6 ${e} mx-auto mb-2`}),l.jsxs("div",{className:`text-3xl font-bold ${e}`,children:[t.confidenceScore,"%"]}),l.jsx("div",{className:"text-xs text-clinical-muted",children:"Confidence Score"}),l.jsx("div",{className:"mt-3 w-full h-2 bg-clinical-secondary rounded-full overflow-hidden",children:l.jsx("div",{className:`h-full rounded-full transition-all ${t.confidenceScore>=80?"bg-clinical-success":t.confidenceScore>=60?"bg-clinical-warning":"bg-clinical-danger"}`,style:{width:`${t.confidenceScore}%`}})})]})})]}),l.jsxs("div",{className:"p-4 rounded-xl bg-clinical-accent/10 border border-clinical-accent/20",children:[l.jsxs("h4",{className:"text-sm font-semibold text-clinical-accent mb-2 flex items-center gap-2",children:[l.jsx("span",{className:"w-2 h-2 rounded-full bg-clinical-accent"}),"Clinical Rationale"]}),l.jsx("p",{className:"text-gray-300",children:t.rationale})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.monitoringRequired.length>0&&l.jsxs("div",{className:"p-4 rounded-xl bg-clinical-secondary/30 border border-white/10",children:[l.jsxs("h4",{className:"text-sm font-semibold text-gray-300 mb-3 flex items-center gap-2",children:[l.jsx(kd,{className:"w-4 h-4 text-clinical-accent"}),"Monitoring Required"]}),l.jsx("ul",{className:"space-y-2",children:t.monitoringRequired.map((r,n)=>l.jsxs("li",{className:"flex items-start gap-2 text-sm text-clinical-muted",children:[l.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-clinical-accent mt-1.5 shrink-0"}),r]},n))})]}),t.warnings.length>0&&l.jsxs("div",{className:"p-4 rounded-xl bg-clinical-warning/10 border border-clinical-warning/20",children:[l.jsxs("h4",{className:"text-sm font-semibold text-amber-400 mb-3 flex items-center gap-2",children:[l.jsx(We,{className:"w-4 h-4"}),"Warnings"]}),l.jsx("ul",{className:"space-y-2",children:t.warnings.map((r,n)=>l.jsxs("li",{className:"flex items-start gap-2 text-sm text-amber-300/80",children:[l.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-clinical-warning mt-1.5 shrink-0"}),r]},n))})]})]})]})}function wa({icon:t,label:e,value:r}){return l.jsxs("div",{className:"p-3 rounded-lg bg-clinical-secondary/50 border border-white/10",children:[l.jsxs("div",{className:"flex items-center gap-2 text-clinical-muted text-xs mb-1",children:[l.jsx(t,{className:"w-3 h-3"}),e]}),l.jsx("div",{className:"text-white font-medium text-sm",children:r})]})}function H1({drugInteractions:t,contraindications:e,riskFactors:r}){const n=[...t].sort((a,o)=>{const c={contraindicated:0,major:1,moderate:2,minor:3};return c[a.severity]-c[o.severity]}),i=[...e].sort((a,o)=>a.severity==="absolute"?-1:1),s=[...r].sort((a,o)=>{const c={high:0,medium:1,low:2};return c[a.severity]-c[o.severity]});return l.jsxs("div",{className:"space-y-6",children:[n.length>0&&l.jsxs("div",{children:[l.jsxs("h4",{className:"text-sm font-semibold text-gray-300 mb-3 flex items-center gap-2",children:[l.jsx(We,{className:"w-4 h-4 text-clinical-warning"}),"Drug Interactions (",n.length,")"]}),l.jsx("div",{className:"space-y-3",children:n.map((a,o)=>l.jsx(W1,{interaction:a},o))})]}),i.length>0&&l.jsxs("div",{children:[l.jsxs("h4",{className:"text-sm font-semibold text-gray-300 mb-3 flex items-center gap-2",children:[l.jsx(Hs,{className:"w-4 h-4 text-clinical-danger"}),"Contraindications (",i.length,")"]}),l.jsx("div",{className:"space-y-3",children:i.map((a,o)=>l.jsx(q1,{contraindication:a},o))})]}),s.length>0&&l.jsxs("div",{children:[l.jsxs("h4",{className:"text-sm font-semibold text-gray-300 mb-3 flex items-center gap-2",children:[l.jsx(Xv,{className:"w-4 h-4 text-clinical-accent"}),"Risk Factors (",s.length,")"]}),l.jsx("div",{className:"space-y-3",children:s.map((a,o)=>l.jsx(G1,{factor:a},o))})]})]})}function W1({interaction:t}){const r={contraindicated:{bg:"bg-clinical-danger/20",border:"border-clinical-danger/50",badge:"badge-danger",icon:Hs,iconColor:"text-clinical-danger"},major:{bg:"bg-clinical-danger/10",border:"border-clinical-danger/30",badge:"badge-danger",icon:We,iconColor:"text-red-400"},moderate:{bg:"bg-clinical-warning/10",border:"border-clinical-warning/30",badge:"badge-warning",icon:Ni,iconColor:"text-amber-400"},minor:{bg:"bg-clinical-accent/10",border:"border-clinical-accent/30",badge:"badge-info",icon:Ni,iconColor:"text-blue-400"}}[t.severity],n=r.icon;return l.jsx("div",{className:`p-4 rounded-xl ${r.bg} border ${r.border}`,children:l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx(n,{className:`w-5 h-5 ${r.iconColor} shrink-0 mt-0.5`}),l.jsxs("div",{className:"flex-1",children:[l.jsxs("div",{className:"flex items-center gap-2 flex-wrap mb-2",children:[l.jsx("span",{className:"font-medium text-white",children:t.drug1}),l.jsx("span",{className:"text-clinical-muted",children:"+"}),l.jsx("span",{className:"font-medium text-white",children:t.drug2}),l.jsx("span",{className:`badge ${r.badge}`,children:t.severity.toUpperCase()})]}),l.jsx("p",{className:"text-sm text-gray-300 mb-2",children:t.description}),l.jsx("div",{className:"p-2 rounded-lg bg-black/20",children:l.jsxs("p",{className:"text-xs text-clinical-muted",children:[l.jsx("strong",{children:"Recommendation:"})," ",t.recommendation]})})]})]})})}function q1({contraindication:t}){const e=t.severity==="absolute";return l.jsx("div",{className:`p-4 rounded-xl border ${e?"bg-clinical-danger/20 border-clinical-danger/50":"bg-clinical-warning/10 border-clinical-warning/30"}`,children:l.jsxs("div",{className:"flex items-start gap-3",children:[e?l.jsx(Hs,{className:"w-5 h-5 text-clinical-danger shrink-0 mt-0.5"}):l.jsx(We,{className:"w-5 h-5 text-clinical-warning shrink-0 mt-0.5"}),l.jsxs("div",{className:"flex-1",children:[l.jsxs("div",{className:"flex items-center gap-2 flex-wrap mb-2",children:[l.jsx("span",{className:"font-medium text-white",children:t.medication}),l.jsx("span",{className:"text-clinical-muted",children:""}),l.jsx("span",{className:"font-medium text-white",children:t.condition}),l.jsx("span",{className:`badge ${e?"badge-danger":"badge-warning"}`,children:e?"ABSOLUTE":"RELATIVE"})]}),l.jsx("p",{className:"text-sm text-gray-300 mb-2",children:t.description}),l.jsx("div",{className:"p-2 rounded-lg bg-black/20",children:l.jsxs("p",{className:"text-xs text-clinical-muted",children:[l.jsx("strong",{children:"Recommendation:"})," ",t.recommendation]})})]})]})})}function G1({factor:t}){const r={high:{bg:"bg-clinical-danger/10",border:"border-clinical-danger/30",badge:"badge-danger",dot:"bg-clinical-danger"},medium:{bg:"bg-clinical-warning/10",border:"border-clinical-warning/30",badge:"badge-warning",dot:"bg-clinical-warning"},low:{bg:"bg-clinical-accent/10",border:"border-clinical-accent/30",badge:"badge-info",dot:"bg-clinical-accent"}}[t.severity];return l.jsx("div",{className:`p-4 rounded-xl ${r.bg} border ${r.border}`,children:l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx("div",{className:`w-3 h-3 rounded-full ${r.dot} shrink-0 mt-1.5`}),l.jsxs("div",{className:"flex-1",children:[l.jsxs("div",{className:"flex items-center gap-2 flex-wrap mb-2",children:[l.jsx("span",{className:"font-medium text-white",children:t.factor}),l.jsxs("span",{className:`badge ${r.badge}`,children:[t.severity.toUpperCase()," RISK"]})]}),l.jsx("p",{className:"text-sm text-gray-300 mb-2",children:t.description}),l.jsx("div",{className:"p-2 rounded-lg bg-black/20",children:l.jsxs("p",{className:"text-xs text-clinical-muted",children:[l.jsx("strong",{children:"Mitigation:"})," ",t.mitigation]})})]})]})})}function K1({alternatives:t}){return l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:t.map((e,r)=>l.jsxs("div",{className:`p-4 rounded-xl bg-clinical-secondary/30 border border-white/10 
                     hover:border-white/20 transition-all duration-200`,children:[l.jsxs("div",{className:"flex items-start justify-between gap-4 mb-3",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-10 h-10 rounded-lg bg-purple-500/20 flex items-center justify-center",children:l.jsx(Tt,{className:"w-5 h-5 text-purple-400"})}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-medium text-white",children:e.medication}),l.jsx("p",{className:"text-sm text-clinical-muted",children:e.dosage})]})]}),l.jsxs("div",{className:"flex items-center gap-1 text-sm",children:[l.jsx(ey,{className:`w-4 h-4 ${e.confidenceScore>=70?"text-emerald-400":"text-amber-400"}`}),l.jsxs("span",{className:e.confidenceScore>=70?"text-emerald-400":"text-amber-400",children:[e.confidenceScore,"%"]})]})]}),l.jsx("p",{className:"text-sm text-gray-300 mb-3",children:e.rationale}),e.considerations.length>0&&l.jsxs("div",{className:"p-3 rounded-lg bg-black/20 space-y-1.5",children:[l.jsxs("div",{className:"flex items-center gap-1.5 text-xs text-clinical-muted mb-1",children:[l.jsx(Pi,{className:"w-3 h-3"}),"Considerations"]}),e.considerations.map((n,i)=>l.jsxs("div",{className:"flex items-start gap-2 text-xs text-gray-400",children:[l.jsx("span",{className:"w-1 h-1 rounded-full bg-purple-400 mt-1.5 shrink-0"}),n]},i))]})]},r))})}function J1({lifestyle:t,followUp:e,labTests:r}){return l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[l.jsxs("div",{className:"p-4 rounded-xl bg-pink-500/10 border border-pink-500/20",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[l.jsx(Ps,{className:"w-5 h-5 text-pink-400"}),l.jsx("h4",{className:"font-medium text-white",children:"Lifestyle"})]}),t.length>0?l.jsx("ul",{className:"space-y-2",children:t.map((n,i)=>l.jsxs("li",{className:"flex items-start gap-2 text-sm text-gray-300",children:[l.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-pink-400 mt-1.5 shrink-0"}),n]},i))}):l.jsx("p",{className:"text-sm text-clinical-muted",children:"No specific lifestyle changes recommended"})]}),l.jsxs("div",{className:"p-4 rounded-xl bg-clinical-accent/10 border border-clinical-accent/20",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[l.jsx(il,{className:"w-5 h-5 text-clinical-accent"}),l.jsx("h4",{className:"font-medium text-white",children:"Follow-up"})]}),e.length>0?l.jsx("ul",{className:"space-y-2",children:e.map((n,i)=>l.jsxs("li",{className:"flex items-start gap-2 text-sm text-gray-300",children:[l.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-clinical-accent mt-1.5 shrink-0"}),n]},i))}):l.jsx("p",{className:"text-sm text-clinical-muted",children:"Standard follow-up schedule"})]}),l.jsxs("div",{className:"p-4 rounded-xl bg-emerald-500/10 border border-emerald-500/20",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[l.jsx(f1,{className:"w-5 h-5 text-emerald-400"}),l.jsx("h4",{className:"font-medium text-white",children:"Recommended Labs"})]}),r.length>0?l.jsx("ul",{className:"space-y-2",children:r.map((n,i)=>l.jsxs("li",{className:"flex items-start gap-2 text-sm text-gray-300",children:[l.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-emerald-400 mt-1.5 shrink-0"}),n]},i))}):l.jsx("p",{className:"text-sm text-clinical-muted",children:"No additional lab tests required"})]})]})}function Y1({analysisResult:t,existingDecision:e}){const{setDoctorDecision:r}=kr(),[n,i]=Y.useState(!1),[s,a]=Y.useState(!1),[o,c]=Y.useState(""),[u,d]=Y.useState([]),[f,m]=Y.useState(""),[g,y]=Y.useState(""),[w,b]=Y.useState(""),v=()=>{if(!o.trim()){alert("Please enter your name to approve");return}r({approved:!0,modifications:u,additionalNotes:w||void 0,timestamp:new Date().toISOString(),doctorId:`dr-${Date.now()}`,doctorName:o.trim()}),i(!1)},h=()=>{if(!o.trim()){alert("Please enter your name");return}if(!g.trim()){alert("Please provide a reason for rejection");return}r({approved:!1,modifications:[],rejectionReason:g.trim(),additionalNotes:w||void 0,timestamp:new Date().toISOString(),doctorId:`dr-${Date.now()}`,doctorName:o.trim()}),a(!1)},p=()=>{f.trim()&&(d([...u,f.trim()]),m(""))},_=N=>{d(u.filter((E,P)=>P!==N))};if(e)return l.jsxs("div",{className:`card ${e.approved?"border-clinical-success/50 bg-clinical-success/5":"border-clinical-danger/50 bg-clinical-danger/5"}`,children:[l.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.approved?l.jsx("div",{className:"w-12 h-12 rounded-xl bg-clinical-success/20 flex items-center justify-center",children:l.jsx(bn,{className:"w-6 h-6 text-clinical-success"})}):l.jsx("div",{className:"w-12 h-12 rounded-xl bg-clinical-danger/20 flex items-center justify-center",children:l.jsx(Nt,{className:"w-6 h-6 text-clinical-danger"})}),l.jsxs("div",{children:[l.jsx("h3",{className:"font-semibold text-white",children:e.approved?"Treatment Plan Approved":"Treatment Plan Rejected"}),l.jsxs("p",{className:"text-sm text-clinical-muted",children:["By ",e.doctorName," on ",new Date(e.timestamp).toLocaleString()]})]})]}),e.approved&&e.modifications.length>0&&l.jsxs("div",{className:"p-3 rounded-lg bg-clinical-warning/10 border border-clinical-warning/20 mb-3",children:[l.jsx("h4",{className:"text-sm font-medium text-amber-400 mb-2",children:"Modifications Made:"}),l.jsx("ul",{className:"space-y-1",children:e.modifications.map((N,E)=>l.jsxs("li",{className:"text-sm text-gray-300 flex items-start gap-2",children:[l.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-clinical-warning mt-1.5"}),N]},E))})]}),!e.approved&&e.rejectionReason&&l.jsxs("div",{className:"p-3 rounded-lg bg-clinical-danger/10 border border-clinical-danger/20 mb-3",children:[l.jsx("h4",{className:"text-sm font-medium text-red-400 mb-1",children:"Rejection Reason:"}),l.jsx("p",{className:"text-sm text-gray-300",children:e.rejectionReason})]}),e.additionalNotes&&l.jsxs("div",{className:"p-3 rounded-lg bg-clinical-secondary/50 border border-white/10",children:[l.jsx("h4",{className:"text-sm font-medium text-gray-400 mb-1",children:"Additional Notes:"}),l.jsx("p",{className:"text-sm text-gray-300",children:e.additionalNotes})]})]});if(s)return l.jsxs("div",{className:"card border-clinical-danger/30",children:[l.jsxs("h3",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:[l.jsx(Nt,{className:"w-5 h-5 text-clinical-danger"}),"Reject Treatment Plan"]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["Your Name ",l.jsx("span",{className:"text-clinical-danger",children:"*"})]}),l.jsx("input",{type:"text",value:o,onChange:N=>c(N.target.value),placeholder:"Dr. John Smith",className:`w-full px-4 py-2.5 rounded-lg bg-clinical-secondary border border-white/10 
                         text-white placeholder-clinical-muted focus:outline-none`})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["Rejection Reason ",l.jsx("span",{className:"text-clinical-danger",children:"*"})]}),l.jsx("textarea",{value:g,onChange:N=>y(N.target.value),rows:3,placeholder:"Explain why this treatment plan is being rejected...",className:`w-full px-4 py-2.5 rounded-lg bg-clinical-secondary border border-white/10 
                         text-white placeholder-clinical-muted focus:outline-none resize-none`})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Additional Notes (optional)"}),l.jsx("textarea",{value:w,onChange:N=>b(N.target.value),rows:2,placeholder:"Any additional notes or alternative suggestions...",className:`w-full px-4 py-2.5 rounded-lg bg-clinical-secondary border border-white/10 
                         text-white placeholder-clinical-muted focus:outline-none resize-none`})]}),l.jsxs("div",{className:"flex gap-3 pt-2",children:[l.jsx("button",{onClick:()=>a(!1),className:"btn-secondary flex-1",children:"Cancel"}),l.jsxs("button",{onClick:h,className:"btn-danger flex-1 flex items-center justify-center gap-2",children:[l.jsx(Nt,{className:"w-4 h-4"}),"Confirm Rejection"]})]})]})]});if(n)return l.jsxs("div",{className:"card border-clinical-accent/30",children:[l.jsxs("h3",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:[l.jsx(c1,{className:"w-5 h-5 text-clinical-accent"}),"Review & Approve Treatment Plan"]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:[l.jsx(pr,{className:"w-4 h-4 inline mr-1"}),"Your Name ",l.jsx("span",{className:"text-clinical-danger",children:"*"})]}),l.jsx("input",{type:"text",value:o,onChange:N=>c(N.target.value),placeholder:"Dr. John Smith",className:`w-full px-4 py-2.5 rounded-lg bg-clinical-secondary border border-white/10 
                         text-white placeholder-clinical-muted focus:outline-none`})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Modifications (optional)"}),u.length>0&&l.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:u.map((N,E)=>l.jsxs("span",{className:`inline-flex items-center gap-2 px-3 py-1.5 rounded-lg 
                               bg-clinical-warning/20 text-amber-300 border border-clinical-warning/30 text-sm`,children:[N,l.jsx("button",{onClick:()=>_(E),className:"hover:text-white transition-colors",children:l.jsx(Nt,{className:"w-3 h-3"})})]},E))}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("input",{type:"text",value:f,onChange:N=>m(N.target.value),onKeyDown:N=>N.key==="Enter"&&(N.preventDefault(),p()),placeholder:"e.g., 'Reduce dosage to 25mg', 'Add monitoring every 2 weeks'",className:`flex-1 px-4 py-2.5 rounded-lg bg-clinical-secondary border border-white/10 
                           text-white placeholder-clinical-muted text-sm focus:outline-none`}),l.jsx("button",{onClick:p,className:`px-4 py-2.5 rounded-lg bg-clinical-warning/20 border border-clinical-warning/30 
                           text-amber-300 hover:bg-clinical-warning/30 transition-colors text-sm`,children:"Add"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Additional Notes (optional)"}),l.jsx("textarea",{value:w,onChange:N=>b(N.target.value),rows:2,placeholder:"Any additional clinical notes...",className:`w-full px-4 py-2.5 rounded-lg bg-clinical-secondary border border-white/10 
                         text-white placeholder-clinical-muted focus:outline-none resize-none`})]}),l.jsxs("div",{className:"flex gap-3 pt-2",children:[l.jsx("button",{onClick:()=>i(!1),className:"btn-secondary flex-1",children:"Cancel"}),l.jsxs("button",{onClick:v,className:"btn-primary flex-1 flex items-center justify-center gap-2",children:[l.jsx(bn,{className:"w-4 h-4"}),"Approve Plan"]})]})]})]});const S=t.overallRiskLevel==="critical";return l.jsxs("div",{className:"card",children:[l.jsxs("h3",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:[l.jsx(Qv,{className:"w-5 h-5 text-clinical-accent"}),"Physician Review Required"]}),S&&l.jsx("div",{className:"p-4 rounded-xl bg-clinical-danger/20 border border-clinical-danger/50 mb-4",children:l.jsxs("p",{className:"text-sm text-red-300",children:[l.jsx("strong",{children:" Critical Risk Alert:"})," This treatment plan contains critical safety concerns. Please review all flagged interactions and contraindications carefully before making a decision."]})}),l.jsx("p",{className:"text-clinical-muted mb-6",children:"As the treating physician, please review the AI-generated treatment recommendations and make a clinical decision. You may approve as-is, approve with modifications, or reject."}),l.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[l.jsxs("button",{onClick:()=>i(!0),className:"btn-primary flex-1 flex items-center justify-center gap-2",children:[l.jsx(bn,{className:"w-4 h-4"}),"Review & Approve"]}),l.jsxs("button",{onClick:()=>a(!0),className:`btn-secondary flex-1 flex items-center justify-center gap-2 
                     border-clinical-danger/30 hover:bg-clinical-danger/10 hover:border-clinical-danger/50`,children:[l.jsx(Nt,{className:"w-4 h-4 text-clinical-danger"}),l.jsx("span",{className:"text-red-400",children:"Reject Plan"})]})]})]})}function Oo(t){"@babel/helpers - typeof";return Oo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Oo(t)}function Tn(t){if(t===null||t===!0||t===!1)return NaN;var e=Number(t);return isNaN(e)?e:e<0?Math.ceil(e):Math.floor(e)}function st(t,e){if(e.length<t)throw new TypeError(t+" argument"+(t>1?"s":"")+" required, but only "+e.length+" present")}function sr(t){st(1,arguments);var e=Object.prototype.toString.call(t);return t instanceof Date||Oo(t)==="object"&&e==="[object Date]"?new Date(t.getTime()):typeof t=="number"||e==="[object Number]"?new Date(t):((typeof t=="string"||e==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}function Z1(t,e){st(2,arguments);var r=sr(t).getTime(),n=Tn(e);return new Date(r+n)}var Q1={};function ol(){return Q1}function X1(t){var e=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return e.setUTCFullYear(t.getFullYear()),t.getTime()-e.getTime()}function eS(t){return st(1,arguments),t instanceof Date||Oo(t)==="object"&&Object.prototype.toString.call(t)==="[object Date]"}function tS(t){if(st(1,arguments),!eS(t)&&typeof t!="number")return!1;var e=sr(t);return!isNaN(Number(e))}function rS(t,e){st(2,arguments);var r=Tn(e);return Z1(t,-r)}var nS=864e5;function iS(t){st(1,arguments);var e=sr(t),r=e.getTime();e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0);var n=e.getTime(),i=r-n;return Math.floor(i/nS)+1}function Ro(t){st(1,arguments);var e=1,r=sr(t),n=r.getUTCDay(),i=(n<e?7:0)+n-e;return r.setUTCDate(r.getUTCDate()-i),r.setUTCHours(0,0,0,0),r}function ry(t){st(1,arguments);var e=sr(t),r=e.getUTCFullYear(),n=new Date(0);n.setUTCFullYear(r+1,0,4),n.setUTCHours(0,0,0,0);var i=Ro(n),s=new Date(0);s.setUTCFullYear(r,0,4),s.setUTCHours(0,0,0,0);var a=Ro(s);return e.getTime()>=i.getTime()?r+1:e.getTime()>=a.getTime()?r:r-1}function sS(t){st(1,arguments);var e=ry(t),r=new Date(0);r.setUTCFullYear(e,0,4),r.setUTCHours(0,0,0,0);var n=Ro(r);return n}var aS=6048e5;function oS(t){st(1,arguments);var e=sr(t),r=Ro(e).getTime()-sS(e).getTime();return Math.round(r/aS)+1}function Po(t,e){var r,n,i,s,a,o,c,u;st(1,arguments);var d=ol(),f=Tn((r=(n=(i=(s=e==null?void 0:e.weekStartsOn)!==null&&s!==void 0?s:e==null||(a=e.locale)===null||a===void 0||(o=a.options)===null||o===void 0?void 0:o.weekStartsOn)!==null&&i!==void 0?i:d.weekStartsOn)!==null&&n!==void 0?n:(c=d.locale)===null||c===void 0||(u=c.options)===null||u===void 0?void 0:u.weekStartsOn)!==null&&r!==void 0?r:0);if(!(f>=0&&f<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var m=sr(t),g=m.getUTCDay(),y=(g<f?7:0)+g-f;return m.setUTCDate(m.getUTCDate()-y),m.setUTCHours(0,0,0,0),m}function ny(t,e){var r,n,i,s,a,o,c,u;st(1,arguments);var d=sr(t),f=d.getUTCFullYear(),m=ol(),g=Tn((r=(n=(i=(s=e==null?void 0:e.firstWeekContainsDate)!==null&&s!==void 0?s:e==null||(a=e.locale)===null||a===void 0||(o=a.options)===null||o===void 0?void 0:o.firstWeekContainsDate)!==null&&i!==void 0?i:m.firstWeekContainsDate)!==null&&n!==void 0?n:(c=m.locale)===null||c===void 0||(u=c.options)===null||u===void 0?void 0:u.firstWeekContainsDate)!==null&&r!==void 0?r:1);if(!(g>=1&&g<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var y=new Date(0);y.setUTCFullYear(f+1,0,g),y.setUTCHours(0,0,0,0);var w=Po(y,e),b=new Date(0);b.setUTCFullYear(f,0,g),b.setUTCHours(0,0,0,0);var v=Po(b,e);return d.getTime()>=w.getTime()?f+1:d.getTime()>=v.getTime()?f:f-1}function lS(t,e){var r,n,i,s,a,o,c,u;st(1,arguments);var d=ol(),f=Tn((r=(n=(i=(s=e==null?void 0:e.firstWeekContainsDate)!==null&&s!==void 0?s:e==null||(a=e.locale)===null||a===void 0||(o=a.options)===null||o===void 0?void 0:o.firstWeekContainsDate)!==null&&i!==void 0?i:d.firstWeekContainsDate)!==null&&n!==void 0?n:(c=d.locale)===null||c===void 0||(u=c.options)===null||u===void 0?void 0:u.firstWeekContainsDate)!==null&&r!==void 0?r:1),m=ny(t,e),g=new Date(0);g.setUTCFullYear(m,0,f),g.setUTCHours(0,0,0,0);var y=Po(g,e);return y}var cS=6048e5;function uS(t,e){st(1,arguments);var r=sr(t),n=Po(r,e).getTime()-lS(r,e).getTime();return Math.round(n/cS)+1}function de(t,e){for(var r=t<0?"-":"",n=Math.abs(t).toString();n.length<e;)n="0"+n;return r+n}var Er={y:function(e,r){var n=e.getUTCFullYear(),i=n>0?n:1-n;return de(r==="yy"?i%100:i,r.length)},M:function(e,r){var n=e.getUTCMonth();return r==="M"?String(n+1):de(n+1,2)},d:function(e,r){return de(e.getUTCDate(),r.length)},a:function(e,r){var n=e.getUTCHours()/12>=1?"pm":"am";switch(r){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h:function(e,r){return de(e.getUTCHours()%12||12,r.length)},H:function(e,r){return de(e.getUTCHours(),r.length)},m:function(e,r){return de(e.getUTCMinutes(),r.length)},s:function(e,r){return de(e.getUTCSeconds(),r.length)},S:function(e,r){var n=r.length,i=e.getUTCMilliseconds(),s=Math.floor(i*Math.pow(10,n-3));return de(s,r.length)}},Fn={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},dS={G:function(e,r,n){var i=e.getUTCFullYear()>0?1:0;switch(r){case"G":case"GG":case"GGG":return n.era(i,{width:"abbreviated"});case"GGGGG":return n.era(i,{width:"narrow"});case"GGGG":default:return n.era(i,{width:"wide"})}},y:function(e,r,n){if(r==="yo"){var i=e.getUTCFullYear(),s=i>0?i:1-i;return n.ordinalNumber(s,{unit:"year"})}return Er.y(e,r)},Y:function(e,r,n,i){var s=ny(e,i),a=s>0?s:1-s;if(r==="YY"){var o=a%100;return de(o,2)}return r==="Yo"?n.ordinalNumber(a,{unit:"year"}):de(a,r.length)},R:function(e,r){var n=ry(e);return de(n,r.length)},u:function(e,r){var n=e.getUTCFullYear();return de(n,r.length)},Q:function(e,r,n){var i=Math.ceil((e.getUTCMonth()+1)/3);switch(r){case"Q":return String(i);case"QQ":return de(i,2);case"Qo":return n.ordinalNumber(i,{unit:"quarter"});case"QQQ":return n.quarter(i,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(i,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(i,{width:"wide",context:"formatting"})}},q:function(e,r,n){var i=Math.ceil((e.getUTCMonth()+1)/3);switch(r){case"q":return String(i);case"qq":return de(i,2);case"qo":return n.ordinalNumber(i,{unit:"quarter"});case"qqq":return n.quarter(i,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(i,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(i,{width:"wide",context:"standalone"})}},M:function(e,r,n){var i=e.getUTCMonth();switch(r){case"M":case"MM":return Er.M(e,r);case"Mo":return n.ordinalNumber(i+1,{unit:"month"});case"MMM":return n.month(i,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(i,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(i,{width:"wide",context:"formatting"})}},L:function(e,r,n){var i=e.getUTCMonth();switch(r){case"L":return String(i+1);case"LL":return de(i+1,2);case"Lo":return n.ordinalNumber(i+1,{unit:"month"});case"LLL":return n.month(i,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(i,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(i,{width:"wide",context:"standalone"})}},w:function(e,r,n,i){var s=uS(e,i);return r==="wo"?n.ordinalNumber(s,{unit:"week"}):de(s,r.length)},I:function(e,r,n){var i=oS(e);return r==="Io"?n.ordinalNumber(i,{unit:"week"}):de(i,r.length)},d:function(e,r,n){return r==="do"?n.ordinalNumber(e.getUTCDate(),{unit:"date"}):Er.d(e,r)},D:function(e,r,n){var i=iS(e);return r==="Do"?n.ordinalNumber(i,{unit:"dayOfYear"}):de(i,r.length)},E:function(e,r,n){var i=e.getUTCDay();switch(r){case"E":case"EE":case"EEE":return n.day(i,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(i,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(i,{width:"short",context:"formatting"});case"EEEE":default:return n.day(i,{width:"wide",context:"formatting"})}},e:function(e,r,n,i){var s=e.getUTCDay(),a=(s-i.weekStartsOn+8)%7||7;switch(r){case"e":return String(a);case"ee":return de(a,2);case"eo":return n.ordinalNumber(a,{unit:"day"});case"eee":return n.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(s,{width:"short",context:"formatting"});case"eeee":default:return n.day(s,{width:"wide",context:"formatting"})}},c:function(e,r,n,i){var s=e.getUTCDay(),a=(s-i.weekStartsOn+8)%7||7;switch(r){case"c":return String(a);case"cc":return de(a,r.length);case"co":return n.ordinalNumber(a,{unit:"day"});case"ccc":return n.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(s,{width:"narrow",context:"standalone"});case"cccccc":return n.day(s,{width:"short",context:"standalone"});case"cccc":default:return n.day(s,{width:"wide",context:"standalone"})}},i:function(e,r,n){var i=e.getUTCDay(),s=i===0?7:i;switch(r){case"i":return String(s);case"ii":return de(s,r.length);case"io":return n.ordinalNumber(s,{unit:"day"});case"iii":return n.day(i,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(i,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(i,{width:"short",context:"formatting"});case"iiii":default:return n.day(i,{width:"wide",context:"formatting"})}},a:function(e,r,n){var i=e.getUTCHours(),s=i/12>=1?"pm":"am";switch(r){case"a":case"aa":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(e,r,n){var i=e.getUTCHours(),s;switch(i===12?s=Fn.noon:i===0?s=Fn.midnight:s=i/12>=1?"pm":"am",r){case"b":case"bb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(e,r,n){var i=e.getUTCHours(),s;switch(i>=17?s=Fn.evening:i>=12?s=Fn.afternoon:i>=4?s=Fn.morning:s=Fn.night,r){case"B":case"BB":case"BBB":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(e,r,n){if(r==="ho"){var i=e.getUTCHours()%12;return i===0&&(i=12),n.ordinalNumber(i,{unit:"hour"})}return Er.h(e,r)},H:function(e,r,n){return r==="Ho"?n.ordinalNumber(e.getUTCHours(),{unit:"hour"}):Er.H(e,r)},K:function(e,r,n){var i=e.getUTCHours()%12;return r==="Ko"?n.ordinalNumber(i,{unit:"hour"}):de(i,r.length)},k:function(e,r,n){var i=e.getUTCHours();return i===0&&(i=24),r==="ko"?n.ordinalNumber(i,{unit:"hour"}):de(i,r.length)},m:function(e,r,n){return r==="mo"?n.ordinalNumber(e.getUTCMinutes(),{unit:"minute"}):Er.m(e,r)},s:function(e,r,n){return r==="so"?n.ordinalNumber(e.getUTCSeconds(),{unit:"second"}):Er.s(e,r)},S:function(e,r){return Er.S(e,r)},X:function(e,r,n,i){var s=i._originalDate||e,a=s.getTimezoneOffset();if(a===0)return"Z";switch(r){case"X":return Hf(a);case"XXXX":case"XX":return hn(a);case"XXXXX":case"XXX":default:return hn(a,":")}},x:function(e,r,n,i){var s=i._originalDate||e,a=s.getTimezoneOffset();switch(r){case"x":return Hf(a);case"xxxx":case"xx":return hn(a);case"xxxxx":case"xxx":default:return hn(a,":")}},O:function(e,r,n,i){var s=i._originalDate||e,a=s.getTimezoneOffset();switch(r){case"O":case"OO":case"OOO":return"GMT"+zf(a,":");case"OOOO":default:return"GMT"+hn(a,":")}},z:function(e,r,n,i){var s=i._originalDate||e,a=s.getTimezoneOffset();switch(r){case"z":case"zz":case"zzz":return"GMT"+zf(a,":");case"zzzz":default:return"GMT"+hn(a,":")}},t:function(e,r,n,i){var s=i._originalDate||e,a=Math.floor(s.getTime()/1e3);return de(a,r.length)},T:function(e,r,n,i){var s=i._originalDate||e,a=s.getTime();return de(a,r.length)}};function zf(t,e){var r=t>0?"-":"+",n=Math.abs(t),i=Math.floor(n/60),s=n%60;if(s===0)return r+String(i);var a=e;return r+String(i)+a+de(s,2)}function Hf(t,e){if(t%60===0){var r=t>0?"-":"+";return r+de(Math.abs(t)/60,2)}return hn(t,e)}function hn(t,e){var r=e||"",n=t>0?"-":"+",i=Math.abs(t),s=de(Math.floor(i/60),2),a=de(i%60,2);return n+s+r+a}var Wf=function(e,r){switch(e){case"P":return r.date({width:"short"});case"PP":return r.date({width:"medium"});case"PPP":return r.date({width:"long"});case"PPPP":default:return r.date({width:"full"})}},iy=function(e,r){switch(e){case"p":return r.time({width:"short"});case"pp":return r.time({width:"medium"});case"ppp":return r.time({width:"long"});case"pppp":default:return r.time({width:"full"})}},hS=function(e,r){var n=e.match(/(P+)(p+)?/)||[],i=n[1],s=n[2];if(!s)return Wf(e,r);var a;switch(i){case"P":a=r.dateTime({width:"short"});break;case"PP":a=r.dateTime({width:"medium"});break;case"PPP":a=r.dateTime({width:"long"});break;case"PPPP":default:a=r.dateTime({width:"full"});break}return a.replace("{{date}}",Wf(i,r)).replace("{{time}}",iy(s,r))},fS={p:iy,P:hS},mS=["D","DD"],pS=["YY","YYYY"];function gS(t){return mS.indexOf(t)!==-1}function vS(t){return pS.indexOf(t)!==-1}function qf(t,e,r){if(t==="YYYY")throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(e,"`) for formatting years to the input `").concat(r,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(t==="YY")throw new RangeError("Use `yy` instead of `YY` (in `".concat(e,"`) for formatting years to the input `").concat(r,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(t==="D")throw new RangeError("Use `d` instead of `D` (in `".concat(e,"`) for formatting days of the month to the input `").concat(r,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(t==="DD")throw new RangeError("Use `dd` instead of `DD` (in `".concat(e,"`) for formatting days of the month to the input `").concat(r,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var yS={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},wS=function(e,r,n){var i,s=yS[e];return typeof s=="string"?i=s:r===1?i=s.one:i=s.other.replace("{{count}}",r.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+i:i+" ago":i};function Gl(t){return function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=e.width?String(e.width):t.defaultWidth,n=t.formats[r]||t.formats[t.defaultWidth];return n}}var xS={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},_S={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},bS={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},kS={date:Gl({formats:xS,defaultWidth:"full"}),time:Gl({formats:_S,defaultWidth:"full"}),dateTime:Gl({formats:bS,defaultWidth:"full"})},SS={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},jS=function(e,r,n,i){return SS[e]};function zi(t){return function(e,r){var n=r!=null&&r.context?String(r.context):"standalone",i;if(n==="formatting"&&t.formattingValues){var s=t.defaultFormattingWidth||t.defaultWidth,a=r!=null&&r.width?String(r.width):s;i=t.formattingValues[a]||t.formattingValues[s]}else{var o=t.defaultWidth,c=r!=null&&r.width?String(r.width):t.defaultWidth;i=t.values[c]||t.values[o]}var u=t.argumentCallback?t.argumentCallback(e):e;return i[u]}}var NS={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},ES={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},CS={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},TS={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},AS={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},OS={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},RS=function(e,r){var n=Number(e),i=n%100;if(i>20||i<10)switch(i%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},PS={ordinalNumber:RS,era:zi({values:NS,defaultWidth:"wide"}),quarter:zi({values:ES,defaultWidth:"wide",argumentCallback:function(e){return e-1}}),month:zi({values:CS,defaultWidth:"wide"}),day:zi({values:TS,defaultWidth:"wide"}),dayPeriod:zi({values:AS,defaultWidth:"wide",formattingValues:OS,defaultFormattingWidth:"wide"})};function Hi(t){return function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=r.width,i=n&&t.matchPatterns[n]||t.matchPatterns[t.defaultMatchWidth],s=e.match(i);if(!s)return null;var a=s[0],o=n&&t.parsePatterns[n]||t.parsePatterns[t.defaultParseWidth],c=Array.isArray(o)?DS(o,function(f){return f.test(a)}):IS(o,function(f){return f.test(a)}),u;u=t.valueCallback?t.valueCallback(c):c,u=r.valueCallback?r.valueCallback(u):u;var d=e.slice(a.length);return{value:u,rest:d}}}function IS(t,e){for(var r in t)if(t.hasOwnProperty(r)&&e(t[r]))return r}function DS(t,e){for(var r=0;r<t.length;r++)if(e(t[r]))return r}function LS(t){return function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.match(t.matchPattern);if(!n)return null;var i=n[0],s=e.match(t.parsePattern);if(!s)return null;var a=t.valueCallback?t.valueCallback(s[0]):s[0];a=r.valueCallback?r.valueCallback(a):a;var o=e.slice(i.length);return{value:a,rest:o}}}var $S=/^(\d+)(th|st|nd|rd)?/i,MS=/\d+/i,US={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},FS={any:[/^b/i,/^(a|c)/i]},BS={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},VS={any:[/1/i,/2/i,/3/i,/4/i]},zS={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},HS={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},WS={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},qS={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},GS={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},KS={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},JS={ordinalNumber:LS({matchPattern:$S,parsePattern:MS,valueCallback:function(e){return parseInt(e,10)}}),era:Hi({matchPatterns:US,defaultMatchWidth:"wide",parsePatterns:FS,defaultParseWidth:"any"}),quarter:Hi({matchPatterns:BS,defaultMatchWidth:"wide",parsePatterns:VS,defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:Hi({matchPatterns:zS,defaultMatchWidth:"wide",parsePatterns:HS,defaultParseWidth:"any"}),day:Hi({matchPatterns:WS,defaultMatchWidth:"wide",parsePatterns:qS,defaultParseWidth:"any"}),dayPeriod:Hi({matchPatterns:GS,defaultMatchWidth:"any",parsePatterns:KS,defaultParseWidth:"any"})},YS={code:"en-US",formatDistance:wS,formatLong:kS,formatRelative:jS,localize:PS,match:JS,options:{weekStartsOn:0,firstWeekContainsDate:1}},ZS=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,QS=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,XS=/^'([^]*?)'?$/,ej=/''/g,tj=/[a-zA-Z]/;function Ma(t,e,r){var n,i,s,a,o,c,u,d,f,m,g,y,w,b;st(2,arguments);var v=String(e),h=ol(),p=(n=(i=void 0)!==null&&i!==void 0?i:h.locale)!==null&&n!==void 0?n:YS,_=Tn((s=(a=(o=(c=void 0)!==null&&c!==void 0?c:void 0)!==null&&o!==void 0?o:h.firstWeekContainsDate)!==null&&a!==void 0?a:(u=h.locale)===null||u===void 0||(d=u.options)===null||d===void 0?void 0:d.firstWeekContainsDate)!==null&&s!==void 0?s:1);if(!(_>=1&&_<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var S=Tn((f=(m=(g=(y=void 0)!==null&&y!==void 0?y:void 0)!==null&&g!==void 0?g:h.weekStartsOn)!==null&&m!==void 0?m:(w=h.locale)===null||w===void 0||(b=w.options)===null||b===void 0?void 0:b.weekStartsOn)!==null&&f!==void 0?f:0);if(!(S>=0&&S<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!p.localize)throw new RangeError("locale must contain localize property");if(!p.formatLong)throw new RangeError("locale must contain formatLong property");var N=sr(t);if(!tS(N))throw new RangeError("Invalid time value");var E=X1(N),P=rS(N,E),G={firstWeekContainsDate:_,weekStartsOn:S,locale:p,_originalDate:N},K=v.match(QS).map(function(ne){var q=ne[0];if(q==="p"||q==="P"){var re=fS[q];return re(ne,p.formatLong)}return ne}).join("").match(ZS).map(function(ne){if(ne==="''")return"'";var q=ne[0];if(q==="'")return rj(ne);var re=dS[q];if(re)return vS(ne)&&qf(ne,e,String(t)),gS(ne)&&qf(ne,e,String(t)),re(P,ne,p.localize,G);if(q.match(tj))throw new RangeError("Format string contains an unescaped latin alphabet character `"+q+"`");return ne}).join("");return K}function rj(t){var e=t.match(XS);return e?e[1].replace(ej,"'"):t}function nj(){const{auditLog:t,loadAuditLog:e,isAuditLogLoading:r,supabaseConnected:n,sessionId:i}=kr(),[s,a]=Y.useState(new Set);Y.useEffect(()=>{e()},[e]);const o=d=>{const f=new Set(s);f.has(d)?f.delete(d):f.add(d),a(f)},c={created:{icon:Xt,color:"text-clinical-accent",bg:"bg-clinical-accent/20"},viewed:{icon:kd,color:"text-purple-400",bg:"bg-purple-500/20"},approved:{icon:bn,color:"text-clinical-success",bg:"bg-clinical-success/20"},modified:{icon:Yv,color:"text-clinical-warning",bg:"bg-clinical-warning/20"},rejected:{icon:Nt,color:"text-clinical-danger",bg:"bg-clinical-danger/20"}},u=d=>{if(!d)return null;const f={low:"bg-emerald-500/20 text-emerald-400 border-emerald-500/30",medium:"bg-amber-500/20 text-amber-400 border-amber-500/30",high:"bg-red-500/20 text-red-400 border-red-500/30",critical:"bg-red-600/30 text-red-300 border-red-500/50"};return l.jsx("span",{className:`badge ${f[d]||f.low}`,children:d.toUpperCase()})};return l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:`flex items-center justify-between p-3 rounded-lg ${n?"bg-clinical-success/10 border border-clinical-success/30":"bg-clinical-warning/10 border border-clinical-warning/30"}`,children:[l.jsx("div",{className:"flex items-center gap-2",children:n?l.jsxs(l.Fragment,{children:[l.jsx(Gv,{className:"w-4 h-4 text-clinical-success"}),l.jsx("span",{className:"text-sm text-emerald-400",children:"Connected to Supabase"})]}):l.jsxs(l.Fragment,{children:[l.jsx(qv,{className:"w-4 h-4 text-clinical-warning"}),l.jsx("span",{className:"text-sm text-amber-400",children:"In-memory only"})]})}),l.jsxs("div",{className:"text-xs text-clinical-muted font-mono",children:["Session: ",i.slice(0,20),"..."]})]}),t.length>0&&l.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[l.jsx(xa,{label:"Total Actions",value:t.length,icon:nr}),l.jsx(xa,{label:"Approvals",value:t.filter(d=>d.action==="approved").length,icon:bn,color:"text-clinical-success"}),l.jsx(xa,{label:"Rejections",value:t.filter(d=>d.action==="rejected").length,icon:Nt,color:"text-clinical-danger"}),l.jsx(xa,{label:"High Risk",value:t.filter(d=>d.riskLevel==="high"||d.riskLevel==="critical").length,icon:We,color:"text-clinical-warning"})]}),l.jsx("div",{className:"text-sm text-clinical-muted mb-4",children:"Complete audit trail for medical compliance and record-keeping"}),r?l.jsxs("div",{className:"flex items-center justify-center py-8 text-clinical-muted",children:[l.jsx(Sd,{className:"w-6 h-6 animate-spin mr-2"}),l.jsx("span",{children:"Loading audit log..."})]}):t.length===0?l.jsxs("div",{className:"text-center py-8 text-clinical-muted",children:[l.jsx(Xt,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),l.jsx("p",{children:"No audit entries yet"})]}):l.jsx("div",{className:"space-y-2",children:[...t].reverse().map(d=>{const f=c[d.action],m=f.icon,g=s.has(d.id);return l.jsxs("div",{className:`rounded-lg bg-clinical-secondary/30 border border-white/5 
                           hover:border-white/10 transition-all overflow-hidden`,children:[l.jsxs("button",{onClick:()=>o(d.id),className:"w-full flex items-start gap-3 p-3 text-left",children:[l.jsx("div",{className:`w-8 h-8 rounded-lg ${f.bg} flex items-center justify-center shrink-0`,children:l.jsx(m,{className:`w-4 h-4 ${f.color}`})}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[l.jsx("span",{className:`font-medium ${f.color} capitalize`,children:d.action}),d.riskLevel&&u(d.riskLevel),d.riskScore!==void 0&&l.jsxs("span",{className:"text-xs text-clinical-muted",children:["Score: ",d.riskScore]})]}),l.jsx("p",{className:"text-gray-300 text-sm mt-0.5",children:d.details}),l.jsxs("div",{className:"flex items-center gap-4 mt-1 text-xs text-clinical-muted",children:[l.jsxs("span",{className:"flex items-center gap-1",children:[l.jsx(pr,{className:"w-3 h-3"}),d.userName]}),l.jsxs("span",{className:"flex items-center gap-1",children:[l.jsx(zs,{className:"w-3 h-3"}),Ma(new Date(d.timestamp),"MMM d, HH:mm:ss")]}),d.treatmentMedication&&l.jsxs("span",{className:"flex items-center gap-1",children:[l.jsx(Tt,{className:"w-3 h-3"}),d.treatmentMedication]})]})]}),g?l.jsx(sl,{className:"w-4 h-4 text-clinical-muted shrink-0"}):l.jsx(Co,{className:"w-4 h-4 text-clinical-muted shrink-0"})]}),g&&l.jsxs("div",{className:"px-3 pb-3 pt-0 border-t border-white/5 mt-0",children:[l.jsxs("div",{className:"grid grid-cols-2 gap-3 mt-3",children:[l.jsx(Gt,{label:"Entry ID",value:d.id,icon:To,mono:!0}),l.jsx(Gt,{label:"Session ID",value:d.sessionId,icon:$a,mono:!0}),l.jsx(Gt,{label:"Patient ID",value:d.patientId,icon:pr}),l.jsx(Gt,{label:"User ID",value:d.userId,icon:pr}),d.analysisId&&l.jsx(Gt,{label:"Analysis ID",value:d.analysisId,icon:nr,mono:!0}),d.confidenceScore!==void 0&&l.jsx(Gt,{label:"Confidence",value:`${d.confidenceScore}%`,icon:nr}),d.drugInteractionsCount!==void 0&&l.jsx(Gt,{label:"Drug Interactions",value:d.drugInteractionsCount.toString(),icon:We}),d.contraindicationsCount!==void 0&&l.jsx(Gt,{label:"Contraindications",value:d.contraindicationsCount.toString(),icon:We}),d.treatmentDosage&&l.jsx(Gt,{label:"Dosage",value:d.treatmentDosage,icon:Tt}),d.patientDataHash&&l.jsx(Gt,{label:"Data Hash",value:d.patientDataHash,icon:To,mono:!0})]}),d.userAgent&&l.jsxs("div",{className:"mt-3 p-2 rounded bg-black/20",children:[l.jsx("div",{className:"text-xs text-clinical-muted mb-1",children:"User Agent"}),l.jsxs("div",{className:"text-xs text-gray-400 font-mono break-all",children:[d.userAgent.slice(0,100),"..."]})]}),d.modificationsJson&&d.modificationsJson.length>0&&l.jsxs("div",{className:"mt-3 p-2 rounded bg-clinical-warning/10 border border-clinical-warning/20",children:[l.jsx("div",{className:"text-xs text-amber-400 font-medium mb-1",children:"Modifications Made"}),l.jsx("ul",{className:"text-xs text-gray-300 space-y-1",children:d.modificationsJson.map((y,w)=>l.jsxs("li",{className:"flex items-start gap-1",children:[l.jsx("span",{className:"text-amber-400",children:""})," ",y]},w))})]}),d.analysisSnapshot&&l.jsxs("div",{className:"mt-3 p-2 rounded bg-black/20",children:[l.jsx("div",{className:"text-xs text-clinical-muted mb-1",children:"Analysis Snapshot"}),l.jsx("pre",{className:"text-xs text-gray-400 font-mono overflow-x-auto",children:JSON.stringify(d.analysisSnapshot,null,2)})]})]})]},d.id)})}),l.jsx("div",{className:"pt-4 border-t border-white/10 mt-4",children:l.jsx("p",{className:"text-xs text-clinical-muted",children:n?l.jsx(l.Fragment,{children:" Audit entries are persisted to Supabase with full compliance data including session tracking, data hashes, and analysis snapshots."}):l.jsx(l.Fragment,{children:" Configure Supabase to persist audit logs with full compliance tracking."})})})]})}function xa({label:t,value:e,icon:r,color:n="text-clinical-accent"}){return l.jsxs("div",{className:"p-2 rounded-lg bg-clinical-secondary/30 border border-white/5",children:[l.jsxs("div",{className:"flex items-center gap-1.5",children:[l.jsx(r,{className:`w-3 h-3 ${n}`}),l.jsx("span",{className:"text-xs text-clinical-muted",children:t})]}),l.jsx("div",{className:`text-lg font-bold ${n}`,children:e})]})}function Gt({label:t,value:e,icon:r,mono:n=!1}){return l.jsxs("div",{className:"flex items-start gap-2",children:[l.jsx(r,{className:"w-3 h-3 text-clinical-muted mt-0.5 shrink-0"}),l.jsxs("div",{className:"min-w-0",children:[l.jsx("div",{className:"text-xs text-clinical-muted",children:t}),l.jsx("div",{className:`text-xs text-gray-300 truncate ${n?"font-mono":""}`,children:e})]})]})}function ij({analysisResult:t}){const{patientData:e,doctorDecision:r}=kr(),[n,i]=Y.useState(new Set(["treatment","safety"])),s=o=>{const c=new Set(n);c.has(o)?c.delete(o):c.add(o),i(c)},a=t.drugInteractions.some(o=>o.severity==="major"||o.severity==="contraindicated")||t.contraindications.some(o=>o.severity==="absolute");return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-bold text-white",children:"Clinical Decision Dashboard"}),l.jsxs("p",{className:"text-clinical-muted",children:[e==null?void 0:e.firstName," ",e==null?void 0:e.lastName,"  ",e==null?void 0:e.primaryComplaint]})]}),l.jsx(V1,{level:t.overallRiskLevel,score:t.riskScore})]}),l.jsx("div",{className:`card ${a?"border-clinical-danger/50 glow-danger":"border-white/10"}`,children:l.jsxs("div",{className:"flex items-start gap-4",children:[a&&l.jsx("div",{className:"w-12 h-12 rounded-xl bg-clinical-danger/20 flex items-center justify-center shrink-0",children:l.jsx(We,{className:"w-6 h-6 text-clinical-danger"})}),l.jsxs("div",{children:[l.jsx("h3",{className:"font-semibold text-white mb-2",children:"Clinical Summary"}),l.jsx("p",{className:"text-gray-300",children:t.summaryAssessment})]})]})}),(t.drugInteractions.length>0||t.contraindications.length>0||t.riskFactors.length>0)&&l.jsx(Wi,{id:"safety",title:"Safety Alerts",icon:We,badge:t.drugInteractions.filter(o=>o.severity==="contraindicated"||o.severity==="major").length+t.contraindications.filter(o=>o.severity==="absolute").length,badgeColor:"danger",expanded:n.has("safety"),onToggle:()=>s("safety"),children:l.jsx(H1,{drugInteractions:t.drugInteractions,contraindications:t.contraindications,riskFactors:t.riskFactors})}),l.jsx(Wi,{id:"treatment",title:"Recommended Treatment",icon:Tt,expanded:n.has("treatment"),onToggle:()=>s("treatment"),children:l.jsx(z1,{recommendation:t.primaryRecommendation})}),t.alternativeTreatments.length>0&&l.jsx(Wi,{id:"alternatives",title:"Alternative Options",icon:al,badge:t.alternativeTreatments.length,badgeColor:"info",expanded:n.has("alternatives"),onToggle:()=>s("alternatives"),children:l.jsx(K1,{alternatives:t.alternativeTreatments})}),l.jsx(Wi,{id:"recommendations",title:"Additional Recommendations",icon:Xt,expanded:n.has("recommendations"),onToggle:()=>s("recommendations"),children:l.jsx(J1,{lifestyle:t.lifestyleRecommendations,followUp:t.followUpRecommendations,labTests:t.labTestsRecommended})}),l.jsx(Y1,{analysisResult:t,existingDecision:r}),l.jsx(Wi,{id:"audit",title:"Audit Log",icon:Jv,expanded:n.has("audit"),onToggle:()=>s("audit"),children:l.jsx(nj,{})}),l.jsxs("div",{className:"p-4 rounded-xl bg-clinical-secondary/30 border border-white/10",children:[l.jsxs("p",{className:"text-xs text-clinical-muted",children:[l.jsx("strong",{children:"Disclaimer:"})," ",t.disclaimer]}),l.jsxs("p",{className:"text-xs text-clinical-muted mt-2",children:["Analysis performed: ",new Date(t.analysisTimestamp).toLocaleString()," | Model: ",t.modelVersion]})]})]})}function Wi({title:t,icon:e,badge:r,badgeColor:n="info",expanded:i,onToggle:s,children:a}){const o={danger:"bg-clinical-danger/20 text-red-400 border-clinical-danger/30",warning:"bg-clinical-warning/20 text-amber-400 border-clinical-warning/30",success:"bg-clinical-success/20 text-emerald-400 border-clinical-success/30",info:"bg-clinical-accent/20 text-blue-400 border-clinical-accent/30"};return l.jsxs("div",{className:"card",children:[l.jsxs("button",{onClick:s,className:"w-full flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center ${n==="danger"?"bg-clinical-danger/20":n==="warning"?"bg-clinical-warning/20":"bg-clinical-accent/20"}`,children:l.jsx(e,{className:`w-5 h-5 ${n==="danger"?"text-clinical-danger":n==="warning"?"text-clinical-warning":"text-clinical-accent"}`})}),l.jsx("h2",{className:"text-lg font-semibold text-white",children:t}),r!==void 0&&r>0&&l.jsx("span",{className:`badge ${o[n]}`,children:r})]}),l.jsx(sl,{className:`w-5 h-5 text-clinical-muted transition-transform duration-200 ${i?"rotate-180":""}`})]}),i&&l.jsx("div",{className:"mt-4 pt-4 border-t border-white/10 animate-fade-in",children:a})]})}function sj(){const{resetAll:t,currentStep:e}=kr();return l.jsx("header",{className:"glass border-b border-white/10 sticky top-0 z-50",children:l.jsx("div",{className:"container mx-auto px-4 py-4 max-w-7xl",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-clinical-accent to-purple-600 flex items-center justify-center",children:l.jsx(nr,{className:"w-5 h-5 text-white"})}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-xl font-bold bg-gradient-to-r from-white to-gray-400 bg-clip-text text-transparent",children:"MedAssist AI"}),l.jsx("p",{className:"text-xs text-clinical-muted",children:"Clinical Decision Support"})]})]}),e>0&&l.jsxs("button",{onClick:t,className:`flex items-center gap-2 px-4 py-2 rounded-lg bg-clinical-secondary 
                         border border-white/10 text-gray-300 hover:text-white hover:border-white/20
                         transition-all duration-200`,children:[l.jsx(Zv,{className:"w-4 h-4"}),l.jsx("span",{className:"text-sm font-medium",children:"New Patient"})]})]})})})}function aj(){const[t,e]=Y.useState(!1),{setPatientData:r,setCurrentStep:n}=kr(),i=o=>{r(o),n(1)},s=o=>o.includes("CRITICAL")?l.jsx(Hs,{className:"w-5 h-5 text-red-500"}):o.includes("HIGH")?l.jsx(We,{className:"w-5 h-5 text-red-400"}):o.includes("MEDIUM")?l.jsx(Ni,{className:"w-5 h-5 text-amber-400"}):l.jsx(bd,{className:"w-5 h-5 text-emerald-400"}),a=o=>o.includes("CRITICAL")?"badge-danger glow-danger":o.includes("HIGH")?"badge-danger":o.includes("MEDIUM")?"badge-warning":"badge-success";return l.jsxs("div",{className:"card",children:[l.jsxs("button",{onClick:()=>e(!t),className:"w-full flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-10 h-10 rounded-xl bg-purple-500/20 flex items-center justify-center",children:l.jsx(ty,{className:"w-5 h-5 text-purple-400"})}),l.jsxs("div",{className:"text-left",children:[l.jsx("h3",{className:"font-semibold text-white",children:"Quick Start: Load Sample Patient"}),l.jsx("p",{className:"text-sm text-clinical-muted",children:"Choose a pre-configured patient to test risk flagging"})]})]}),l.jsx(sl,{className:`w-5 h-5 text-clinical-muted transition-transform duration-200 ${t?"rotate-180":""}`})]}),t&&l.jsx("div",{className:"mt-4 pt-4 border-t border-white/10 space-y-3 animate-fade-in",children:v1.map((o,c)=>l.jsx("button",{onClick:()=>i(o.data),className:`w-full p-4 rounded-xl bg-clinical-secondary/50 border border-white/5 
                         hover:border-white/20 hover:bg-clinical-secondary transition-all duration-200
                         text-left group`,children:l.jsxs("div",{className:"flex items-start justify-between gap-4",children:[l.jsxs("div",{className:"flex-1",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s(o.riskPreview),l.jsx("span",{className:"font-medium text-white group-hover:text-clinical-accent transition-colors",children:o.label})]}),l.jsx("p",{className:"text-sm text-clinical-muted mb-2",children:o.description}),l.jsx("span",{className:`badge ${a(o.riskPreview)}`,children:o.riskPreview})]}),l.jsxs("div",{className:"text-xs text-clinical-muted",children:[l.jsxs("div",{children:[o.data.currentMedications.length," medications"]}),l.jsxs("div",{children:[o.data.conditions.length," conditions"]}),l.jsxs("div",{children:[o.data.allergies.length," allergies"]})]})]})},c))})]})}const oj=[{id:"workflow",label:"Clinical Workflow",icon:nr},{id:"audit",label:"Audit Log",icon:Jv}];function lj({activeTab:t,onTabChange:e}){return l.jsx("div",{className:"flex items-center gap-1 p-1 rounded-xl bg-clinical-secondary/50 border border-white/10",children:oj.map(r=>{const n=r.icon,i=t===r.id;return l.jsxs("button",{onClick:()=>e(r.id),className:`
              flex items-center gap-2 px-4 py-2.5 rounded-lg font-medium text-sm
              transition-all duration-200
              ${i?"bg-clinical-accent text-white shadow-lg shadow-clinical-accent/25":"text-clinical-muted hover:text-white hover:bg-white/5"}
            `,children:[l.jsx(n,{className:"w-4 h-4"}),r.label]},r.id)})})}function cj(){const{auditLog:t,loadAuditLog:e,isAuditLogLoading:r,supabaseConnected:n,sessionId:i}=kr(),[s,a]=Y.useState(new Set),[o,c]=Y.useState(""),[u,d]=Y.useState("all"),[f,m]=Y.useState("all");Y.useEffect(()=>{e()},[e]);const g=h=>{const p=new Set(s);p.has(h)?p.delete(h):p.add(h),a(p)},y=t.filter(h=>{const p=o===""||h.details.toLowerCase().includes(o.toLowerCase())||h.userName.toLowerCase().includes(o.toLowerCase())||h.patientId.toLowerCase().includes(o.toLowerCase()),_=u==="all"||h.action===u,S=f==="all"||h.riskLevel===f;return p&&_&&S}),w={created:{icon:Xt,color:"text-clinical-accent",bg:"bg-clinical-accent/20",label:"Created"},viewed:{icon:kd,color:"text-purple-400",bg:"bg-purple-500/20",label:"Viewed"},approved:{icon:bn,color:"text-clinical-success",bg:"bg-clinical-success/20",label:"Approved"},modified:{icon:Yv,color:"text-clinical-warning",bg:"bg-clinical-warning/20",label:"Modified"},rejected:{icon:Nt,color:"text-clinical-danger",bg:"bg-clinical-danger/20",label:"Rejected"}},b=h=>{if(!h)return null;const p={low:"bg-emerald-500/20 text-emerald-400 border-emerald-500/30",medium:"bg-amber-500/20 text-amber-400 border-amber-500/30",high:"bg-red-500/20 text-red-400 border-red-500/30",critical:"bg-red-600/30 text-red-300 border-red-500/50"};return l.jsx("span",{className:`badge ${p[h]||p.low}`,children:h.toUpperCase()})},v=()=>{const h=JSON.stringify(y,null,2),p=new Blob([h],{type:"application/json"}),_=URL.createObjectURL(p),S=document.createElement("a");S.href=_,S.download=`audit-log-${Ma(new Date,"yyyy-MM-dd-HHmmss")}.json`,S.click(),URL.revokeObjectURL(_)};return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[l.jsxs("div",{children:[l.jsxs("h1",{className:"text-2xl font-bold text-white flex items-center gap-3",children:[l.jsx("div",{className:"w-10 h-10 rounded-xl bg-purple-500/20 flex items-center justify-center",children:l.jsx(Xt,{className:"w-5 h-5 text-purple-400"})}),"Audit Log"]}),l.jsx("p",{className:"text-clinical-muted mt-1",children:"Complete compliance trail for all clinical decisions"})]}),l.jsx("div",{className:`flex items-center gap-3 px-4 py-2 rounded-xl ${n?"bg-clinical-success/10 border border-clinical-success/30":"bg-clinical-warning/10 border border-clinical-warning/30"}`,children:n?l.jsxs(l.Fragment,{children:[l.jsx(Gv,{className:"w-5 h-5 text-clinical-success"}),l.jsxs("div",{children:[l.jsx("div",{className:"text-sm font-medium text-emerald-400",children:"Connected to Supabase"}),l.jsx("div",{className:"text-xs text-clinical-muted",children:"Logs are persisted"})]})]}):l.jsxs(l.Fragment,{children:[l.jsx(qv,{className:"w-5 h-5 text-clinical-warning"}),l.jsxs("div",{children:[l.jsx("div",{className:"text-sm font-medium text-amber-400",children:"In-Memory Only"}),l.jsx("div",{className:"text-xs text-clinical-muted",children:"Configure Supabase to persist"})]})]})})]}),l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[l.jsx(qi,{label:"Total Actions",value:t.length,icon:nr,color:"text-clinical-accent"}),l.jsx(qi,{label:"Approvals",value:t.filter(h=>h.action==="approved").length,icon:bn,color:"text-clinical-success"}),l.jsx(qi,{label:"Rejections",value:t.filter(h=>h.action==="rejected").length,icon:Nt,color:"text-clinical-danger"}),l.jsx(qi,{label:"High Risk Decisions",value:t.filter(h=>h.riskLevel==="high"||h.riskLevel==="critical").length,icon:We,color:"text-clinical-warning"}),l.jsx(qi,{label:"Unique Sessions",value:new Set(t.map(h=>h.sessionId)).size,icon:$a,color:"text-purple-400"})]}),l.jsx("div",{className:"card",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx($a,{className:"w-5 h-5 text-clinical-accent"}),l.jsxs("div",{children:[l.jsx("div",{className:"text-sm text-clinical-muted",children:"Current Session ID"}),l.jsx("div",{className:"font-mono text-white",children:i})]})]})}),l.jsxs("div",{className:"card",children:[l.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[l.jsxs("div",{className:"flex-1 relative",children:[l.jsx(h1,{className:"w-4 h-4 absolute left-3 top-1/2 -translate-y-1/2 text-clinical-muted"}),l.jsx("input",{type:"text",value:o,onChange:h=>c(h.target.value),placeholder:"Search by details, user, or patient...",className:`w-full pl-10 pr-4 py-2.5 rounded-lg bg-clinical-secondary border border-white/10 
                         text-white placeholder-clinical-muted text-sm focus:outline-none focus:border-clinical-accent`})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(o1,{className:"w-4 h-4 text-clinical-muted"}),l.jsxs("select",{value:u,onChange:h=>d(h.target.value),className:`px-3 py-2.5 rounded-lg bg-clinical-secondary border border-white/10 
                         text-white text-sm focus:outline-none cursor-pointer`,children:[l.jsx("option",{value:"all",children:"All Actions"}),l.jsx("option",{value:"created",children:"Created"}),l.jsx("option",{value:"approved",children:"Approved"}),l.jsx("option",{value:"rejected",children:"Rejected"}),l.jsx("option",{value:"modified",children:"Modified"}),l.jsx("option",{value:"viewed",children:"Viewed"})]})]}),l.jsx("div",{children:l.jsxs("select",{value:f,onChange:h=>m(h.target.value),className:`px-3 py-2.5 rounded-lg bg-clinical-secondary border border-white/10 
                         text-white text-sm focus:outline-none cursor-pointer`,children:[l.jsx("option",{value:"all",children:"All Risk Levels"}),l.jsx("option",{value:"low",children:"Low Risk"}),l.jsx("option",{value:"medium",children:"Medium Risk"}),l.jsx("option",{value:"high",children:"High Risk"}),l.jsx("option",{value:"critical",children:"Critical Risk"})]})}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:()=>e(),className:`px-3 py-2.5 rounded-lg bg-clinical-secondary border border-white/10 
                         text-clinical-muted hover:text-white hover:border-white/20 transition-colors`,title:"Refresh",children:l.jsx(Zv,{className:`w-4 h-4 ${r?"animate-spin":""}`})}),l.jsx("button",{onClick:v,className:`px-3 py-2.5 rounded-lg bg-clinical-secondary border border-white/10 
                         text-clinical-muted hover:text-white hover:border-white/20 transition-colors`,title:"Export JSON",children:l.jsx(i1,{className:"w-4 h-4"})})]})]}),l.jsxs("div",{className:"text-sm text-clinical-muted mt-3",children:["Showing ",y.length," of ",t.length," entries"]})]}),l.jsx("div",{className:"card",children:r?l.jsxs("div",{className:"flex items-center justify-center py-12 text-clinical-muted",children:[l.jsx(Sd,{className:"w-8 h-8 animate-spin mr-3"}),l.jsx("span",{children:"Loading audit log..."})]}):y.length===0?l.jsxs("div",{className:"text-center py-12 text-clinical-muted",children:[l.jsx(Xt,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),l.jsx("p",{className:"text-lg",children:"No audit entries found"}),l.jsx("p",{className:"text-sm mt-1",children:t.length>0?"Try adjusting your filters":"Start a patient workflow to generate entries"})]}):l.jsx("div",{className:"space-y-3",children:[...y].reverse().map(h=>{const p=w[h.action],_=p.icon,S=s.has(h.id);return l.jsxs("div",{className:`rounded-xl bg-clinical-secondary/30 border border-white/5 
                             hover:border-white/10 transition-all overflow-hidden`,children:[l.jsxs("button",{onClick:()=>g(h.id),className:"w-full flex items-start gap-4 p-4 text-left",children:[l.jsx("div",{className:`w-10 h-10 rounded-xl ${p.bg} flex items-center justify-center shrink-0`,children:l.jsx(_,{className:`w-5 h-5 ${p.color}`})}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[l.jsx("span",{className:`font-semibold ${p.color}`,children:p.label}),h.riskLevel&&b(h.riskLevel),h.riskScore!==void 0&&l.jsxs("span",{className:"text-xs text-clinical-muted bg-clinical-secondary/50 px-2 py-0.5 rounded",children:["Score: ",h.riskScore]})]}),l.jsx("p",{className:"text-gray-300 mt-1",children:h.details}),l.jsxs("div",{className:"flex items-center gap-6 mt-2 text-sm text-clinical-muted",children:[l.jsxs("span",{className:"flex items-center gap-1.5",children:[l.jsx(pr,{className:"w-3.5 h-3.5"}),h.userName]}),l.jsxs("span",{className:"flex items-center gap-1.5",children:[l.jsx(il,{className:"w-3.5 h-3.5"}),Ma(new Date(h.timestamp),"MMM d, yyyy")]}),l.jsxs("span",{className:"flex items-center gap-1.5",children:[l.jsx(zs,{className:"w-3.5 h-3.5"}),Ma(new Date(h.timestamp),"HH:mm:ss")]}),h.treatmentMedication&&l.jsxs("span",{className:"flex items-center gap-1.5",children:[l.jsx(Tt,{className:"w-3.5 h-3.5"}),h.treatmentMedication]})]})]}),l.jsx("div",{className:"flex items-center gap-2 shrink-0",children:S?l.jsx(sl,{className:"w-5 h-5 text-clinical-muted"}):l.jsx(Co,{className:"w-5 h-5 text-clinical-muted"})})]}),S&&l.jsxs("div",{className:"px-4 pb-4 pt-0 border-t border-white/5",children:[l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4 mt-4",children:[l.jsx(Kt,{label:"Entry ID",value:h.id,icon:To,mono:!0}),l.jsx(Kt,{label:"Session ID",value:h.sessionId,icon:$a,mono:!0}),l.jsx(Kt,{label:"Patient ID",value:h.patientId,icon:pr}),l.jsx(Kt,{label:"User ID",value:h.userId,icon:pr}),h.analysisId&&l.jsx(Kt,{label:"Analysis ID",value:h.analysisId,icon:nr,mono:!0}),h.confidenceScore!==void 0&&l.jsx(Kt,{label:"Confidence Score",value:`${h.confidenceScore}%`,icon:nr}),h.drugInteractionsCount!==void 0&&l.jsx(Kt,{label:"Drug Interactions",value:h.drugInteractionsCount.toString(),icon:We}),h.contraindicationsCount!==void 0&&l.jsx(Kt,{label:"Contraindications",value:h.contraindicationsCount.toString(),icon:We}),h.treatmentDosage&&l.jsx(Kt,{label:"Dosage",value:h.treatmentDosage,icon:Tt}),h.patientDataHash&&l.jsx(Kt,{label:"Data Integrity Hash",value:h.patientDataHash,icon:To,mono:!0})]}),h.userAgent&&l.jsxs("div",{className:"mt-4 p-3 rounded-lg bg-black/20",children:[l.jsx("div",{className:"text-xs text-clinical-muted mb-1 font-medium",children:"User Agent / Device"}),l.jsx("div",{className:"text-xs text-gray-400 font-mono break-all",children:h.userAgent})]}),h.modificationsJson&&h.modificationsJson.length>0&&l.jsxs("div",{className:"mt-4 p-3 rounded-lg bg-clinical-warning/10 border border-clinical-warning/20",children:[l.jsx("div",{className:"text-sm text-amber-400 font-medium mb-2",children:"Doctor Modifications"}),l.jsx("ul",{className:"text-sm text-gray-300 space-y-1",children:h.modificationsJson.map((N,E)=>l.jsxs("li",{className:"flex items-start gap-2",children:[l.jsx("span",{className:"text-amber-400",children:""})," ",N]},E))})]}),h.analysisSnapshot&&l.jsxs("div",{className:"mt-4 p-3 rounded-lg bg-black/20",children:[l.jsx("div",{className:"text-xs text-clinical-muted mb-2 font-medium",children:"Analysis Snapshot (at time of decision)"}),l.jsx("pre",{className:"text-xs text-gray-400 font-mono overflow-x-auto whitespace-pre-wrap",children:JSON.stringify(h.analysisSnapshot,null,2)})]}),h.patientSnapshot&&l.jsxs("div",{className:"mt-4 p-3 rounded-lg bg-black/20",children:[l.jsx("div",{className:"text-xs text-clinical-muted mb-2 font-medium",children:"Patient Data Snapshot"}),l.jsx("pre",{className:"text-xs text-gray-400 font-mono overflow-x-auto whitespace-pre-wrap max-h-48 overflow-y-auto",children:JSON.stringify(h.patientSnapshot,null,2)})]})]})]},h.id)})})}),l.jsx("div",{className:"card bg-clinical-secondary/30",children:l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx(Xt,{className:"w-5 h-5 text-clinical-muted shrink-0 mt-0.5"}),l.jsxs("div",{className:"text-sm text-clinical-muted",children:[l.jsx("p",{className:"font-medium text-gray-300 mb-1",children:"About Audit Logging"}),l.jsx("p",{children:"This audit log captures all clinical workflow actions for HIPAA compliance and medical record-keeping. Each entry includes session tracking, data integrity hashes, user identification, and complete snapshots of patient data and AI analysis at the time of each decision."})]})]})})]})}function qi({label:t,value:e,icon:r,color:n="text-clinical-accent"}){return l.jsxs("div",{className:"card",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[l.jsx(r,{className:`w-4 h-4 ${n}`}),l.jsx("span",{className:"text-sm text-clinical-muted",children:t})]}),l.jsx("div",{className:`text-3xl font-bold ${n}`,children:e})]})}function Kt({label:t,value:e,icon:r,mono:n=!1}){return l.jsxs("div",{className:"flex items-start gap-2",children:[l.jsx(r,{className:"w-4 h-4 text-clinical-muted mt-0.5 shrink-0"}),l.jsxs("div",{className:"min-w-0",children:[l.jsx("div",{className:"text-xs text-clinical-muted",children:t}),l.jsx("div",{className:`text-sm text-gray-300 break-all ${n?"font-mono text-xs":""}`,children:e})]})]})}function uj(){const{currentStep:t,patientData:e,analysisResult:r}=kr(),[n,i]=Y.useState("workflow");return l.jsxs("div",{className:"min-h-screen bg-pattern",children:[l.jsx(sj,{}),l.jsxs("main",{className:"container mx-auto px-4 py-8 max-w-7xl",children:[l.jsx("div",{className:"flex justify-center mb-8",children:l.jsx(lj,{activeTab:n,onTabChange:i})}),n==="workflow"?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"flex items-center justify-center gap-4 mb-8",children:["Intake","Analysis","Review"].map((s,a)=>l.jsxs("div",{className:"flex items-center",children:[l.jsx("div",{className:`
                    flex items-center justify-center w-10 h-10 rounded-full font-semibold text-sm
                    transition-all duration-300
                    ${t>a?"bg-clinical-success text-white":t===a?"bg-clinical-accent text-white glow-accent":"bg-clinical-secondary text-clinical-muted border border-white/10"}
                  `,children:t>a?"":a+1}),l.jsx("span",{className:`ml-2 font-medium ${t>=a?"text-gray-100":"text-clinical-muted"}`,children:s}),a<2&&l.jsx("div",{className:`w-16 h-0.5 mx-4 rounded-full ${t>a?"bg-clinical-success":"bg-clinical-secondary"}`})]},s))}),l.jsxs("div",{className:"animate-fade-in",children:[t===0&&l.jsxs("div",{className:"space-y-6",children:[l.jsx(aj,{}),l.jsx(C1,{})]}),t===1&&e&&l.jsx(B1,{patientData:e}),t===2&&r&&l.jsx(ij,{analysisResult:r})]})]}):l.jsx("div",{className:"animate-fade-in",children:l.jsx(cj,{})})]})]})}Kl.createRoot(document.getElementById("root")).render(l.jsx(Xe.StrictMode,{children:l.jsx(uj,{})}));
